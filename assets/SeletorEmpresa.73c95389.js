import{_ as B,ds as f,ag as v,dt as I,ai as M,du as N,o as Q,d as j,w as l,f as s,j as b,R as k,at as z,bf as L,S as _,T as y,k as h,t as E,aq as O}from"./index.129a5639.js";const P={__name:"SeletorEmpresa",props:f({chaves:Array,desabilitado:{type:Boolean,default:!1},rotulo:{type:String,default:"Empresa"},somenteLeitura:{type:Boolean,default:!1},permiteNull:{type:Boolean,default:!0}},{modelValue:{type:[Object,null]},modelModifiers:{}}),emits:f(["update:modelValue"],["update:modelValue"]),setup(u,{emit:S}){const n=v(null),r=v(null),d=I(u,"modelValue"),g=S,o=u;let i=[];function x(t){let e=null;t&&(e=i.find(a=>a.id===t.value),o.chaves&&Object.keys(e).forEach(a=>{o.chaves.includes(a)||delete e[a]})),g("update:modelValue",e)}function V(t,e,a){if(r.value!==null){e();return}e(p)}function c(t){let e;if(t&&(e=i.find(a=>a.id===t)),!e){n.value=null;return}n.value={label:e.nome,value:e.id}}async function p(){var t;if(i=(await $db.contato.ler({filtros:{ativo:!0,empresas:!0}})).data,o.chaves)for(const e of i)Object.keys(e).forEach(a=>{["id","nome",...o.chaves].includes(a)||delete e[a]});r.value=i.map(e=>{var a,m;return{value:e.id,label:(a=e.apelido)!=null?a:e.nome,description:(m=e.numeroDocumentoNacional)!=null?m:""}}),c((t=d.value)==null?void 0:t.id)}return M(d,t=>{var a;const e=t==null?void 0:t.id;e!==((a=n.value)==null?void 0:a.value)&&c(e)}),N(p),(t,e)=>(Q(),j(O,{modelValue:n.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>n.value=a),x],options:r.value,onFilter:V,label:o.rotulo,readonly:o.somenteLeitura,disable:o.desabilitado,clearable:o.permiteNull,dense:"","hide-bottom-space":"","input-class":"no-wrap",class:"q-field--with-bottom"},{prepend:l(()=>[s(b,{name:"business",size:"20px"})]),option:l(a=>[s(k,z(L(a.itemProps)),{default:l(()=>[s(_,{avatar:"",class:"no-margin"},{default:l(()=>[s(b,{name:"business",size:"20px"})]),_:1}),s(_,{class:"no-margin"},{default:l(()=>[s(y,null,{default:l(()=>[h(E(a.opt.label),1)]),_:2},1024),s(y,{caption:""},{default:l(()=>[h(E(a.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","label","readonly","disable","clearable"]))}};var w=B(P,[["__scopeId","data-v-2a16cb22"]]);export{w as S};
