import{_ as g,p as d,o as r,i as n,w as i,D as p,l,f as u,B as w,E as k,j as S,e as m,a4 as v,k as C}from"./index.20d4d726.js";import{Q as b}from"./QEditor.97f5a081.js";import{Q as q}from"./QPopupProxy.7fc7e5c1.js";const T={data(){return{desenvolvedor:!1,ativo:!1,texto:"Nenhum texto configurado...",apenasLeitura:!0,response:{},speech:"idle"}},props:{caminho:String},methods:{async atualizar(){var s,e;try{this.response=(await $utils.geeksApi({le:{funcao:"6E5CC5B2-F185-4C70-BF4F-23DC934477F4",caminho:this.caminho||$router.currentRoute.value.matched.slice(-1)[0].path}})).data.le.recordset[0],this.ativo=!!((s=this.response)!=null&&s.ativo),this.texto=((e=this.response)==null?void 0:e.texto)||"Nenhum texto configurado..."}catch(o){$q.notifyError(`Ocorreu um erro ao ler o texto de ajuda: ${o.message}`),console.error(o)}},async salvar(){var s,e;try{if(this.texto==="Nenhum texto configurado..."||this.texto===((s=this.response)==null?void 0:s.texto)&&this.ativo===((e=this.response)==null?void 0:e.ativo))return $q.notify("N\xE3o h\xE1 altera\xE7\xF5es.");const o=await $utils.geeksApi({grava:{funcao:"556C9BAE-2C6F-454C-918D-5C43DEC22707",caminho:this.caminho||$router.currentRoute.value.matched.slice(-1)[0].path,texto:this.texto,ativo:this.ativo}});o.status===200&&o.statusText==="OK"&&$q.notifyPositive("Mensagem de ajuda gravada com sucesso!"),await this.atualizar()}catch(o){$q.notifyError(`Ocorreu um erro ao salvar o texto de ajuda: ${o.message}`),console.error(o)}},speak(s){if("speechSynthesis"in window){const e=this.limparHtmlTexto(s),o=new SpeechSynthesisUtterance(e);o.lang="pt-BR",o.pitch=1,o.rate=1;const h=window.speechSynthesis.getVoices();o.voice=h.find(t=>t.name==="Google portugu\xEAs do Brasil"&&t.lang==="pt-BR"),o.onstart=()=>{this.speech="start"},o.onpause=()=>{this.speech="pause"},o.onresume=()=>{this.speech="resume"},o.onend=()=>{this.speech="end"},window.speechSynthesis.speak(o)}else console.error("Speech Synthesis n\xE3o suportado")},pauseSpeech(){"speechSynthesis"in window&&(window.speechSynthesis.pause(),this.speech="pause")},resumeSpeech(){"speechSynthesis"in window&&(window.speechSynthesis.resume(),this.speech="resume")},stopSpeech(){"speechSynthesis"in window&&(window.speechSynthesis.cancel(),this.speech="idle")},limparHtmlTexto(s){const e=document.createElement("div");return e.innerHTML=s,e.textContent||e.innerText||""}},async created(){this.desenvolvedor=await $db.usuario.desenvolvedor()},async mounted(){this.atualizar()}};function j(s,e,o,h,t,c){const y=d("campo"),f=d("g-label"),x=d("g-col"),_=d("g-row");return t.desenvolvedor||t.ativo?(r(),n(p,{key:0,icon:"help_outline",flat:"",round:"",dense:""},{default:i(()=>[u(q,{class:"containerAjudaCard",breakpoint:"700",style:{"max-height":"75vh"}},{default:i(()=>[u(_,{gutter:"md",bg:"bg-white",class:"ajudaRow"},{default:i(()=>[u(x,{col:"12",class:"q-pa-none"},{default:i(()=>[u(w,{class:"q-pa-none"},{default:i(()=>[u(k,null,{default:i(()=>[u(S,{name:"help_outline",size:"sm"}),m(" Ajuda ")]),_:1}),t.desenvolvedor?(r(),n(y,{key:0,modelValue:t.ativo,"onUpdate:modelValue":[e[0]||(e[0]=a=>t.ativo=a),e[1]||(e[1]=a=>c.salvar())],tipo:"logico",dica:"Exibir para os clientes",style:{"max-width":"42px"}},null,8,["modelValue"])):l("",!0),t.desenvolvedor?(r(),n(p,{key:1,onClick:e[2]||(e[2]=a=>c.salvar()),icon:"save",flat:"",round:"",dense:"",color:"primary"})):l("",!0),t.desenvolvedor?(r(),n(v,{key:2,vertical:"",class:"q-mx-sm"})):l("",!0),t.speech==="idle"||t.speech==="end"?(r(),n(p,{key:3,onClick:e[3]||(e[3]=a=>c.speak(t.texto)),icon:"play_arrow",flat:"",round:"",dense:"",color:"primary"},{default:i(()=>[u(C,null,{default:i(()=>[m("Iniciar texto em fala")]),_:1})]),_:1})):l("",!0),t.speech==="start"||t.speech==="resume"?(r(),n(p,{key:4,onClick:e[4]||(e[4]=a=>c.pauseSpeech()),icon:"pause",flat:"",round:"",dense:"",color:"primary",class:"q-ml-sm"})):l("",!0),t.speech==="pause"?(r(),n(p,{key:5,onClick:e[5]||(e[5]=a=>c.resumeSpeech()),icon:"play_arrow",flat:"",round:"",dense:"",color:"primary",class:"q-ml-sm"})):l("",!0),t.speech!=="idle"&&t.speech!=="end"?(r(),n(p,{key:6,onClick:e[6]||(e[6]=a=>c.stopSpeech()),icon:"stop",flat:"",round:"",dense:"",color:"red",class:"q-ml-sm"})):l("",!0)]),_:1}),u(v,{class:"q-mx-md q-mb-md"}),t.desenvolvedor?(r(),n(b,{key:0,modelValue:t.texto,"onUpdate:modelValue":e[7]||(e[7]=a=>t.texto=a),readonly:!t.desenvolvedor,filled:"","min-height":"120px","max-height":"60vh",toolbar:[["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["removeFormat"],["quote","unordered","ordered","outdent","indent"],["viewsource"]]},null,8,["modelValue","readonly"])):(r(),n(f,{key:1,innerHTML:t.texto,"rounded-borders":"",bg:"bg-light",class:"ajudaTexto"},null,8,["innerHTML"]))]),_:1})]),_:1})]),_:1})]),_:1})):l("",!0)}var A=g(T,[["render",j],["__scopeId","data-v-6817c3bf"]]);export{A};
