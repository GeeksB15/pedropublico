import{_ as B,p as k,o as h,d as C,x as i,f as e,w as a,N as F,F as T,r as O,P as S,R as p,bw as R,e as f,t as _,k as ae,D as V,T as L,i as w,bt as j,l as q,u as $,K as G,z as H,A as K,B as N,E as I,G as W,H as X,Q as x,s as A,bb as Y,y as Z,j as te,M as J,S as b}from"./index.e0611938.js";import{Q as oe}from"./QBtnToggle.8ceea3ec.js";import{S as se}from"./SeletorCfop.4bca18ff.js";import{Q as ne}from"./QBtnGroup.efb2a092.js";const Q={id:"",descricao:"",finalidade:100,json:{contribuinte:[{descricao:"Venda",interna:"",internaST:"",interestadual:"",interestadualST:""},{descricao:"Devolu\xE7\xE3o",interna:"",internaST:"",interestadual:"",interestadualST:""}],naoContribuinte:[{descricao:"Venda",interna:"",internaST:"",interestadual:"",interestadualST:""},{descricao:"Devolu\xE7\xE3o",interna:"",internaST:"",interestadual:"",interestadualST:""}]}},z={show:!1,titulo:"",documento:{}},ie={components:{SeletorCfop:se},data(){return{documentos:[],columnsContribuinte:[],columnsNaoContribuinte:[],opcoesFinalidade:[],modal:{},validations:{}}},methods:{async atualizar(){this.modal=$utils.clonarV2(z);try{const o=await $db.documentoOperacao.ler();for(const l of o){if(!l.json){l.json=$utils.clonarV2(Q.json);continue}l.json=JSON.parse(l.json)}this.documentos=o}catch(o){console.log(o)}},alterar(o){const l=this.documentos.find(n=>n.id===o);this.modal.documento=$utils.clonarV2(l),this.modal.titulo="Alterar opera\xE7\xE3o",this.modal.show=!0},descricaoFinalidade(o){var n;const l=this.documentos.find(d=>d.id===o);return(n=this.opcoesFinalidade.find(d=>d.value===l.finalidade))==null?void 0:n.label},inserir(){this.modal.documento=$utils.clonarV2(Q),this.modal.documento.id=$utils.uuid(),this.modal.titulo="Inserir opera\xE7\xE3o",this.modal.show=!0},async ativarDesativar(o){const l=this.documentos.find(d=>d.id===o),n={};n.original={id:l.id,ativo:!l.ativo},n.atual={id:l.id,ativo:l.ativo};try{await $db.documentoOperacao.gravar(n)}catch(d){console.log(d)}},async salvar(){if(!this.modal.documento.finalidade){$q.notify({message:"Selecione a finalidade",type:"negative"});return}const o=this.documentos.find(n=>n.id===this.modal.documento.id),l={};o&&(l.original=$utils.clonarV2(o),l.original.json=JSON.stringify(l.original.json)),l.atual=$utils.clonarV2(this.modal.documento),l.atual.json=JSON.stringify(l.atual.json);try{await $db.documentoOperacao.gravar(l)}catch(n){console.log(n)}finally{this.atualizar()}},voltar(o){o.stopPropagation();const l=this.documentos.find(d=>d.id===this.modal.documento.id);let n={};if(l||(n=$utils.diferencaObjetos(Q,this.modal.documento)),l&&(n=$utils.diferencaObjetos(l,this.modal.documento)),delete n.id,console.log("diferenca: ",n),!Object.keys(n).length){this.modal=$utils.clonarV2(z);return}$q.dialog({message:"Deseja descartar as modifica\xE7\xF5es?",title:"Descartar",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Descartar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.modal=$utils.clonarV2(z)})}},async beforeMount(){this.columnsContribuinte=[{name:"descricao",align:"left",label:"PJ Contribuinte",field:"descricao",sortable:!1},{name:"interna",align:"left",label:"Interna",field:"interna",sortable:!1},{name:"internaST",align:"left",label:"Interna ST",field:"internaST",sortable:!1},{name:"interestadual",align:"left",label:"Interestadual",field:"interestadual",sortable:!1},{name:"interestadualST",align:"left",label:"Interestadual ST",field:"interestadualST",sortable:!1}],this.columnsNaoContribuinte=[{name:"descricao",align:"left",label:"PF/PJ N\xE3o Contribuinte",field:"descricao",sortable:!1},{name:"interna",align:"left",label:"Interna",field:"interna",sortable:!1},{name:"internaST",align:"left",label:"Interna ST",field:"internaST",sortable:!1},{name:"interestadual",align:"left",label:"Interestadual",field:"interestadual",sortable:!1},{name:"interestadualST",align:"left",label:"Interestadual ST",field:"interestadualST",sortable:!1}],this.opcoesFinalidade=[{label:"Revenda",value:99},{label:"Consumo",value:100}],this.validations={required:[o=>o.length||"Campo obrigat\xF3rio"]},this.atualizar()}},re={class:"text-left q-mt-lg u-container"},de={class:"q-card bg-white q-my-md no-shadow"},ce={class:"q-mt-md text-center"},ue={class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},me={class:"col-12"},fe=i("div",{class:"col"},"Finalidade",-1),he={class:"col"},ge=i("div",{class:"col"}," \xA0\xA0\xA0 ",-1),_e=i("div",{class:"col"}," \xA0\xA0\xA0 ",-1),be=i("div",{class:"col"}," \xA0\xA0\xA0 ",-1),pe={class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},ve={class:"col-12"},Ve=i("div",{class:"col-12 col-md"}," \xA0\xA0\xA0 ",-1),we=i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interna")],-1),ye=i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interna ST")],-1),Ce=i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interestadual")],-1),Se=i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interestadual ST")],-1),Te={class:"col-12 col-md"},qe={class:"col-6 col-md"},ke={class:"col-6 col-md"},xe={class:"col-6 col-md"},Ne={class:"col-6 col-md"},Ie={key:0,class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},Me={class:"col-12"},Ue=i("div",{class:"col-12 col-md"}," \xA0\xA0\xA0 ",-1),Pe=i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interna")],-1),Fe=i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interna ST")],-1),Oe=i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interestadual")],-1),Ae=i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interestadual ST")],-1),De={class:"col-12 col-md"},Qe={class:"col-6 col-md"},ze={class:"col-6 col-md"},Re={class:"col-6 col-md"},je={class:"col-6 col-md"};function Be(o,l,n,d,s,c){const u=k("row"),m=k("SeletorCfop");return h(),C(T,null,[i("div",re,[i("div",de,[e($,{group:"somegroup",icon:"explore",label:"Opera\xE7\xF5es",class:"border-1 q-my-sm"},{default:a(()=>[e(F,{highlight:"",class:"q-ma-sm q-pb-md"},{default:a(()=>[(h(!0),C(T,null,O(s.documentos,t=>(h(),C(T,{key:t.id},[e(S,{class:"row u-separador q-my-none"},{default:a(()=>[e(p,{avatar:""},{default:a(()=>[e(R,{color:t.ativo?"positive":"tertiary",small:""},{default:a(()=>[f(" #"+_(t.id.slice(-6)),1)]),_:2},1032,["color"]),e(ae,null,{default:a(()=>[f(_(t.ativo?"Ativado":"Desativado"),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:a(()=>[f(_(t.descricao),1)]),_:2},1024),e(p,{avatar:""},{default:a(()=>[e(R,{color:"tertiary",small:""},{default:a(()=>[f(_(c.descricaoFinalidade(t.id)),1)]),_:2},1024)]),_:2},1024),e(p,{avatar:""},{default:a(()=>[e(u,{class:"q-col-gutter-x-sm itens-end"},{default:a(()=>[e(V,{color:"primary",dense:"",flat:"",icon:"edit",round:"",onClick:r=>c.alterar(t.id)},null,8,["onClick"]),i("div",null,[e(L,{modelValue:t.ativo,"onUpdate:modelValue":[r=>t.ativo=r,r=>c.ativarDesativar(t.id)],"checked-icon":"check",color:"green","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),t.json?(h(),w(S,{key:0},{default:a(()=>[e(p,null,{default:a(()=>[e(u,{class:"q-col-gutter-md q-mb-md"},{default:a(()=>[t.json.contribuinte[0].interna?(h(),w(j,{key:0,dense:"",flat:"",rows:t.json.contribuinte,columns:s.columnsContribuinte,"row-key":"descricao",class:"col-xs-12 col-md-6","hide-bottom":""},null,8,["rows","columns"])):q("",!0),t.json.naoContribuinte[0].interna?(h(),w(j,{key:1,dense:"",flat:"",rows:t.json.naoContribuinte,columns:s.columnsNaoContribuinte,"row-key":"descricao",class:"col-xs-12 col-md-6","hide-bottom":""},null,8,["rows","columns"])):q("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128)),i("div",ce,[e(V,{color:"positive",icon:"add",label:"Opera\xE7\xE3o",outline:"",size:"sm",onClick:c.inserir},null,8,["onClick"])])]),_:1})]),_:1})])]),e(Z,{modelValue:s.modal.show,"onUpdate:modelValue":l[2]||(l[2]=t=>s.modal.show=t),maximized:"","content-css":{maxWidth:"80vw"},persistent:"",onKeyup:Y(c.voltar,["esc"])},{default:a(()=>[e(G,{container:"",class:"bg-light"},{default:a(()=>[e(H,{onSubmit:c.salvar},{default:a(()=>[e(K,null,{default:a(()=>[e(N,null,{default:a(()=>[e(V,{dense:"",flat:"",icon:"arrow_back",round:"",onClick:c.voltar},null,8,["onClick"]),e(I,null,{default:a(()=>[f(_(s.modal.titulo),1)]),_:1}),e(V,{class:"bg-white text-primary",label:"Salvar",unelevated:"",type:"submit"})]),_:1})]),_:1}),e(W,null,{default:a(()=>[e(X,{class:"u-container q-pt-md"},{default:a(()=>[i("div",ue,[e(u,{class:"items-center"},{default:a(()=>[i("div",me,[e(x,{modelValue:s.modal.documento.descricao,"onUpdate:modelValue":l[0]||(l[0]=t=>s.modal.documento.descricao=t),label:"Descri\xE7\xE3o",rules:s.validations.required},null,8,["modelValue","rules"])])]),_:1}),e(u,{class:"items-center q-mt-md"},{default:a(()=>[fe,i("div",he,[e(oe,{unelevated:"",modelValue:s.modal.documento.finalidade,"onUpdate:modelValue":l[1]||(l[1]=t=>s.modal.documento.finalidade=t),"toggle-color":"primary",options:s.opcoesFinalidade},null,8,["modelValue","options"])]),ge,_e,be]),_:1})]),i("div",pe,[e(u,{class:"items-center"},{default:a(()=>[i("div",ve,[e(A,{class:"no-shadow rounded-borders"},{default:a(()=>[e(N,{class:"q-pa-none"},{default:a(()=>[e(I,{class:"text-tertiary"},{default:a(()=>[f("PJ Contribuinte")]),_:1})]),_:1}),e(u,{class:"items-center q-col-gutter-md"},{default:a(()=>[Ve,we,ye,Ce,Se]),_:1}),(h(!0),C(T,null,O(s.modal.documento.json.contribuinte,t=>(h(),w(u,{key:t.descricao,class:"items-center q-col-gutter-md"},{default:a(()=>[i("div",Te,_(t.descricao),1),i("div",qe,[e(m,{modelValue:t.interna,"onUpdate:modelValue":r=>t.interna=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",ke,[e(m,{modelValue:t.internaST,"onUpdate:modelValue":r=>t.internaST=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",xe,[e(m,{modelValue:t.interestadual,"onUpdate:modelValue":r=>t.interestadual=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",Ne,[e(m,{modelValue:t.interestadualST,"onUpdate:modelValue":r=>t.interestadualST=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])])]),_:2},1024))),128))]),_:1})])]),_:1})]),s.modal.documento.finalidade===100?(h(),C("div",Ie,[e(u,{class:"items-center"},{default:a(()=>[i("div",Me,[e(A,{class:"no-shadow rounded-borders"},{default:a(()=>[e(N,{class:"q-pa-none"},{default:a(()=>[e(I,{class:"text-tertiary"},{default:a(()=>[f("PF/PJ N\xE3o Contribuinte")]),_:1})]),_:1}),e(u,{class:"items-center q-col-gutter-md"},{default:a(()=>[Ue,Pe,Fe,Oe,Ae]),_:1}),(h(!0),C(T,null,O(s.modal.documento.json.naoContribuinte,t=>(h(),w(u,{key:t.descricao,class:"items-center q-col-gutter-md"},{default:a(()=>[i("div",De,_(t.descricao),1),i("div",Qe,[e(m,{modelValue:t.interna,"onUpdate:modelValue":r=>t.interna=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",ze,[e(m,{modelValue:t.internaST,"onUpdate:modelValue":r=>t.internaST=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",Re,[e(m,{modelValue:t.interestadual,"onUpdate:modelValue":r=>t.interestadual=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",je,[e(m,{modelValue:t.interestadualST,"onUpdate:modelValue":r=>t.interestadualST=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])])]),_:2},1024))),128))]),_:1})])]),_:1})])):q("",!0)]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","onKeyup"])],64)}var Ee=B(ie,[["render",Be]]);const U={id:"",ncm:"",descricao:"",cest:"",dataVigenteInicial:"",dataVigenteFinal:"",json:[]},P={show:!1,titulo:"",ncm:{}},Je={data(){return{columnsNCM:[],ncms:[],ncmsFiltrados:[],ufsDescricao:[],ufsNcm:[],pagination:{},fullText:{},termoBusca:"",modal:{},validations:{},loading:!1,hint:{}}},methods:{async atualizar(){try{this.loading=!0;const o=await $db.ncm.ler();this.obterJson(o),this.obterTermos(o),this.ncms=o,await this.buscar()}catch(o){console.log(o)}finally{this.loading=!1}},alterar(o){const l=this.ncms.find(n=>n.id===o);this.obterUfs(l),this.modal.ncm=$utils.clonarV2(l),this.modal.titulo="Alterar NCM",this.modal.show=!0},async buscar(){try{if(this.loading=!0,await $utils.dormir(500),!this.termoBusca.trim()){this.ncmsFiltrados=$utils.clonarV2(this.ncms);return}let o=$utils.removerAcentos(this.termoBusca).toLowerCase().trim().replace(/\s+/g," ").split(" ");if(this.hint.show=!1,!o.find(n=>n.length>=3)){this.hint.show=!0;return}o=Array.from(new Set(o)),o.sort((n,d)=>n.length<d.length?1:-1);const l=[];for(const n in this.fullText){const d=this.fullText[n];if(!d)continue;let s=!0;for(const u of o)if(!~d.indexOf(u)){s=!1;break}if(!s)continue;const c=$utils.clonarV2(this.ncms.find(u=>u.id===n));l.push(c),this.destacarTexto(["ncm","descricao"],c,o)}this.ncmsFiltrados=l}catch(o){console.log(o)}finally{this.loading=!1}},descricaoST(o){const l=this.ncms.find(d=>d.id===o),n=[];for(const d of(l==null?void 0:l.json)||[])n.push(d);return n.sort((d,s)=>d<s?-1:1),n.join(", ")},descricaoUF(o){const l=this.ufsDescricao.find(n=>n.sigla===o);return`${l.nome} (${l.sigla})`},inserir(){const o=$utils.clonarV2(U);this.obterUfs(o),this.modal.ncm=$utils.clonarV2(U),this.modal.ncm.id=$utils.uuid(),this.modal.titulo="Inserir NCM",this.modal.show=!0},obterJson(o){for(const l of o){if(!l.json){l.json=$utils.clonarV2(U.json);continue}l.json=JSON.parse(l.json)}},desmarcarTodos(){for(const o of this.ufsNcm)o.st=!1},inverterSelecao(){for(const o of this.ufsNcm)o.st=!o.st},destacarTexto(o,l,n){var d,s,c,u;for(const m of o){const t=$utils.removerAcentos(l[m]||"").toLowerCase(),r=[];for(const g of n){const y=new RegExp(g,"g");for(const D of[...t.matchAll(y)].map(le=>le.index))r.push({from:D,length:g.length})}r.sort((g,y)=>g.from<y.from?-1:1);let v=0;for(;!(!(r.length>1)||v+1>=r.length);){const g=r[v].from+r[v].length,y=r[v+1].from;if(g>y){r[v].length=r[v].length>r[v+1].length?r[v].length:r[v+1].length,r.splice(v+1,1),v=0;continue}v++}let M=l[m].substr(0,((d=r[0])==null?void 0:d.from)||0);for(let g=0;g<r.length;g++){M+='<mark style="background-color:#fafcb8 !important">'+l[m].substr(r[g].from,r[g].length)+"</mark>";const y=r[g].from+r[g].length,D=(((s=r[g+1])==null?void 0:s.from)||y)-y;M+=l[m].substr(y,D)}const E=r.length-1,ee=(((c=r[E])==null?void 0:c.from)||0)+(((u=r[E])==null?void 0:u.length)||0);M+=l[m].substr(ee,l[m].length),l[m]=M}},obterTermos(o){this.fullText=[];for(const l of o)this.fullText[l.id]=`${l.ncm} ${$utils.removerAcentos(l.descricao)}`.toLowerCase()},obterUfs(o){const l=[{uf:"AC",st:!1},{uf:"AL",st:!1},{uf:"AP",st:!1},{uf:"AM",st:!1},{uf:"BA",st:!1},{uf:"CE",st:!1},{uf:"DF",st:!1},{uf:"ES",st:!1},{uf:"GO",st:!1},{uf:"MA",st:!1},{uf:"MT",st:!1},{uf:"MS",st:!1},{uf:"MG",st:!1},{uf:"PA",st:!1},{uf:"PB",st:!1},{uf:"PR",st:!1},{uf:"PE",st:!1},{uf:"PI",st:!1},{uf:"RJ",st:!1},{uf:"RN",st:!1},{uf:"RS",st:!1},{uf:"RO",st:!1},{uf:"RR",st:!1},{uf:"SC",st:!1},{uf:"SP",st:!1},{uf:"SE",st:!1},{uf:"TO",st:!1}];if(!(o.json||[]).length){this.ufsNcm=$utils.clonarV2(l);return}for(const n of o.json){const d=l.find(s=>s.uf===n);!d||(d.st=!0)}this.ufsNcm=$utils.clonarV2(l)},async remover(o){try{await new Promise((l,n)=>{$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Deseja remover o NCM?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{l()}).onCancel(()=>{n()})})}catch{return}try{const l=this.ncms.find(n=>n.id===o);await $db.ncm.remover(l)}catch(l){console.log(l)}finally{this.atualizar()}},async salvar(){const o=this.ncms.find(n=>n.id===this.modal.ncm.id),l={};o&&(l.original=$utils.clonarV2(o),l.original.json=JSON.stringify(l.original.json)),l.atual=$utils.clonarV2(this.modal.ncm),l.atual.json=[];for(const n of this.ufsNcm)!n.st||l.atual.json.push(n.uf);l.atual.json=JSON.stringify(l.atual.json);try{await $db.ncm.gravar(l)}catch(n){console.log(n)}finally{this.modal=$utils.clonarV2(P),this.atualizar()}},voltar(o){o.stopPropagation();const l=this.ncms.find(d=>d.id===this.modal.ncm.id);let n={};if(l||(n=$utils.diferencaObjetos(U,this.modal.ncm)),l&&(n=$utils.diferencaObjetos(l,this.modal.ncm)),delete n.id,!Object.keys(n).length){this.modal=$utils.clonarV2(P);return}$q.dialog({message:"Deseja descartar as modifica\xE7\xF5es?",title:"Descartar",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Descartar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.modal=$utils.clonarV2(P)})}},async beforeMount(){this.pagination={rowsPerPage:25},this.columnsNCM=[{name:"id",align:"left",label:"ID",field:"id",sortable:!1},{name:"ncm",align:"left",label:"NCM",field:"ncm",sortable:!1},{name:"descricao",align:"left",label:"Descri\xE7\xE3o",field:"descricao",sortable:!1},{name:"cest",align:"left",label:"CEST",field:"cest",sortable:!1},{name:"dataVigenteInicial",align:"left",label:"Vig\xEAncia",field:"dataVigenteInicial",sortable:!1},{name:"alterar",align:"left",label:"Alterar",sortable:!1},{name:"remover",align:"left",label:"Remover",sortable:!1}],this.ufsDescricao=[{nome:"Acre",sigla:"AC"},{nome:"Alagoas",sigla:"AL"},{nome:"Amap\xE1",sigla:"AP"},{nome:"Amazonas",sigla:"AM"},{nome:"Bahia",sigla:"BA"},{nome:"Cear\xE1",sigla:"CE"},{nome:"Distrito Federal",sigla:"DF"},{nome:"Esp\xEDrito Santo",sigla:"ES"},{nome:"Goi\xE1s",sigla:"GO"},{nome:"Maranh\xE3o",sigla:"MA"},{nome:"Mato Grosso",sigla:"MT"},{nome:"Mato Grosso do Sul",sigla:"MS"},{nome:"Minas Gerais",sigla:"MG"},{nome:"Par\xE1",sigla:"PA"},{nome:"Para\xEDba",sigla:"PB"},{nome:"Paran\xE1",sigla:"PR"},{nome:"Pernambuco",sigla:"PE"},{nome:"Piau\xED",sigla:"PI"},{nome:"Rio de Janeiro",sigla:"RJ"},{nome:"Rio Grande do Norte",sigla:"RN"},{nome:"Rio Grande do Sul",sigla:"RS"},{nome:"Rond\xF4nia",sigla:"RO"},{nome:"Roraima",sigla:"RR"},{nome:"Santa Catarina",sigla:"SC"},{nome:"S\xE3o Paulo",sigla:"SP"},{nome:"Sergipe",sigla:"SE"},{nome:"Tocantins",sigla:"TO"}],this.validations={required:[o=>o.length||"Campo obrigat\xF3rio"],ncm:[o=>o.length||"Campo obrigat\xF3rio",o=>o.length>=8||"O NCM deve ser composto de 8 d\xEDgitos",o=>{const l=this.ncms.find(n=>n.ncm===o);return!l||l.id===this.modal.ncm.id?!0:"NCM j\xE1 existente"}]},this.hint={msg:"Para pesquisar digite termo(s) com 3 caracteres ou mais",show:!1},this.modal=$utils.clonarV2(P),this.atualizar()}},Le={class:"text-left q-mt-lg u-container"},$e={class:"q-card bg-white q-my-md no-shadow"},Ge={class:"q-gutter-xs"},He=["innerHTML"],Ke=["innerHTML"],We={class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},Xe={class:"col-12"},Ye={class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},Ze={class:"col-12"},el={class:"q-pb-md q-gutter-y-md column items-end"};function ll(o,l,n,d,s,c){const u=k("campo"),m=k("row");return h(),C(T,null,[i("div",Le,[i("div",$e,[e($,{group:"somegroup",icon:"explore",label:"NCM",class:"border-1 q-my-sm"},{default:a(()=>[e(F,{highlight:"",class:"q-ma-sm q-pb-md"},{default:a(()=>[e(j,{dense:"",flat:"",rows:s.ncmsFiltrados,columns:s.columnsNCM,pagination:s.pagination,class:"col-xs-12 col-md-6",grid:"",loading:s.loading},{"top-right":a(()=>[e(x,{outlined:"",dense:"",debounce:"300",modelValue:s.termoBusca,"onUpdate:modelValue":[l[0]||(l[0]=t=>s.termoBusca=t),c.buscar],placeholder:"Pesquisar",hint:s.hint.show?s.hint.msg:""},{append:a(()=>[e(te,{name:"search"})]),_:1},8,["modelValue","onUpdate:modelValue","hint"])]),"top-left":a(()=>[i("div",Ge,[e(V,{icon:"refresh",outline:"",size:"sm",onClick:c.atualizar},null,8,["onClick"]),e(V,{color:"positive",icon:"add",label:"NCM",outline:"",size:"sm",onClick:c.inserir},null,8,["onClick"])])]),item:a(t=>[e(A,{class:"my-card",flat:"",bordered:""},{default:a(()=>[e(J,{class:"row justify-between"},{default:a(()=>[e(R,{color:"positive",small:""},{default:a(()=>[f(" #"+_(t.row.id.slice(-6)),1)]),_:2},1024),i("div",null,[e(V,{color:"primary",dense:"",flat:"",size:"sm",icon:"edit",round:"",onClick:r=>c.alterar(t.row.id)},null,8,["onClick"])])]),_:2},1024),e(J,null,{default:a(()=>[e(F,null,{default:a(()=>[e(S,null,{default:a(()=>[e(p,null,{default:a(()=>[e(b,null,{default:a(()=>[f("NCM")]),_:1}),e(b,{caption:""},{default:a(()=>[i("span",{innerHTML:t.row.ncm},null,8,He)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(S,null,{default:a(()=>[e(p,null,{default:a(()=>[e(b,null,{default:a(()=>[f("Descri\xE7\xE3o")]),_:1}),e(b,{caption:"",class:"word-break"},{default:a(()=>[i("span",{innerHTML:t.row.descricao},null,8,Ke)]),_:2},1024)]),_:2},1024)]),_:2},1024),(t.row.cest||"").trim()?(h(),w(S,{key:0},{default:a(()=>[e(p,null,{default:a(()=>[e(b,null,{default:a(()=>[f("CEST")]),_:1}),e(b,{caption:"",class:"word-break"},{default:a(()=>[f(_(t.row.cest),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):q("",!0),c.descricaoST(t.row.id)?(h(),w(S,{key:1},{default:a(()=>[e(p,null,{default:a(()=>[e(b,null,{default:a(()=>[f("ST")]),_:1}),e(b,{caption:"",class:"word-break"},{default:a(()=>[f(_(c.descricaoST(t.row.id)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):q("",!0),e(S,null,{default:a(()=>[(t.row.dataVigenteInicial||"").trim()?(h(),w(p,{key:0},{default:a(()=>[e(b,null,{default:a(()=>[f("Vig\xEAncia Inicial")]),_:1}),e(b,{caption:""},{default:a(()=>[f(_(o.$filters.data(t.row.dataVigenteInicial)),1)]),_:2},1024)]),_:2},1024)):q("",!0),(t.row.dataVigenteFinal||"").trim()?(h(),w(p,{key:1},{default:a(()=>[e(b,null,{default:a(()=>[f("Vig\xEAncia Final")]),_:1}),e(b,{caption:""},{default:a(()=>[f(_(o.$filters.data(t.row.dataVigenteFinal)),1)]),_:2},1024)]),_:2},1024)):q("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","columns","pagination","loading"])]),_:1})]),_:1})])]),e(Z,{modelValue:s.modal.show,"onUpdate:modelValue":l[6]||(l[6]=t=>s.modal.show=t),maximized:"","content-css":{maxWidth:"80vw"},persistent:"",onKeyup:Y(c.voltar,["esc"])},{default:a(()=>[e(G,{container:"",class:"bg-light"},{default:a(()=>[e(H,{onSubmit:c.salvar},{default:a(()=>[e(K,null,{default:a(()=>[e(N,null,{default:a(()=>[e(V,{dense:"",flat:"",icon:"arrow_back",round:"",onClick:c.voltar},null,8,["onClick"]),e(I,null,{default:a(()=>[f(_(s.modal.titulo),1)]),_:1}),e(V,{class:"bg-white text-primary",label:"Salvar",unelevated:"",type:"submit"})]),_:1})]),_:1}),e(W,null,{default:a(()=>[e(X,{class:"u-container q-pt-md"},{default:a(()=>[i("div",We,[e(m,{class:"items-center"},{default:a(()=>[i("div",Xe,[e(x,{modelValue:s.modal.ncm.ncm,"onUpdate:modelValue":l[1]||(l[1]=t=>s.modal.ncm.ncm=t),mask:"########",maxlength:"8",label:"NCM",rules:s.validations.ncm},null,8,["modelValue","rules"]),e(x,{modelValue:s.modal.ncm.descricao,"onUpdate:modelValue":l[2]||(l[2]=t=>s.modal.ncm.descricao=t),maxlength:"500",label:"Descri\xE7\xE3o",rules:s.validations.required},null,8,["modelValue","rules"]),e(x,{modelValue:s.modal.ncm.cest,"onUpdate:modelValue":l[3]||(l[3]=t=>s.modal.ncm.cest=t),maxlength:"135",label:"CEST"},null,8,["modelValue"]),e(u,{modelValue:s.modal.ncm.dataVigenteInicial,"onUpdate:modelValue":l[4]||(l[4]=t=>s.modal.ncm.dataVigenteInicial=t),tipo:"data",rotulo:"Vig\xEAncia Inicial"},null,8,["modelValue"]),e(u,{modelValue:s.modal.ncm.dataVigenteFinal,"onUpdate:modelValue":l[5]||(l[5]=t=>s.modal.ncm.dataVigenteFinal=t),tipo:"data",rotulo:"Vig\xEAncia Final"},null,8,["modelValue"])])]),_:1})]),i("div",Ye,[e(m,{class:"items-center"},{default:a(()=>[i("div",Ze,[e(A,{class:"no-shadow rounded-borders"},{default:a(()=>[e(N,{class:"q-pa-none"},{default:a(()=>[e(I,{class:"text-tertiary"},{default:a(()=>[f("Substitui\xE7\xE3o Tribut\xE1ria por UF")]),_:1})]),_:1}),i("div",null,[i("div",el,[e(ne,{push:""},{default:a(()=>[e(V,{push:"",label:"Desmarcar todos",icon:"remove_done",onClick:c.desmarcarTodos},null,8,["onClick"]),e(V,{push:"",label:"Inverter sele\xE7\xE3o",icon:"rule",onClick:c.inverterSelecao},null,8,["onClick"])]),_:1})]),e(F,{bordered:""},{default:a(()=>[(h(!0),C(T,null,O(s.ufsNcm,t=>(h(),w(S,{key:t.uf},{default:a(()=>[e(p,null,{default:a(()=>[e(b,null,{default:a(()=>[f(_(c.descricaoUF(t.uf)),1)]),_:2},1024)]),_:2},1024),e(p,{side:""},{default:a(()=>[e(L,{color:"blue",modelValue:t.st,"onUpdate:modelValue":r=>t.st=r,val:"1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})])]),_:1})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","onKeyup"])],64)}var al=B(Je,[["render",ll],["__scopeId","data-v-8f10a9c0"]]);const tl={components:{Operacoes:Ee,NCM:al}};function ol(o,l,n,d,s,c){const u=k("Operacoes"),m=k("NCM");return h(),C(T,null,[e(u),e(m)],64)}var dl=B(tl,[["render",ol]]);export{dl as default};
