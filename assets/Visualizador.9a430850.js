import{a7 as n,eo as c,aM as p,c4 as l,en as m,c7 as d,cd as h,bD as u,bA as f,bC as g,aF as y,cw as b,bl as E,cE as $,bQ as q,cv as C,cO as v,bz as P,bM as x,aK as z}from"./index.353e304f.js";const D={BrowserQRCodeSvgWriter:l,XMLParser:m.XMLParser,JsBarcode:d,agrupar:h,arredondar:u,dataAtual:f,dormir:g,erp:y,fbarcode:b,gconsole:E,mostrarErro:$,somar:q,sql:C,unicos:v,uuid:P,verificarErro:x,_:z};var S={name:"Visualizador",data(){return{}},props:{componente:{type:Object}},render(){if(!this.componente||!this.componente.template)return n("div","Carregando...");const o=n("iframe",{onLoad:this.atualizar,style:{border:"0",display:"block",height:"100%",width:"100%"}});return this.$el&&this.atualizar(),o},emits:["mounted"],methods:{atualizar(o){let s,i,t;if(!this.componente)return;const e=this.$el||(o||{}).target;if(!(!e||!e.contentDocument||!e.contentDocument.body)){try{const r={...D,parametro:this.componente.parametro};s=new Function(...Object.keys(r),`return ${this.componente.script.trim()}`)(...Object.values(r))}catch(r){t=[$q.notifyError("Erro ao mostrar relat\xF3rio (script)",r),String(r)]}try{this.app}catch(r){console.error("Erro ao limpar relat\xF3rio (app.unmount)",r)}try{if(!t){const r=e.contentDocument.body;for(;r.firstChild;)r.removeChild(r.firstChild);i=document.createElement("div"),r.appendChild(i);const a=document.createElement("style");a.innerHTML=this.componente.estilo.trim(),r.appendChild(a)}}catch(r){t=[$q.notifyError("Erro ao mostrar relat\xF3rio (style)",r),String(r)]}try{if(!t){const r=this.componente.template.trim();this.app=c({name:"quadroVue",render(){return n(p({name:"RelatorioDinamico",template:r,...s}))}}),this.app.config.globalProperties.$filters=this.$filters,this.app.config.globalProperties.$get=this.$get,this.app.config.globalProperties.$lodash=this.$lodash,this.app.config.globalProperties.$q=this.$q}}catch(r){t=[$q.notifyError("Erro ao mostrar relat\xF3rio (createApp)",r),String(r)]}try{t||(this.app.mount(i),this.$nextTick().then(()=>{this.$emit("mounted")}))}catch(r){t=[$q.notifyError("Erro ao mostrar relat\xF3rio (app.mount)",r),String(r)]}try{if(t){const r=e.contentDocument.body;r.innerHTML=t.map(a=>"<p>"+a+"</p>").join("")}}catch(r){$q.notifyError("Erro ao mostrar relat\xF3rio (mostrar erros)",r)}}}},unmounted(){try{this.app&&this.app.unmount()}catch(o){console.error("Erro ao limpar relat\xF3rio (app.unmount)",o)}}};export{S as V};
