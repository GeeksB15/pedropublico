import{_ as Q,bE as uo,bI as K,bJ as Z,r as T,o as f,d as C,w as s,f as t,y as I,N as W,h as R,G as j,Q as b,M,i as L,k as w,D as J,B as d,e as y,n as v,F as q,s as P,t as k,C as X,O as mo,R as B,S as F,T as A,q as G,bD as po,j as V,dv as oo,dl as Y,X as fo,Y as ho,dw as bo,dx as go,dy as Co,c0 as vo,a$ as $,as as Vo,m as D,aq as E,x as H,U as O,b1 as To,b2 as x,bc as yo,bd as N,l as wo,ar as S,p as _o,at as ko,bf as So,J as qo}from"./index.f2a220da.js";import{I as Eo}from"./Icone.9245dff5.js";import{S as Uo,a as Ao}from"./SeletorPais.407129f0.js";import{o as Po}from"./open-url.108a4da6.js";const Do={computed:{metaDados(){return uo}},data(){return{contatoTmp:{},enderecoTmp:{},selecionarCertificado:!1,certificadoPadrao:"07660198000189 35 SP;",certificado:"",opcoesCertificados:[],cnpj:"",uf:"",erros:[],show:!1}},methods:{async consultarCadastroBrasilAPI(){const a=`https://brasilapi.com.br/api/cnpj/v1/${this.cnpj}`,o=await fetch(a),n=await o.json();if(!o.ok)throw new Error("N\xE3o foi poss\xEDvel realizar a consulta no Brasil API");let c=n.data_inicio_atividade;c&&(c=new Date(c),c=new Date(c.setDate(c.getDate()+1)),c=c.toJSON()),this.limpar(),this.contatoTmp.nome=n.razao_social,this.contatoTmp.apelido=n.nome_fantasia,this.contatoTmp.numeroDocumentoEstadual="",this.contatoTmp.regime=n.opcao_pelo_simples?"SIMPLES NACIONAL":"NORMAL",this.contatoTmp.dataAbertura=c,this.contatoTmp.situacao=n.descricao_situacao_cadastral,this.enderecoTmp.cep=n.cep||"",this.enderecoTmp.numero=n.numero||"",this.enderecoTmp.complemento=n.complemento||"",this.enderecoTmp.pais="Brasil",this.enderecoTmp.codigoPais=1058;try{const r=(await $utils.buscarEndereco(this.enderecoTmp.cep)).data;if(this.enderecoTmp.bairro=r.bairro,this.enderecoTmp.ibgeCod=r.ibge,this.enderecoTmp.logradouro=r.logradouro,this.enderecoTmp.municipio=r.localidade,this.enderecoTmp.uf=r.uf,this.enderecoTmp.ufCod=$utils.mapearEstadoCodigo[r.uf],this.enderecoTmp.complemento||(this.enderecoTmp.complemento=r.complemento),r.ibge){const u=await $db.cidade.le({cidadeCodIbge:r.ibge.toString(),ativo:!0});this.enderecoTmp.cidadeCodChave=(u.find(i=>i.cod)||{}).cod}}catch{this.enderecoTmp.uf=n.uf||"",this.enderecoTmp.municipio=n.municipio||"",this.enderecoTmp.logradouro=((n.descricao_tipo_logradouro||"")+" "+(n.logradouro||"")).trim(),this.enderecoTmp.bairro=n.bairro}this.show=!0},async consultarCadastroSefaz(){let a="";this.opcoesCertificados=[];const n=(await $erp().empresa.toArray()).filter(i=>i.idContato).map(i=>i.idContato),c=await $erp().contato.where("id").anyOf(n).toArray(),e=await $erp().contatoEndereco.where("idContato").anyOf(n).toArray();for(const i of c){const g=e.filter(U=>U.idContato===i.id);let p=g.find(U=>U.grupo==="Principal");p||(p=g[0]);const _=this.$utils.filtrarDigitos(i.numeroDocumentoNacional),z=String(this.$utils.mapearEstadoCodigo[p.uf]);if(_.length===14&&z.length===2&&p.uf.length===2){const U=_+" "+z+" "+p.uf+";";a+=U,this.opcoesCertificados.push({valor:U,rotulo:i.apelido,sublabel:i.numeroDocumentoNacional})}}this.opcoesCertificados.push({valor:this.certificadoPadrao,rotulo:""}),a+=this.certificadoPadrao;const r=K.consultarCadastroContribuinte(this.cnpj,""),u=await Z.consultarCadastroContribuinte(a,r,this.cnpj);if(u.status==="Erro")throw u.mensagem&&(this.erros=u.mensagem.split(`
`)),new Error("N\xE3o foi poss\xEDvel realizar a consulta no Sefaz");await this.preencherTemplateDadosSefaz(u.xml)},async consultarCadastroSefazCertificado(){try{$q.loading.show({message:"Consultando cadastro de CNPJ"});const a=K.consultarCadastroContribuinte(this.cnpj,this.uf),o=await Z.consultarCadastroContribuinte(this.certificado,a,this.cnpj);if(o.status==="Erro"){o.mensagem&&(this.erros=o.mensagem.split(`
`));return}await this.preencherTemplateDadosSefaz(o.xml),$q.notifyPositive("Consulta realizada pelo Certificado Digital")}finally{$q.loading.hide()}},async consultar(a){try{if($q.loading.show({message:"Consultando cadastro de CNPJ"}),this.cnpj=a.replace(/[^\d]/g,""),!$utils.validarDocumentoNacional(this.cnpj)){let o=function(n,c,e,r,u,i){return i?c+"."+e+"."+r+"/"+u+"-"+i:u?c+"."+e+"."+r+"/"+u:r?c+"."+e+"."+r:e?c+"."+e:c};throw this.cnpj=this.cnpj.replace(/(\d{0,2})(\d{0,3})(\d{0,3})(\d{0,4})(\d{0,2})$/,o),new Error(`CNPJ ${this.cnpj} inv\xE1lido`)}try{await this.consultarCadastroSefaz(),$q.notifyPositive("Consulta realizada pelo cadastro na SEFAZ");return}catch(o){console.log(o.message)}try{await this.consultarCadastroBrasilAPI(),$q.notifyPositive("Consulta realizada pela Brasil API");return}catch(o){console.log(o.message)}this.certificado=this.certificadoPadrao,this.uf=(this.opcoesCertificados[0].valor||"").substr(18,2),this.selecionarCertificado=!0,this.show=!0}catch(o){throw new Error(o)}finally{$q.loading.hide()}},limpar(){this.contatoTmp={},this.enderecoTmp=[],this.selecionarCertificado=!1},async preencherTemplateDadosSefaz(a){const c=new DOMParser().parseFromString(a,"application/xml").getElementsByTagName("infCons")[0].getElementsByTagName("infCad")[0],e=c.getElementsByTagName("ender")[0],r=(u,i)=>(u.getElementsByTagName(i)[0]||{}).innerHTML||"";this.limpar(),this.contatoTmp.apelido=r(c,"xFant")||r(c,"xNome"),this.contatoTmp.nome=r(c,"xNome"),this.contatoTmp.numeroDocumentoEstadual=r(c,"IE"),this.contatoTmp.regime=r(c,"xRegApur"),this.contatoTmp.dataAbertura=r(c,"dIniAtiv"),this.contatoTmp.situacao=r(c,"cSit")>0?"ATIVA":"BAIXADA",this.enderecoTmp.bairro=r(e,"xBairro"),this.enderecoTmp.cep=r(e,"CEP").padStart(8,"0").replace(/(\d{5})(\d{3})/g,"$1-$2"),this.enderecoTmp.complemento=r(e,"xCpl"),this.enderecoTmp.ibgeCod=r(e,"cMun"),this.enderecoTmp.logradouro=r(e,"xLgr"),this.enderecoTmp.municipio=r(e,"xMun"),this.enderecoTmp.numero=r(e,"nro"),this.enderecoTmp.uf=r(c,"UF"),this.enderecoTmp.pais="Brasil",this.enderecoTmp.codigoPais=1058;try{const i=(await $utils.buscarEndereco(this.enderecoTmp.cep)).data;if(this.enderecoTmp.bairro=i.bairro,this.enderecoTmp.ibgeCod=i.ibge,this.enderecoTmp.logradouro=i.logradouro,this.enderecoTmp.municipio=i.localidade,this.enderecoTmp.uf=i.uf,this.enderecoTmp.ufCod=$utils.mapearEstadoCodigo[i.uf],this.enderecoTmp.complemento||(this.enderecoTmp.complemento=i.complemento),i.ibge){const g=await $db.cidade.le({cidadeCodIbge:i.ibge.toString(),ativo:!0});this.enderecoTmp.cidadeCodChave=(g.find(p=>p.cod)||{}).cod}}catch(u){console.error(u)}this.show=!0},salvar(){var n;this.contato.apelido=this.contatoTmp.apelido||this.contatoTmp.nome,this.contato.nome=this.contatoTmp.nome,this.contato.numeroDocumentoEstadual=this.contatoTmp.numeroDocumentoEstadual,this.contato.dataAbertura=this.contatoTmp.dataAbertura,this.contato.observacao=`${this.contatoTmp.situacao} | `+((n=this.contato.observacao)!=null?n:""),this.contato.regime=this.contatoTmp.regime.includes("SIMPLES NACIONAL")?"SimplesNacional":"Normal";const a=this.endereco.find(c=>c.bairro===this.enderecoTmp.bairro&&c.cep===this.enderecoTmp.cep&&c.complemento===this.enderecoTmp.complemento&&c.ibgeCod===this.enderecoTmp.ibgeCod&&c.logradouro===this.enderecoTmp.logradouro&&c.municipio===this.enderecoTmp.municipio&&c.numero===this.enderecoTmp.numero&&c.uf===this.enderecoTmp.uf),o=this.endereco.find(c=>c.grupo==="Principal");a||this.endereco.push({...this.enderecoTmp,grupo:o?void 0:"Principal",id:$utils.uuid(),idContato:this.contato.id}),this.show=!1}},props:{contato:Object,endereco:Array}},xo={class:"q-px-lg q-py-md"},No={class:"row q-col-gutter-x-sm"},Fo={class:"row q-col-gutter-x-sm"},Oo={class:"row q-col-gutter-x-sm q-ml-xs"},Ro={class:"row justify-end"},Lo={class:"q-px-lg q-py-md"},Io={class:"row justify-end"};function jo(a,o,n,c,e,r){const u=T("campo");return f(),C(X,{modelValue:e.show,"onUpdate:modelValue":o[16]||(o[16]=i=>e.show=i),"content-css":{maxWidth:"800px"}},{default:s(()=>[t(I,null,{default:s(()=>[t(W,null,{default:s(()=>[t(R,null,{default:s(()=>[j(t(b,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[M]]),t(L,null,{default:s(()=>o[17]||(o[17]=[w("Cadastro CNPJ")])),_:1})]),_:1}),e.selecionarCertificado?y("",!0):(f(),C(J,{key:0,onSubmit:r.salvar},{default:s(()=>[d("div",xo,[t(u,{modelValue:e.contatoTmp.nome,"onUpdate:modelValue":o[0]||(o[0]=i=>e.contatoTmp.nome=i),"somente-leitura":"",class:"row",rotulo:"Raz\xE3o social"},null,8,["modelValue"]),t(u,{modelValue:e.contatoTmp.apelido,"onUpdate:modelValue":o[1]||(o[1]=i=>e.contatoTmp.apelido=i),"somente-leitura":"",class:"row",rotulo:"Fantasia"},null,8,["modelValue"]),d("div",No,[t(u,{modelValue:e.contatoTmp.numeroDocumentoEstadual,"onUpdate:modelValue":o[2]||(o[2]=i=>e.contatoTmp.numeroDocumentoEstadual=i),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"IE"},null,8,["modelValue"]),t(u,{modelValue:e.contatoTmp.dataAbertura,"onUpdate:modelValue":o[3]||(o[3]=i=>e.contatoTmp.dataAbertura=i),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Data de abertura",tipo:"data"},null,8,["modelValue"])]),d("div",Fo,[t(u,{modelValue:e.contatoTmp.regime,"onUpdate:modelValue":o[4]||(o[4]=i=>e.contatoTmp.regime=i),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Regime"},null,8,["modelValue"]),t(u,{modelValue:e.contatoTmp.situacao,"onUpdate:modelValue":o[5]||(o[5]=i=>e.contatoTmp.situacao=i),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Situa\xE7\xE3o"},null,8,["modelValue"])]),o[18]||(o[18]=d("div",{class:"row q-mt-lg q-mb-sm q-ml-sm text-subtitle1"},"Endere\xE7o",-1)),d("div",Oo,[t(u,{modelValue:e.enderecoTmp.cep,"onUpdate:modelValue":o[6]||(o[6]=i=>e.enderecoTmp.cep=i),"somente-leitura":"",class:"col-6 col-sm-4",rotulo:"CEP",mask:"#####-###"},null,8,["modelValue"]),t(u,{modelValue:e.enderecoTmp.uf,"onUpdate:modelValue":o[7]||(o[7]=i=>e.enderecoTmp.uf=i),"somente-leitura":"",class:"col-2 col-sm-2",rotulo:"UF"},null,8,["modelValue"]),t(u,{modelValue:e.enderecoTmp.municipio,"onUpdate:modelValue":o[8]||(o[8]=i=>e.enderecoTmp.municipio=i),"somente-leitura":"",class:"col-10 col-sm-6",rotulo:"Cidade",ajuda:e.enderecoTmp.ibgeCod?"C\xF3digo IBGE: "+e.enderecoTmp.ibgeCod:""},null,8,["modelValue","ajuda"]),t(u,{modelValue:e.enderecoTmp.logradouro,"onUpdate:modelValue":o[9]||(o[9]=i=>e.enderecoTmp.logradouro=i),"somente-leitura":"",class:"col-12 col-sm-7",rotulo:"Endere\xE7o"},null,8,["modelValue"]),t(u,{modelValue:e.enderecoTmp.numero,"onUpdate:modelValue":o[10]||(o[10]=i=>e.enderecoTmp.numero=i),"somente-leitura":"",class:"col-12 col-sm-2",rotulo:"N\xFAmero"},null,8,["modelValue"]),t(u,{modelValue:e.enderecoTmp.complemento,"onUpdate:modelValue":o[11]||(o[11]=i=>e.enderecoTmp.complemento=i),"somente-leitura":"",class:"col-12 col-sm-3",rotulo:"Complemento"},null,8,["modelValue"]),t(u,{modelValue:e.enderecoTmp.bairro,"onUpdate:modelValue":o[12]||(o[12]=i=>e.enderecoTmp.bairro=i),"somente-leitura":"",class:"col-12 col-sm-6",rotulo:"Bairro"},null,8,["modelValue"]),t(u,{modelValue:e.enderecoTmp.pais,"onUpdate:modelValue":o[13]||(o[13]=i=>e.enderecoTmp.pais=i),"somente-leitura":"",class:"col-12 col-sm-6",rotulo:"Pa\xEDs"},null,8,["modelValue"])])]),t(R,{color:"light"},{default:s(()=>[t(L,null,{default:s(()=>[d("div",Ro,[j(t(b,{flat:"",color:"tertiary",label:"Cancelar"},null,512),[[M]]),t(b,{unelevated:"",color:"primary",type:"submit",label:"Confirmar"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])),e.selecionarCertificado?(f(),C(J,{key:1,onSubmit:r.consultarCadastroSefazCertificado},{default:s(()=>[d("div",Lo,[(f(!0),v(q,null,P(e.erros,(i,g)=>(f(),v("div",{class:"row q-py-xs text-negative",key:g},k(i),1))),128)),t(u,{modelValue:e.certificado,"onUpdate:modelValue":o[14]||(o[14]=i=>e.certificado=i),class:"row q-mt-md",rotulo:"Certificado",tipo:"seletor",opcoes:e.opcoesCertificados},null,8,["modelValue","opcoes"]),t(u,{modelValue:e.uf,"onUpdate:modelValue":o[15]||(o[15]=i=>e.uf=i),class:"row",rotulo:"UF do Sefaz para consulta",tipo:"seletor",opcoes:r.metaDados.infNFe.emit.enderEmit.UF._enumeration},null,8,["modelValue","opcoes"])]),t(R,{color:"light"},{default:s(()=>[t(L,null,{default:s(()=>[d("div",Io,[t(b,{flat:"",color:"primary",type:"submit",label:"Nova consulta"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])):y("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}var zo=Q(Do,[["render",jo]]);const Bo={computed:{registrosEncontrados(){return!!this.itens.length}},data(){return{itens:[],redeSocialCampo:"",visivel:!1,idContato:""}},methods:{adicionar(){this.redeSocialErro=!1,this.redeSocialErroDescricao="";const a=this.redeSocialCampo.toLowerCase();if(!a)return!1;if(this.itens.find(o=>o.link===a))return this.redeSocialErro=!0,this.redeSocialErroDescricao="Rede social j\xE1 cadastrada.",!1;try{this.itens.push({...$utils.analisarRedeSocialLink(a),id:$utils.uuid(),idContato:this.idContato}),this.redeSocialCampo=""}catch{this.redeSocialErro=!0,this.redeSocialErroDescricao="Insira uma URL v\xE1lida."}},remover(a){this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar voc\xEA ir\xE1 remover esta rede social.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{a>=0&&(this.termo=this.itens[a].link,this.itens.splice(a,1))})},onHide(){this.resolve(this.itens)},onShow(){this.$refs.redeSocialCampo.focus()},async show(a){return this.itens=a.itens,this.idContato=a.idContato,this.visivel=!0,new Promise((o,n)=>{this.resolve=o})}}};function Mo(a,o,n,c,e,r){return f(),C(X,{modelValue:e.visivel,"onUpdate:modelValue":o[1]||(o[1]=u=>e.visivel=u),onHide:o[2]||(o[2]=u=>r.onHide()),onShow:o[3]||(o[3]=u=>r.onShow()),"content-css":"{ minWidth: '80vw' }"},{default:s(()=>[t(I,null,{default:s(()=>[t(R,{class:"bg-primary text-white"},{default:s(()=>[t(L,null,{default:s(()=>o[4]||(o[4]=[w("Redes Sociais")])),_:1}),j(t(b,{dense:"",flat:"",icon:"close",round:""},null,512),[[M]])]),_:1}),t(W,null,{default:s(()=>[t(mo,{"no-border":"",separator:""},{default:s(()=>[(f(!0),v(q,null,P(e.itens,(u,i)=>(f(),C(B,{class:"animate-pop q-px-none",key:i},{default:s(()=>[t(F,null,{default:s(()=>[w(k(u.tipo),1),t(A,null,{default:s(()=>[w(k(u.link),1)]),_:2},1024)]),_:2},1024),t(A,null,{default:s(()=>[t(b,{color:"negative",size:"xs",icon:"remove",outline:"",round:"",onClick:g=>r.remover(i)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(G,{color:"green",placeholder:"Insira a URL aqui.",type:"url",modelValue:e.redeSocialCampo,"onUpdate:modelValue":o[0]||(o[0]=u=>e.redeSocialCampo=u),ref:"redeSocialCampo",onKeyup:po(r.adicionar,["enter"])},{append:s(()=>[t(V,{name:"done",onClick:r.adicionar,class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Qo=Q(Bo,[["render",Mo]]);const Ho={data(){return{visivel:!1}},methods:{trocarFoto(a){oo(a[0],{crop:!0,outputFormat:"jpg",targetHeight:200,targetWidth:200},(o,n)=>{this.resolve(n),this.visivel=!1})},onHide(){this.resolve()},async show(){return this.visivel=!0,new Promise((a,o)=>{this.resolve=a})}},props:{modelValue:{type:String}}};function Jo(a,o,n,c,e,r){return f(),C(X,{modelValue:e.visivel,"onUpdate:modelValue":o[0]||(o[0]=u=>e.visivel=u),onHide:o[1]||(o[1]=u=>r.onHide())},{default:s(()=>[t(I,null,{default:s(()=>[t(R,null,{default:s(()=>[t(L,null,{default:s(()=>o[2]||(o[2]=[w("Alterar foto")])),_:1}),j(t(b,{dense:"",flat:"",icon:"close",round:""},null,512),[[M]])]),_:1}),t(Y,{"auto-expand":"",color:"none",class:"mobile-only",label:"Foto","hide-upload-button":"","hide-upload-progress":"","dark-light":"",url:"",ref:"fotoCampo",factory:r.trocarFoto},null,8,["factory"]),t(Y,{"auto-expand":"",color:"none",class:"mobile-hide",extensions:".jpg,.jpeg",label:"Foto","hide-upload-button":"","hide-upload-progress":"","dark-light":"",url:"",ref:"fotoCampo",factory:r.trocarFoto},null,8,["factory"])]),_:1})]),_:1},8,["modelValue"])}var Go=Q(Ho,[["render",Jo]]);const Wo={components:{Avatar:fo,Badge:ho,Icone:Eo,SeletorCampoTabela:bo,SeletorCidade:Uo,SeletorPais:Ao,ConsultaCNPJ:zo,ContatoCriar:go,RedesSociaisModal:Qo,PromptGrupoUnico:Co,modalTrocarFoto:Go,Arquivo:vo},computed:{badgeCor(){return this.contato.ativo?this.contato.condutaRestricao?"negative":this.contato.condutaObservacao?"orange":"positive":"tertiary"},ehEmpresa(){const a=this.contato.numeroDocumentoNacional;return a?a.length>14:!1},idade(){let a=this.contato.dataAbertura;if(!a)return 0;a=new Date(a);const o=new Date(Date.now()-a.getTime());return Math.abs(o.getUTCFullYear()-1970)},segmentoProfissao(){const a=this.contato.numeroDocumentoNacional||"";return a.length>14?"Segmento":a.length>=11?"Profiss\xE3o":"Segmento/Profiss\xE3o"},temRedeSocial(){return this.redeSocial&&!!this.redeSocial.length}},data(){return{contato:{},contatoOriginal:{},endereco:[],enderecoEstrangeiro:{},telefone:[],redeSocial:[],consulta:[],grupo:[],filhos:[],filhosId:{},arquivo:[],tab:"profile-tab-1",consultaDescricao:"",descricaoAssistente:"",descricaoFormaPagamento:"",descricaoItemTabelaPreco:"",descricaoTransportadora:"",descricaoEmpresaCarteira:"",descricaoContatoLider:"",descricaoVendedor:"",filhoCampo:"",contatoUsuario:{},somenteCarteira:!1,podeAlterarVendedorAssistente:!1,opcoesDependentes:[],opcoesTabelaPreco:[],enderecoTipos:[{label:"Principal",value:"Principal",icon:"star",color:"orange"},{label:"Cobran\xE7a",value:"Cobran\xE7a",icon:"attach_money"},{label:"Comercial",value:"Comercial",icon:"business"},{label:"Correspond\xEAncia",value:"Correspond\xEAncia",icon:"mail"},{label:"Entrega",value:"Entrega",icon:"local_shipping"},{label:"Instala\xE7\xE3o",value:"Instala\xE7\xE3o",icon:"build"},{label:"Residencial",value:"Residencial",icon:"store_mall_directory"},{label:"Outros",value:"Outros",icon:"location_city"}],regimes:[{label:"Normal",value:"Normal"},{label:"Simples Nacional",value:"SimplesNacional"},{label:"Simples Nacional - MEI",value:"MEI"}],sexos:[{label:"Masculino",value:"Masculino"},{label:"Feminino",value:"Feminino"},{label:"Outro",value:"Outro"}],telefoneTipos:[{label:"Principal",value:"Principal",color:"orange",icon:"star"},{label:"Comercial",value:"Comercial",color:"dark",icon:"phone"},{label:"Celular",value:"Celular",color:"dark",icon:"phone_iphone"},{label:"Fixo",value:"Fixo",color:"dark",icon:"phone"},{label:"WhatsApp",value:"WhatsApp",color:"positive",icon:"mdi-whatsapp",ix:"duo"}],permissoes:{},configuracoes:{},rules:{}}},methods:{async atualizar({id:a}){var o;$q.loading.show();try{if(a||(a=this.$route.params.id),this.somenteCarteira=!1,this.contatoUsuario={},!$db.usuario.logado.administrador&&await $db.permissao.objetoClienteSistema("Diretiva_Contatos_AcessaTodosContatos")&&!await $db.permissao.objeto("Diretiva_Contatos_AcessaTodosContatos")){let e=$db.usuario.logado.codigoContato;e&&(this.contatoUsuario=(await $erp().contato.where({codigoContato:e}).toArray()).find(r=>r.id)),this.somenteCarteira=!0}this.podeAlterarVendedorAssistente=!1,!$db.usuario.logado.administrador&&await $db.permissao.objetoClienteSistema("Diretiva_Contatos_AlterarVendedorEAssistente")&&!await $db.permissao.objeto("Diretiva_Contatos_AlterarVendedorEAssistente")&&(this.podeAlterarVendedorAssistente=!0);const n=await $db.contato.leCompletoV3(a);this.contato=n.contato;for(let e=0;e<n.endereco.length;e++)this.enderecoEstrangeiro[e]=!1,((o=n.endereco[e].uf)!=null?o:"").toUpperCase()==="EX"&&(this.enderecoEstrangeiro[e]=!0);this.arquivoOriginal=await $db.arquivo.lista({tipoArquivo:"contatoImagem",idTabelaMaster:this.contato.id}),this.arquivo=$utils.clonarV2(this.arquivoOriginal),this.endereco=n.endereco,this.telefone=n.telefone,this.redeSocial=n.redeSocial,this.filhos=n.filhos,this.consulta=n.consulta,this.grupo=n.grupo.map(e=>({...e,label:e.descricao})),this.contatoOriginal=$utils.clonarV2(n.contato),this.enderecoOriginal=$utils.clonarV2(n.endereco),this.telefoneOriginal=$utils.clonarV2(n.telefone),this.redeSocialOriginal=$utils.clonarV2(n.redeSocial),this.filhosOriginal=$utils.clonarV2(n.filhos),this.consultaOriginal=$utils.clonarV2(n.consulta),this.grupoOriginal=$utils.clonarV2(n.grupo),a===""&&(n.contato.id=$utils.uuid(),this.contatoOriginal={});const c=n.contato;this.descricaoAssistente=(await $erp().contato.get(c.idContatoAssistente||"")||{}).apelido||"",this.descricaoTransportadora=(await $erp().contato.get(c.idContatoTransportadora||"")||{}).apelido||"",this.descricaoEmpresaCarteira=(await $erp().contato.get(c.idEmpresaCarteira||"")||{}).apelido||"",this.descricaoContatoLider=(await $erp().contato.get(c.idContatoLider||"")||{}).apelido||"",this.descricaoVendedor=(await $erp().contato.get(c.idContatoVendedor||"")||{}).apelido||"",this.descricaoFormaPagamento=(await $erp().formaPagamento.get(c.idFormaPagamento||"")||{}).descricao||"",this.descricaoItemTabelaPreco=(await $erp().itemTabelaPreco.get(c.idItemTabelaPreco||"")||{}).descricao||"";for(const e of n.filhos)this.filhosId[e.idContatoRelacionado]=await $db.contato.le({id:e.idContatoRelacionado});this.atualizarTabelaPreco()}catch(n){this.$q.notifyError("Ocorreu um erro ao obter contato.",n)}finally{$q.loading.hide()}},async restaurarContato(){try{$q.loading.show(),this.contato.ativo=!0,await this.salvarContato(),this.$q.notifyPositive("O contato foi restaurado com sucesso.")}catch{$q.notify("Ocorreu um erro ao restaurar.")}finally{$q.loading.hide()}},validateEmail(a){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())},async salvarContato(){var n,c;const a=await $db.hibrido.lista({table:"configuracoes",columns:["valor"],where:{nome:"venda.codigoconsumidor"}});if(Number((c=(n=a==null?void 0:a[0])==null?void 0:n.valor)!=null?c:0)===$db.contato.selecionado.codigoContato){$q.notifyError("N\xE3o \xE9 poss\xEDvel editar/remover a ficha Consumidor!");return}if(!this.verificarSeAlterouCampos())return this.$q.notifyPositive("N\xE3o h\xE1 dados alterados.");try{this.$q.loading.show();const e=this.contato.id,r=$utils.clonarV2(this.grupo).map(i=>(i.descricao=i.label,i.idContato=e,delete i.label,i)),u={dadosOriginais:{contato:this.contatoOriginal,endereco:this.enderecoOriginal,telefone:this.telefoneOriginal,redeSocial:this.redeSocialOriginal,filhos:this.filhosOriginal,consulta:this.consultaOriginal,grupo:this.grupoOriginal},contato:this.contato,endereco:this.endereco,telefone:this.telefone,redeSocial:this.redeSocial,filhos:this.filhos,consulta:this.consulta,grupo:r};await $db.contato.grava(u),await $db.arquivo.remove(this.arquivoOriginal.filter(i=>!this.arquivo.find(g=>g.id===i.id)));for(const i of this.arquivo){let g={};Object.keys(this.arquivoOriginal).length?g={original:this.arquivoOriginal.find(p=>p.id===i.id)||[{}],atual:i}:g={atual:i},(i==null?void 0:i.name)&&(i==null?void 0:i.editado)&&await $db.arquivo.edita(g),i!=null&&i.name||await $db.arquivo.grava(g)}await this.atualizar({id:e}),$db.contato.selecionado=await $db.contato.le({id:e}),$utils.emitter.emit("carregarContatoAtendimentoLayout"),$q.notifyPositive("Os dados do contato foram salvos com sucesso.")}catch(e){$q.notifyError("Ocorreu um erro ao salvar.",e)}finally{$q.loading.hide()}},async contatoRemover(){var c,e;let a=!1;const o=await $db.hibrido.lista({table:"configuracoes",columns:["valor"],where:{nome:"venda.codigoconsumidor"}});if(Number((e=(c=o==null?void 0:o[0])==null?void 0:c.valor)!=null?e:0)===$db.contato.selecionado.codigoContato&&(a=!0,$q.notifyError("N\xE3o \xE9 poss\xEDvel editar/remover a ficha Consumidor!")),this.$refs.form.getValidationComponents().forEach(r=>{!r.validate()&&!a&&(a=!0)}),!a){try{if($q.loading.show(),await $db.financeiroTitulo.verificaTituloAbertoContato(this.contato.id)&&!await $db.permissao.objeto("Diretiva_Contato_InativarContatoTituloEmAberto")){$q.notifyError("N\xE3o \xE9 poss\xEDvel remover contato com t\xEDtulos em aberto. Usu\xE1rio sem permiss\xE3o!");return}}catch(r){$q.notifyError("Ocorreu um erro ao remover",r)}finally{$q.loading.hide()}await this.removerConfirma();try{$q.loading.show();const r=$utils.clonar(this.contato),u=r.id;r.ativo=!1;const i={dadosOriginais:{contato:this.contatoOriginal},contato:r};await $db.contato.grava(i),await this.atualizar({id:u}),$db.contato.selecionado=await $db.contato.le({id:u}),$utils.emitter.emit("carregarContatoAtendimentoLayout"),$q.notifyPositive("O contato foi exclu\xEDdo com sucesso.")}catch(r){$q.notifyError("Ocorreu um erro ao remover",r)}finally{$q.loading.hide()}}},aoCancelar(){if(!this.verificarSeAlterouCampos()){this.$q.notifyPositive("N\xE3o h\xE1 dados alterados.");return}this.$q.dialog({cancel:{label:"Manter",push:!0,color:"tertiary",flat:!0},title:"Tem certeza?",message:"Ao continuar voc\xEA ir\xE1 perder todas as modifica\xE7\xF5es.",ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.atualizar({id:this.contato.id})})},async dependenteCriar(){const a=await this.$refs.promptCriarDependente.mostrar();$lodash.get(a,"nome")&&this.filhoAdicionar({data:a})},async filhosBuscar(a,o){try{if(a=a.trim(),this.opcoesDependentes=[],a.length>1){const n=(await $db.contato.ler({filtros:{termoBusca:a,ativo:!0}})).data;this.opcoesDependentes=n.map(c=>({data:c,label:`${c.apelido} | ${c.nome}`,stamp:"#0000000",sublabel:c.nome,value:c.nome}))}o()}catch{o(),this.$q.notify("Ocorreu um erro ao obter os contatos.")}},async filhoRemover(a){await this.removerConfirma();const o=this.filhos.filter(n=>!(n.idContato===a.idContato&&n.idContatoRelacionado===a.idContatoRelacionado||n.idContato===a.idContatoRelacionado&&n.idContatoRelacionado===a.idContato));this.filhos=o},async filhoAdicionar(a){const o=a.data;this.filhoCampo="",this.filhosId[o.id]=await $db.contato.le({id:o.id}),this.filhos.push({id:$utils.uuid(),idContato:this.contato.id,idContatoRelacionado:o.id,socio:!1,cobranca:!1}),this.filhos.push({id:$utils.uuid(),idContato:o.id,idContatoRelacionado:this.contato.id,socio:!1,cobranca:!1}),this.filhos=$.exports.orderBy(this.filhos,"apelido")},async btSelecionarVendedor_click(){var c,e;const a=$utils.clonarV2(this.contato),o=this.descricaoVendedor,n=await $g.promptContato.show({filtro:{ativo:!0,vendedores:!0},placeholder:"Selecione o vendedor"});n!=null&&n.id&&(this.contato.idContatoVendedor=n.id,this.descricaoVendedor=n.apelido||""),(a==null?void 0:a.idContatoVendedor)&&((c=this.contato)==null?void 0:c.idContatoVendedor)&&(a==null?void 0:a.idContatoVendedor)!==((e=this.contato)==null?void 0:e.idContatoVendedor)&&$q.dialog({cancel:{label:"Apenas Este",push:!0,class:"bg-negative",textColor:"white",flat:!0},title:"Alterar Vendedor",message:`Deseja alterar o Vendedor em todos os Clientes de '${o}'' para '${this.descricaoVendedor}'?`,ok:{label:"Todos",push:!0,color:"tertiary",flat:!0}}).onOk(async()=>{try{$q.loading.show();const r=await $db.hibrido.lista({table:"contato",whereFilter:{idContatoVendedor:a==null?void 0:a.idContatoVendedor}}),u=$utils.clonarV2(r);u.map(i=>{var g;i.idContatoVendedor=(g=this.contato)==null?void 0:g.idContatoVendedor});for(let i=0;i<u.length;i++)try{await $db.contato.grava({dadosOriginais:{contato:r[i]},contato:u[i]})}catch(g){console.error(g)}}catch(r){console.log(r.message),$q.notifyError("Ocorreu um erro ao alterar Vendedor",r)}finally{$q.loading.hide()}})},vendedorLimpar(){this.contato.idContatoVendedor="",this.descricaoVendedor=""},async btSelecionarAssistente_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,vendedores:!0},placeholder:"Selecione a empresa"});$lodash.get(a,"id")&&(this.contato.idContatoAssistente=a.id,this.descricaoAssistente=a.apelido||"")},assistenteLimpar(){this.contato.idContatoAssistente="",this.descricaoAssistente=""},async btSelecionaFormaPagamento_click(){const a=await this.$root.$refs.promptFormaPagamento.show();!$lodash.get(a,"id")||(this.contato.idFormaPagamento=a.id,this.descricaoFormaPagamento=a.descricao||"")},formaPagamentoLimpar(){this.contato.idFormaPagamento="",this.descricaoFormaPagamento=""},async btSelecionarTransportadora_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,transportadoras:!0},placeholder:"Transportadora"});$lodash.get(a,"id")&&(this.contato.idContatoTransportadora=a.id,this.descricaoTransportadora=a.apelido||"")},transportadoraLimpar(){this.contato.idContatoTransportadora="",this.descricaoTransportadora=""},async btSelecionarEmpresaCarteira_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,empresas:!0},placeholder:"Empresa Carteira"});$lodash.get(a,"id")&&(this.contato.idEmpresaCarteira=a.id,this.descricaoEmpresaCarteira=a.apelido||"")},empresaCarteiraLimpar(){this.contato.idEmpresaCarteira="",this.descricaoEmpresaCarteira=""},async btSelecionarContatoLider_click(){const a=await $g.promptContato.show({filtro:{ativo:!0},placeholder:"Contato L\xEDder"});!a.id||(this.contato.idContatoLider=a.id,this.descricaoContatoLider=a.apelido||"")},contatoLiderLimpar(){this.contato.idContatoLider="",this.descricaoContatoLider=""},async btRedeSocialadicionar_click(){const a=await this.$refs.modalRedesSociais.show({idContato:this.contato.id,itens:this.redeSocial});this.redeSocial=a},consultaAdicionar(){try{if(!this.consultaDescricao){this.$q.notifyError("Informar a descri\xE7\xE3o da consulta de cadastro");return}const a=this.consultaDescricao+` (Cadastro realizado pelo usu\xE1rio: ${$db.usuario.logado.nome} - CPF: ${this.$filters.cpfCnpj($db.usuario.logado.numeroDocumentoNacional)})`;this.consulta.push({id:$utils.uuid(),idContato:this.contato.id,dataConsulta:$utils.dataAtual(),descricao:a}),this.consulta=$.exports.orderBy(this.consulta,"dataConsulta","desc"),this.consultaDescricao=""}catch(a){this.$q.notifyError("Ocorreu um erro ao adicionar",a)}},async fotoTrocar_click(){const a=await this.$refs.modalTrocarFoto.show();a&&(this.contato.imagem=a)},uploadClick(){this.$refs.Upload.click()},async abrirArquivo(a){const o=this.$refs.Upload.files;if(FileReader&&o&&o.length){var n=new FileReader;n.onload=()=>{oo(o[0],{crop:!0,outputFormat:"jpg",targetHeight:200,targetWidth:200},(c,e)=>{this.contato.imagem=e})},n.readAsDataURL(o[0])}},async grupoSelecionar_Click(){const a=await this.$refs.PromptGrupoUnico.show();!a.descricao||this.grupo.push({id:$utils.uuid(),label:a.descricao})},async atualizarTabelaPreco(a,o,n){const c=await $db.itemTabelaPreco.le({tabelaMaster:!0})||[];for(const e of c)e.empresa=(await $db.contato.le({id:e.idEmpresa})).nome;this.opcoesTabelaPreco=c,typeof o=="function"&&o()},telefoneAdicionar(){this.telefone.push({id:$utils.uuid(),idContato:this.contato.id})},async telefoneAbrir(a){if(!a.telefone)return;const o=a.tipoTelefone==="WhatsApp"?"https://api.whatsapp.com/send?phone=":"tel:+";this.abrirURL(o+await $utils.formatarTelefone(a))},async telefoneRemover(a){await this.removerConfirma(),a>=0&&this.telefone.splice(a,1)},enderecoAdicionar(){this.endereco.push({id:$utils.uuid(),idContato:this.contato.id}),this.enderecoEstrangeiro[this.endereco.length-1]=!1},async enderecoRemover(a){await this.removerConfirma(),a>=0&&this.endereco.splice(a,1)},enderecoIcone(a){const o=this.enderecoTipos.find(n=>n.label===a)||{};return{color:o.color||"dark",name:o.icon||"store_mall_directory",size:a==="Principal"?"18px":"24px"}},consultarCep(a){const o=this.endereco[a];if(!o.cep||this.enderecoEstrangeiro[a])return;const n=o.cep.replace(/[^0-9]/g,"");n.length<8||$utils.buscarEndereco(n).then(async({data:c})=>{if(o.bairro=c.bairro,o.complemento=c.complemento,o.ibgeCod=c.ibge,o.logradouro=c.logradouro,o.municipio=c.localidade,o.pais="Brasil",o.codigoPais=1058,o.uf=c.uf,o.ufCod=$utils.mapearEstadoCodigo[c.uf],c.ibge){const e=await $db.cidade.le({cidadeCodIbge:c.ibge.toString(),ativo:!0});o.cidadeCodChave=(e.find(r=>r.cod)||{}).cod}})},async selecionarCidade(a,o){const n=this.endereco[o];n.municipio=a.municipio||"",n.ibgeCod=a.ibgeCod||"",n.uf=a.uf||"",n.ufCod=a.ufCod||"",n.cidadeCodChave=a.cidadeCodChave||"",n.codigoPais=1058,n.pais="Brasil"},async selecionarPais(a,o){const n=this.endereco[o];n.pais=a.nome,n.codigoPais=a.codigo,this.enderecoEstrangeiro[o]=!1,a.codigo!==1058&&(this.enderecoEstrangeiro[o]=!0,this.setarEstrangeiro(o))},removerConfirma(){return new Promise((a,o)=>{this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar voc\xEA ir\xE1 remover este contato.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{a()})})},verificarSeAlterouCampos(){const a={contato:this.contatoOriginal,endereco:this.enderecoOriginal,telefone:this.telefoneOriginal,redeSocial:this.redeSocialOriginal,filhos:this.filhosOriginal,consulta:this.consultaOriginal,grupo:this.grupoOriginal};for(const e of this.arquivoOriginal)if(!this.arquivo.some(r=>r.id===e.id))return!0;for(const e of this.arquivo)if(!this.arquivoOriginal.some(u=>u.id===e.id)||this.arquivoOriginal.find(u=>u.id===e.id).nome!==e.nome)return!0;const o=$utils.clonarV2(this.grupo).map(e=>(e.descricao=e.label,e.idContato=this.contato.id,delete e.label,e)),n={contato:this.contato,endereco:this.endereco,telefone:this.telefone,redeSocial:this.redeSocial,filhos:this.filhos,consulta:this.consulta,grupo:o},c=$utils.diferenca(a,n);return $utils.gconsole.log("ContatoFicha","verificarSeAlterouCampos",c!==null,c),c!==null},abrirURL(a){Po(a)},async configRules(){await $db.contato.carregarMemoria(),this.rules={numeroDocumentoNacional:[()=>{const a=(this.contato.numeroDocumentoNacional||"").replace(/\D/g,"");if(!a.trim())return!0;if(!$utils.validarDocumentoNacional(a))return"Documento inv\xE1lido";for(const o of $db.contato.contatos){if(o.id===this.contato.id)continue;const n=(o.numeroDocumentoNacional||"").replace(/\D/g,"");if(!!n&&a===n)return"Documento j\xE1 existente"}return!0}]}},setarEstrangeiro(a){this.endereco[a].municipio="Exterior",this.endereco[a].ibgeCod="9999999",this.endereco[a].cep="99999-999",this.endereco[a].uf="EX"},abrirBuscaCep(){window.open("https://buscacepinter.correios.com.br/app/localidade_logradouro/index.php","_blank")}},watch:{"campos.nome"(a,o){this.campos.apelido===o&&(this.campos.apelido=a)},"$route.params.id"(){this.atualizar({id:this.$route.params.id})}},created(){this.configRules(),this.permissoes={editarLimiteCredito:!1,editarCondutaRestricao:!1},this.configuracoes={descontoCondicionado:!1},$db.configuracoes.le({nome:"usa.DescontoCondicionado"}).then(a=>{var o;this.configuracoes.descontoCondicionado=Number((o=a[0])==null?void 0:o.valor)||!1}),$db.permissao.objeto("Diretiva_Contatos_EditaLimiteCredito").then(a=>{this.permissoes.editarLimiteCredito=a}),$db.permissao.objeto("Diretiva_Contatos_EditaCondutaRestricao").then(a=>{this.permissoes.editarCondutaRestricao=a}),this.atualizar({id:this.id||""})},props:{id:{required:!1,default:null}}},Xo={class:"col-12 col-md-3 text-center"},Ko={class:"group q-mt-md"},Zo={class:"col-12 col-md-6"},Yo={key:0,class:"text-right"},$o={class:"col-12 col-sm-4"},oe={class:"col-12 col-sm-4"},ee={class:"col-12 col-sm-4"},te={class:"col-6 col-sm-4"},ae={class:"col-6 col-sm-4"},le={class:"col-10 col-sm-3"},re={class:"mlmobile34"},ie={class:"col-2 col-sm-1 text-right"},ne={class:"q-mt-md text-center"},se={class:"col-8"},ce={class:"col-4"},de={class:"col-5"},ue={class:"col-2"},me={class:"col-5"},pe={class:"col-12 col-sm-5"},fe={class:"col-3 col-sm-2"},he={class:"col-9 col-sm-5"},be={class:"col-5 col-sm-6"},ge={class:"col-5"},Ce={class:"col-2 col-sm-1 text-right"},ve={class:"q-my-md text-center"},Ve={class:"col-12 col-md-3"},Te={class:"col-12 col-sm-4"},ye={class:"col-12 col-sm-4"},we={class:"col-12 col-sm-4"},_e={class:"col-12 col-sm"},ke={key:0,class:"col-12 col-sm"},Se={class:"col-12 col-sm"},qe={class:"col-12 col-sm"},Ee={class:"col-12 col-sm-6"},Ue={class:"col-12 col-sm-6"},Ae={class:"col-12 q-mt-sm"},Pe={class:"q-mt-lg"},De={class:"col-auto"},xe={class:"col"},Ne={class:"q-mb-none"},Fe={class:"q-mb-none"},Oe={class:"q-mb-none"},Re={class:"hideondesktop"},Le={class:"hideondesktop"},Ie={class:"col-12 col-md hideonmobile"},je={class:"col-12 col-md-auto hideonmobile",style:{"justify-content":"flex-start !important"}},ze={class:"col-12 col-md-auto"},Be={class:"col"},Me={class:"col-auto text-right"},Qe={class:"col-12 col-sm-6"},He={class:"col-12 col-sm-6"},Je={class:"q-col-gutter-sm items-center row"},Ge={class:"col-12 col-sm-4"},We={class:"col-12 col-sm-4"},Xe={class:"q-pa-md"},Ke={class:"items-center justify-around q-my-lg row"},Ze={key:0},Ye={key:1},$e={class:"u-container relative-position"},ot={key:1,class:"q-py-sm"};function et(a,o,n,c,e,r){const u=T("avatar"),i=T("icone"),g=T("badge"),p=T("campo"),_=T("row"),z=T("SeletorCidade"),U=T("SeletorPais"),eo=T("SeletorCampoTabela"),to=T("gchips"),ao=T("arquivo"),lo=T("contato-criar"),ro=T("RedesSociaisModal"),io=T("modalTrocarFoto"),no=T("ConsultaCNPJ"),so=T("PromptGrupoUnico"),co=Vo("mask");return f(),v(q,null,[t(J,{ref:"form",onSubmit:r.salvarContato,class:"ContatoFicha q-mt-md"},{default:s(()=>[t(I,{class:"bg-white no-shadow q-px-md q-py-md"},{default:s(()=>[t(_,{class:"q-col-gutter-x-md justify-around"},{default:s(()=>[d("div",Xo,[t(u,{imagem:e.contato.imagem,rotulo:e.contato.apelido,tamanho:"160",onClick:r.uploadClick},null,8,["imagem","rotulo","onClick"]),d("input",{ref:"Upload",type:"file",id:"Upload",onChange:o[0]||(o[0]=(...l)=>r.abrirArquivo&&r.abrirArquivo(...l)),style:{visibility:"hidden"}},null,544),d("div",Ko,[(f(!0),v(q,null,P(e.redeSocial,(l,h)=>(f(),C(b,{color:l.tipo==="link"?"primary":l.tipo,key:h,round:"",size:"sm",onClick:m=>r.abrirURL(l.link),class:"q-mx-xs"},{default:s(()=>[l.tipo==="link"?(f(),C(V,{key:0,name:"launch"})):(f(),C(i,{key:1,nome:l.tipo,tamanho:"12"},null,8,["nome"]))]),_:2},1032,["color","onClick"]))),128)),t(b,{color:"positive",icon:"add",outline:"",round:r.temRedeSocial,size:"sm",class:"q-mx-xs",onClick:r.btRedeSocialadicionar_click},null,8,["round","onClick"])])]),d("div",Zo,[e.contato&&e.contato.codigoContato?(f(),v("div",Yo,[t(g,{cor:r.badgeCor,escuro:""},{default:s(()=>[w("#"+k((e.contato.codigoContato||0).toString().padStart(6,"0")),1)]),_:1},8,["cor"])])):y("",!0),t(p,{tipo:"texto",class:"q-title",placeholder:r.ehEmpresa?"Fantasia":"Apelido",autogrow:"","class-campo":"q-pb-sm",modelValue:e.contato.apelido,"onUpdate:modelValue":o[1]||(o[1]=l=>e.contato.apelido=l),rules:[l=>l&&l.length>2||"obrigat\xF3rio."],dense:""},null,8,["placeholder","modelValue","rules"]),t(p,{tipo:"texto",rotulo:r.ehEmpresa?"Raz\xE3o social":"Nome completo",modelValue:e.contato.nome,"onUpdate:modelValue":o[2]||(o[2]=l=>e.contato.nome=l),autogrow:"","class-campo":"q-pb-sm",rules:[l=>l&&l.length>2||"O nome \xE9 obrigat\xF3rio."],dense:""},null,8,["rotulo","modelValue","rules"]),t(_,{class:"q-col-gutter-sm"},{default:s(()=>[d("div",$o,[j((f(),C(G,{label:r.ehEmpresa?"CNPJ":"CPF/CNPJ",class:"q-pb-xs",modelValue:e.contato.numeroDocumentoNacional,"onUpdate:modelValue":o[4]||(o[4]=l=>e.contato.numeroDocumentoNacional=l),rules:e.rules.numeroDocumentoNacional,dense:""},{append:s(()=>[(e.contato.numeroDocumentoNacional||"").length===18&&a.$utils.validarDocumentoNacional(e.contato.numeroDocumentoNacional)?(f(),C(b,{key:0,dense:"",flat:"",round:"",icon:"mdi-arrow-down-bold-circle",color:"positive",onClick:o[3]||(o[3]=l=>a.$refs.consultaCNPJ.consultar(e.contato.numeroDocumentoNacional))},{default:s(()=>[t(D,null,{default:s(()=>o[44]||(o[44]=[w("Consultar cadastro")])),_:1})]),_:1})):y("",!0)]),_:1},8,["label","modelValue","rules"])),[[co,["###.###.###-##","##.###.###/####-##"]]])]),d("div",oe,[t(p,{rotulo:r.ehEmpresa?"Inscri\xE7\xE3o estadual":"RG/IE",modelValue:e.contato.numeroDocumentoEstadual,"onUpdate:modelValue":o[5]||(o[5]=l=>e.contato.numeroDocumentoEstadual=l),class:"q-pb-xs"},null,8,["rotulo","modelValue"])]),d("div",ee,[t(p,{rotulo:"Inscri\xE7\xE3o municipal",modelValue:e.contato.numeroDocumentoMunicipal,"onUpdate:modelValue":o[6]||(o[6]=l=>e.contato.numeroDocumentoMunicipal=l),class:"q-pb-xs"},null,8,["modelValue"])])]),_:1}),o[46]||(o[46]=d("div",{class:"text-subtitle1 q-mt-lg"},"Telefones",-1)),(f(!0),v(q,null,P(e.telefone,(l,h)=>(f(),v("div",{key:h,class:"q-mt-md"},[t(_,null,{default:s(()=>[d("div",te,[t(E,{modelValue:l.tipoTelefone,"onUpdate:modelValue":m=>l.tipoTelefone=m,options:e.telefoneTipos,"option-value":"value","option-label":"label","emit-value":"","map-options":"",dense:"",label:"Tipo"},{before:s(()=>[t(b,{flat:"",round:"",icon:(e.telefoneTipos.find(m=>m.value===l.tipoTelefone)||{}).icon||"star",color:"tertiary",size:"sm",onClick:m=>r.telefoneAbrir(l)},null,8,["icon","onClick"])]),option:s(m=>[t(B,H({ref_for:!0},m.itemProps),{default:s(()=>[t(F,{avatar:""},{default:s(()=>[t(V,{name:m.opt.icon},null,8,["name"])]),_:2},1024),t(F,null,{default:s(()=>[t(A,{innerHTML:m.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),d("div",ae,[t(p,{rotulo:"Telefone",modelValue:l.telefone,"onUpdate:modelValue":m=>l.telefone=m},null,8,["modelValue","onUpdate:modelValue"])]),d("div",le,[d("div",re,[t(p,{rotulo:"Descri\xE7\xE3o",modelValue:l.observacao,"onUpdate:modelValue":m=>l.observacao=m},null,8,["modelValue","onUpdate:modelValue"])])]),d("div",ie,[t(b,{onClick:m=>r.telefoneRemover(h),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mt-sm"},null,8,["onClick"])])]),_:2},1024)]))),128)),d("div",ne,[t(b,{color:"positive",icon:"add",label:"Telefone",outline:"",size:"sm",onClick:r.telefoneAdicionar},null,8,["onClick"])]),o[47]||(o[47]=d("div",{class:"text-subtitle1 q-mt-lg"},"Endere\xE7os",-1)),(f(!0),v(q,null,P(e.endereco,(l,h)=>(f(),v("div",{class:"u-separador animate-pop q-mt-md",key:h},[t(_,null,{default:s(()=>[d("div",se,[t(E,{modelValue:l.grupo,"onUpdate:modelValue":m=>l.grupo=m,options:e.enderecoTipos,"option-value":"value","option-label":"label",class:"q-pb-md","emit-value":"","map-options":"",dense:"",label:"Grupo"},{before:s(()=>[t(V,H({ref_for:!0},r.enderecoIcone(l.grupo),{color:"tertiary",size:"xs",class:"q-mx-xs"}),null,16)]),option:s(m=>[t(B,H({ref_for:!0},m.itemProps),{default:s(()=>[t(F,{avatar:""},{default:s(()=>[t(V,{name:m.opt.icon},null,8,["name"])]),_:2},1024),t(F,null,{default:s(()=>[t(A,{innerHTML:m.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),d("div",ce,[t(O,{modelValue:l.estrangeiro,"onUpdate:modelValue":[m=>l.estrangeiro=m,m=>r.setarEstrangeiro(h)],val:!1,label:"Estrangeiro",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024),t(_,null,{default:s(()=>[d("div",de,[t(G,{modelValue:l.cep,"onUpdate:modelValue":m=>l.cep=m,onChange:m=>r.consultarCep(h),readonly:e.enderecoEstrangeiro[h],rules:[m=>m&&m.replace(/\D/g,"").length===8||"O CEP est\xE1 muito curto."],type:"texto",label:"CEP",mask:"#####-###",debounce:"500",dense:"",class:"q-pb-none"},{append:s(()=>[t(b,{onClick:o[7]||(o[7]=m=>r.abrirBuscaCep()),disabled:e.enderecoEstrangeiro[h],icon:"not_listed_location",flat:"",round:"",dense:""},{default:s(()=>[t(D,{anchor:"bottom middle",self:"center middle"},{default:s(()=>o[45]||(o[45]=[w("N\xE3o sei CEP")])),_:1})]),_:2},1032,["disabled"])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","readonly","rules"])]),d("div",ue,[t(p,{"class-campo":"q-pb-none ",rotulo:"UF",maxlength:"2",modelValue:l.uf,"onUpdate:modelValue":m=>l.uf=m,onBlur:e.endereco.$touch,dense:"",rules:[m=>m&&m.length===2||"Insira um UF."],"somente-leitura":e.enderecoEstrangeiro[h]},null,8,["modelValue","onUpdate:modelValue","onBlur","rules","somente-leitura"])]),d("div",me,[t(z,{ibgeCod:l.ibgeCod,onSelecionar:m=>r.selecionarCidade(m,h),required:"","somente-leitura":e.enderecoEstrangeiro[h]},null,8,["ibgeCod","onSelecionar","somente-leitura"])]),d("div",pe,[t(p,{"class-campo":"q-pb-md",rotulo:"Endere\xE7o",modelValue:l.logradouro,"onUpdate:modelValue":m=>l.logradouro=m,autogrow:"",onBlur:e.endereco.$touch,dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",fe,[t(p,{"class-campo":"q-pb-md",rotulo:"N\xFAmero",modelValue:l.numero,"onUpdate:modelValue":m=>l.numero=m,onBlur:e.endereco.$touch,dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",he,[t(p,{rotulo:"Complemento",modelValue:l.complemento,"onUpdate:modelValue":m=>l.complemento=m,onBlur:e.endereco.$touch,"class-campo":"q-pb-md",dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",be,[t(p,{rotulo:"Bairro",modelValue:l.bairro,"onUpdate:modelValue":m=>l.bairro=m,onBlur:e.endereco.$touch,"class-campo":"q-pb-sm",dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",ge,[t(U,{codigoPais:l.codigoPais,onSelecionar:m=>r.selecionarPais(m,h),required:""},null,8,["codigoPais","onSelecionar"])]),d("div",Ce,[t(b,{onClick:m=>r.enderecoRemover(h),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mt-sm"},null,8,["onClick"])])]),_:2},1024)]))),128)),d("div",ve,[t(b,{color:"positive",icon:"add",label:"Endere\xE7o",outline:"",size:"sm",onClick:r.enderecoAdicionar},null,8,["onClick"])])]),d("div",Ve,[t(p,{rotulo:"Observa\xE7\xF5es",rows:"10",tipo:"textoArea",modelValue:e.contato.observacao,"onUpdate:modelValue":o[8]||(o[8]=l=>e.contato.observacao=l)},null,8,["modelValue"])])]),_:1})]),_:1}),t(To,{modelValue:e.tab,"onUpdate:modelValue":o[9]||(o[9]=l=>e.tab=l),class:"bg-transparent q-mt-lg text-primary",color:"transparent",align:"left"},{default:s(()=>[t(x,{label:"Dados Adicionais",name:"profile-tab-1"}),t(x,{label:"Dependentes / Empresa",name:"profile-tab-2"}),t(x,{label:"Consulta de cadastro",name:"profile-tab-3"}),t(x,{label:"Conduta",name:"profile-tab-4"}),t(x,{label:"Configura\xE7\xF5es comerciais",name:"profile-tab-5"}),t(x,{label:"Arquivos",name:"profile-arquivos"})]),_:1},8,["modelValue"]),t(yo,{modelValue:e.tab,"onUpdate:modelValue":o[43]||(o[43]=l=>e.tab=l),animated:""},{default:s(()=>[t(N,{class:"bg-white",name:"profile-tab-1"},{default:s(()=>[t(_,{class:"q-col-gutter-sm"},{default:s(()=>[d("div",Te,[t(p,{modelValue:e.contato.email,"onUpdate:modelValue":o[10]||(o[10]=l=>e.contato.email=l),before:[{icon:"alternate_email"}],rotulo:"E-mail",rules:[l=>r.validateEmail(l)||(l||"").length===0||"email inv\xE1lido"]},null,8,["modelValue","rules"])]),d("div",ye,[t(p,{modelValue:e.contato.site,"onUpdate:modelValue":o[11]||(o[11]=l=>e.contato.site=l),before:[{icon:"language"}],rotulo:"Site"},null,8,["modelValue"])]),d("div",we,[t(eo,{modelValue:e.contato.segmento,"onUpdate:modelValue":o[12]||(o[12]=l=>e.contato.segmento=l),tabela:"contato",campo:"segmento",label:r.segmentoProfissao,buscarSemCaractere:!0,enableAdd:""},null,8,["modelValue","label"])]),r.ehEmpresa?(f(),v(q,{key:0},[d("div",_e,[t(p,{tipo:"seletor",dense:"","rotulo-fixo":"Regime",options:e.regimes,modelValue:e.contato.regime,"onUpdate:modelValue":o[13]||(o[13]=l=>e.contato.regime=l)},null,8,["options","modelValue"])]),e.contato.regime==="Normal"?(f(),v("div",ke,[t(p,{modelValue:e.contato.tributacao,"onUpdate:modelValue":o[14]||(o[14]=l=>e.contato.tributacao=l),tipo:"seletor","rotulo-fixo":"Tributa\xE7\xE3o",opcoes:[{rotulo:"",valor:""},{rotulo:"Lucro real",valor:"1"},{rotulo:"Lucro presumido",valor:"2"}]},null,8,["modelValue"])])):y("",!0),d("div",Se,[t(p,{modelValue:e.contato.tributacaoSetor,"onUpdate:modelValue":o[15]||(o[15]=l=>e.contato.tributacaoSetor=l),opcoes:[{rotulo:"",valor:""},{rotulo:"Ind\xFAstria",valor:"1"},{rotulo:"Outros",valor:"99"}],"rotulo-fixo":"Setor tributa\xE7\xE3o",tipo:"seletor"},null,8,["modelValue"])]),d("div",qe,[t(p,{modelValue:e.contato.dataAbertura,"onUpdate:modelValue":o[16]||(o[16]=l=>e.contato.dataAbertura=l),rotulo:"Data de abertura",clearable:"",suffix:e.contato.dataAbertura?`${r.idade} anos`:"",max:Date.now(),tipo:"data"},null,8,["modelValue","suffix","max"])])],64)):(f(),v(q,{key:1},[d("div",Ee,[t(p,{tipo:"seletor","rotulo-fixo":"Sexo",options:e.sexos,modelValue:e.contato.sexo,"onUpdate:modelValue":o[17]||(o[17]=l=>e.contato.sexo=l)},null,8,["options","modelValue"])]),d("div",Ue,[t(p,{modelValue:e.contato.dataAbertura,"onUpdate:modelValue":o[18]||(o[18]=l=>e.contato.dataAbertura=l),rotulo:"Data de nascimento",clearable:"",suffix:e.contato.dataAbertura?`${r.idade} anos`:"",max:Date.now(),tipo:"data"},null,8,["modelValue","suffix","max"])])],64))]),_:1}),t(_,null,{default:s(()=>[d("div",Ae,[t(to,{modelValue:e.grupo,"onUpdate:modelValue":o[19]||(o[19]=l=>e.grupo=l),rotulo:"Grupos",dense:"",before:[{icon:"local_offer",handler(){r.grupoSelecionar_Click()}}]},null,8,["modelValue","before"])])]),_:1})]),_:1}),t(N,{class:"bg-white",name:"profile-tab-2"},{default:s(()=>[t(_,null,{default:s(()=>[t(E,{modelValue:e.filhoCampo,"onUpdate:modelValue":[o[20]||(o[20]=l=>e.filhoCampo=l),r.filhoAdicionar],"use-input":"","input-debounce":"500",label:"Dependentes",options:e.opcoesDependentes,outlined:"",onFilter:r.filhosBuscar},{append:s(()=>[t(b,{color:"tertiary",size:"lg",icon:"person_add",dense:"",flat:"",round:"",onClick:r.dependenteCriar},{default:s(()=>[t(D,null,{default:s(()=>o[48]||(o[48]=[w("Criar contato")])),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue"])]),_:1}),d("div",Pe,[(f(!0),v(q,null,P(e.filhos.filter(l=>l.idContato===e.contato.id),l=>(f(),v(q,{key:l.id},[t(_,{class:"q-col-gutter-x-md items-center"},{default:s(()=>[d("div",De,[t(u,{imagem:(e.filhosId[l.idContatoRelacionado]||{}).imagem,rotulo:(e.filhosId[l.idContatoRelacionado]||{}).apelido},null,8,["imagem","rotulo"])]),d("div",xe,[d("p",Ne,k((e.filhosId[l.idContatoRelacionado]||{}).apelido),1),d("p",Fe,k((e.filhosId[l.idContatoRelacionado]||{}).nome),1),d("p",Oe,k((e.filhosId[l.idContatoRelacionado]||{}).numeroDocumentoNacional||""),1),d("span",Re,[t(p,{modelValue:l.observacao,"onUpdate:modelValue":h=>l.observacao=h,rotulo:"Observacao"},null,8,["modelValue","onUpdate:modelValue"])]),d("span",Le,[t(O,{modelValue:l.socio,"onUpdate:modelValue":h=>l.socio=h,val:!0,label:"S\xF3cio",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"]),t(O,{modelValue:l.cobranca,"onUpdate:modelValue":h=>l.cobranca=h,val:!0,label:"Cobran\xE7a",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"])])]),d("div",Ie,[t(p,{modelValue:l.observacao,"onUpdate:modelValue":h=>l.observacao=h,rotulo:"Observacao",autogrow:"",filled:""},null,8,["modelValue","onUpdate:modelValue"])]),d("div",je,[t(O,{modelValue:l.socio,"onUpdate:modelValue":h=>l.socio=h,val:!0,label:"S\xF3cio"},null,8,["modelValue","onUpdate:modelValue"]),t(O,{modelValue:l.cobranca,"onUpdate:modelValue":h=>l.cobranca=h,val:!0,label:"Cobran\xE7a"},null,8,["modelValue","onUpdate:modelValue"])]),d("div",ze,[t(_,{class:"justify-end"},{default:s(()=>[!e.somenteCarteira||e.somenteCarteira&&e.contatoUsuario.id&&(e.filhosId[l.idContatoRelacionado]||{}).idContatoVendedor===e.contatoUsuario.id?(f(),C(b,{key:0,to:{name:"AtendimentoContato",params:{id:l.idContatoRelacionado}},icon:"edit",flat:"",round:"",dense:"",color:"tertiary",class:"q-mr-sm"},{default:s(()=>[t(D,null,{default:s(()=>o[49]||(o[49]=[w("Editar contato")])),_:1})]),_:2},1032,["to"])):y("",!0),t(b,{onClick:h=>r.filhoRemover(l),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mr-sm"},{default:s(()=>[t(D,null,{default:s(()=>o[50]||(o[50]=[w("Remover")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024),t(wo)],64))),128))])]),_:1}),t(N,{class:"bg-white",name:"profile-tab-3"},{default:s(()=>[t(_,{class:"q-col-gutter-sm"},{default:s(()=>[d("div",Be,[t(p,{rotulo:"Descri\xE7\xE3o",modelValue:e.consultaDescricao,"onUpdate:modelValue":o[21]||(o[21]=l=>e.consultaDescricao=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),d("div",Me,[t(b,{color:"positive",icon:"add",label:"Consulta",outline:"",size:"sm",onClick:r.consultaAdicionar},null,8,["onClick"])])]),_:1}),(f(!0),v(q,null,P(e.consulta,(l,h)=>(f(),C(I,{class:"animate-pop q-mt-md shadow-1",key:h},{default:s(()=>[t(W,null,{default:s(()=>[d("div",null,k(l.descricao),1),d("span",null,[o[51]||(o[51]=w("Consulta realizada em ")),d("strong",null,k(a.$filters.dataHora(l.dataConsulta)),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(N,{modelValue:e.tab,"onUpdate:modelValue":o[24]||(o[24]=l=>e.tab=l),class:"bg-white",name:"profile-tab-4"},{default:s(()=>[t(_,{class:"q-col-gutter-sm q-pb-sm"},{default:s(()=>[d("div",Qe,[t(p,{rows:"3",rotulo:"Observa\xE7\xF5es",tipo:"textoArea",modelValue:e.contato.condutaObservacao,"onUpdate:modelValue":o[22]||(o[22]=l=>e.contato.condutaObservacao=l),"class-campo":"q-mb-sm",ajuda:"Este conte\xFAdo ser\xE1 exibido sempre que um documento for criado para este contato."},null,8,["modelValue"])]),d("div",He,[t(p,{rows:"3",rotulo:"Restri\xE7\xE3o",tipo:"textoArea",modelValue:e.contato.condutaRestricao,"onUpdate:modelValue":o[23]||(o[23]=l=>e.contato.condutaRestricao=l),"class-campo":"q-mb-sm",somenteLeitura:!e.permissoes.editarCondutaRestricao,ajuda:"Ao preencher este campo, o contato n\xE3o poder\xE1 comprar e o operador visualizar\xE1 esta mensagem."},null,8,["modelValue","somenteLeitura"])])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.tab,"onUpdate:modelValue":o[41]||(o[41]=l=>e.tab=l),class:"bg-white",name:"profile-tab-5"},{default:s(()=>[d("div",Je,[t(E,{dense:"",rounded:"",modelValue:e.descricaoVendedor,"onUpdate:modelValue":o[25]||(o[25]=l=>e.descricaoVendedor=l),label:"Vendedor",options:["a","b"],disable:e.podeAlterarVendedorAssistente,onFilter:r.btSelecionarVendedor_click,class:"col-12 col-sm-4"},{append:s(()=>[e.descricaoVendedor!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.vendedorLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarVendedor_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","disable","onFilter"]),t(E,{dense:"",rounded:"",modelValue:e.descricaoAssistente,"onUpdate:modelValue":o[26]||(o[26]=l=>e.descricaoAssistente=l),label:"Assistente",options:["a","b"],disable:e.podeAlterarVendedorAssistente,onFilter:r.btSelecionarAssistente_click,class:"col-12 col-sm-4"},{append:s(()=>[e.descricaoAssistente!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.assistenteLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarAssistente_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","disable","onFilter"]),t(E,{dense:"",rounded:"",modelValue:e.descricaoContatoLider,"onUpdate:modelValue":o[27]||(o[27]=l=>e.descricaoContatoLider=l),label:"Contato L\xEDder",options:["a","b"],onFilter:r.btSelecionarContatoLider_click,class:"col-12 col-sm-4"},{append:s(()=>[e.descricaoContatoLider!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.contatoLiderLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarContatoLider_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(E,{dense:"",rounded:"",modelValue:e.descricaoEmpresaCarteira,"onUpdate:modelValue":o[28]||(o[28]=l=>e.descricaoEmpresaCarteira=l),label:"Empresa Carteira",options:["a","b"],onFilter:r.btSelecionarEmpresaCarteira_click,class:"col-12 col-sm-4"},{append:s(()=>[e.descricaoEmpresaCarteira!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.empresaCarteiraLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarEmpresaCarteira_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(p,{class:"col-12 col-sm-4",modelValue:e.contato.origemMarketing,"onUpdate:modelValue":o[29]||(o[29]=l=>e.contato.origemMarketing=l),rotulo:"Origem Marketing"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:e.contato.grupoEconomico,"onUpdate:modelValue":o[30]||(o[30]=l=>e.contato.grupoEconomico=l),rotulo:"Grupo Econ\xF4mico"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:e.contato.rotaVendedor,"onUpdate:modelValue":o[31]||(o[31]=l=>e.contato.rotaVendedor=l),rotulo:"Rota Vendedor"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:e.contato.rotaEntrega,"onUpdate:modelValue":o[32]||(o[32]=l=>e.contato.rotaEntrega=l),rotulo:"Rota Entrega"},null,8,["modelValue"]),t(E,{dense:"",rounded:"",modelValue:e.descricaoTransportadora,"onUpdate:modelValue":o[33]||(o[33]=l=>e.descricaoTransportadora=l),label:"Transportadora",options:["a","b"],onFilter:r.btSelecionarTransportadora_click,class:"col-12 col-sm-4"},{append:s(()=>[e.descricaoTransportadora!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.transportadoraLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarTransportadora_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(E,{dense:"",rounded:"",modelValue:e.contato.idItemTabelaPreco,"onUpdate:modelValue":o[35]||(o[35]=l=>e.contato.idItemTabelaPreco=l),label:"Tabela de pre\xE7o",options:e.opcoesTabelaPreco,"option-value":"id","option-label":"descricao",onFilter:r.atualizarTabelaPreco,"emit-value":"","map-options":"",class:"col-12 col-sm-4"},_o({option:s(l=>[t(B,ko(So(l.itemProps)),{default:s(()=>[t(F,null,{default:s(()=>[t(A,{innerHTML:l.opt.descricao},null,8,["innerHTML"]),t(A,{caption:""},{default:s(()=>[o[52]||(o[52]=d("strong",null,"Empresa: ",-1)),w(k(l.opt.empresa),1)]),_:2},1024),l.opt.fatorPercentual?(f(),C(A,{key:0,caption:"",sublabel:""},{default:s(()=>[o[53]||(o[53]=d("strong",null,"Fator (%): ",-1)),w(k(a.$filters.numero(l.opt.fatorPercentual,2))+" %",1)]),_:2},1024)):y("",!0),t(A,{caption:""},{default:s(()=>[o[54]||(o[54]=d("strong",null,"Arredondamento: ",-1)),w(k(l.opt.arredondamento?"Sim":"N\xE3o"),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[e.contato.idItemTabelaPreco?{name:"append",fn:s(()=>[t(V,{name:"close",onClick:o[34]||(o[34]=S(l=>{e.contato.idItemTabelaPreco="",e.contato.codigoItemTabelaPreco=""},["stop"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","options","onFilter"]),t(E,{dense:"",rounded:"",modelValue:e.descricaoFormaPagamento,"onUpdate:modelValue":o[36]||(o[36]=l=>e.descricaoFormaPagamento=l),label:"Forma de pagamento",options:["a","b"],onFilter:r.btSelecionaFormaPagamento_click,class:"col-12 col-sm-4"},{append:s(()=>[e.descricaoFormaPagamento!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.formaPagamentoLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionaFormaPagamento_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(p,{class:"col-12 col-sm-4",modelValue:e.contato.limiteCredito,"onUpdate:modelValue":o[37]||(o[37]=l=>e.contato.limiteCredito=l),decimals:"2",rotulo:"Limite de cr\xE9dito",tipo:"decimal","somente-leitura":!e.permissoes.editarLimiteCredito},null,8,["modelValue","somente-leitura"]),d("div",Ge,[t(p,{rotulo:"E-mail NFe",modelValue:e.contato.emailNfe,"onUpdate:modelValue":o[38]||(o[38]=l=>e.contato.emailNfe=l)},null,8,["modelValue"])]),d("div",We,[t(p,{rotulo:"Observa\xE7\xF5es na NFe",modelValue:e.contato.observacaoNFE,"onUpdate:modelValue":o[39]||(o[39]=l=>e.contato.observacaoNFE=l)},null,8,["modelValue"])]),e.configuracoes.descontoCondicionado?(f(),C(p,{key:0,class:"col-12 col-sm-4",modelValue:e.contato.descontoCondicionadoPercentual,"onUpdate:modelValue":o[40]||(o[40]=l=>e.contato.descontoCondicionadoPercentual=l),decimals:"2",suffix:"%",rotulo:"Desconto Condicionado",tipo:"decimal"},null,8,["modelValue"])):y("",!0)])]),_:1},8,["modelValue"]),t(N,{modelValue:e.tab,"onUpdate:modelValue":o[42]||(o[42]=l=>e.tab=l),class:"bg-white",name:"profile-arquivos"},{default:s(()=>[d("div",Xe,[t(ao,{resize:{crop:!0,width:1e3,height:1e3},idTabelaMaster:e.contato.id,tipoArquivo:"contatoImagem",arquivo:e.arquivo},null,8,["idTabelaMaster","arquivo"])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),d("div",Ke,[e.contato.dataCadastro?(f(),v("small",Ze,"Data do cadastro: "+k(a.$filters.dataHora(e.contato.dataCadastro)),1)):y("",!0),e.contato.dataAlteracao?(f(),v("small",Ye,"\xDAltima altera\xE7\xE3o: "+k(a.$filters.dataHora(e.contato.dataAlteracao)),1)):y("",!0)]),t(qo,{class:"bg-light no-shadow q-pa-sm text-right u-bordaCima"},{default:s(()=>[d("div",$e,[e.contato.ativo?(f(),v(q,{key:0},[t(b,{color:"tertiary",flat:"",label:"Cancelar",onClick:r.aoCancelar},null,8,["onClick"]),t(b,{class:"q-ml-sm no-shadow",color:"primary",unelevated:"",label:"Salvar",type:"submit"}),t(b,{color:"tertiary",flat:"",icon:"delete",round:"",onClick:r.contatoRemover},{default:s(()=>[t(D,null,{default:s(()=>o[55]||(o[55]=[w("Remover")])),_:1})]),_:1},8,["onClick"])],64)):(f(),v("div",ot,[o[56]||(o[56]=d("span",{class:"text-tertiary"},"N\xE3o \xE9 poss\xEDvel editar informa\xE7\xF5es de um contato exclu\xEDdo.",-1)),t(b,{class:"q-ml-sm text-white",unelevated:"",color:"primary",onClick:r.restaurarContato,label:"Restaurar contato"},null,8,["onClick"])]))])]),_:1})]),_:1},8,["onSubmit"]),t(lo,{ref:"promptCriarDependente","cpf-cnpj":"","data-nascimento":"",observacao:""},null,512),t(ro,{ref:"modalRedesSociais"},null,512),t(io,{ref:"modalTrocarFoto"},null,512),t(no,{ref:"consultaCNPJ",contato:e.contato,endereco:e.endereco},null,8,["contato","endereco"]),t(so,{ref:"PromptGrupoUnico"},null,512)],64)}var it=Q(Wo,[["render",et]]);export{it as default};
