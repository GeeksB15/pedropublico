import{_ as f,o as b,i as h,w as a,f as e,s as g,B as s,E as d,e as y,C as c,D as l,L as u,z as _,M as V,Q as m,j as C,x as k,y as w}from"./index.88955961.js";const v={data(){return{origem:{},destino:{}}},methods:{onHide(){this.origem={},this.destino={},this.$emit("update:modelValue",!1)},async combinar(){if(!(this.origem.id&&this.destino.id)){$q.notify({message:"Preencha todos os campos",type:"negative"});return}$q.dialog({message:"Ao continuar voc\xEA ir\xE1 combinar todas as informa\xE7\xF5es dos dois contatos em apenas um contato.",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Combinar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show();const o=await $utils.geeksApi({combinarContato:{funcao:"1C2ABCA8-AF5A-45CA-B799-774E43FA7F96",idContatoCombinar:this.destino.id,idContatoRemover:this.origem.id}});$q.notifyPositive(o.data.combinarContato.mensagem),this.atualizar&&(this.onHide(),this.atualizar())}catch(o){$q.notifyError("Ocorreu um erro ao combinar contatos",o)}finally{$q.loading.hide()}})},async selecionarCombinarOrigem(){const o=await $g.promptContato.show({filtro:{ativo:!0,somenteCarteira:!0,empresas:!1}});$lodash.get(o,"id")&&(this.origem=o)},async selecionarCombinarDestino(){const o=await $g.promptContato.show({filtro:{ativo:!0,somenteCarteira:!0}});$lodash.get(o,"id")&&(this.destino=o)}},emits:["update:modelValue"],props:{modelValue:{required:!0,type:Boolean},atualizar:{required:!1,type:Function}}},B={class:"row justify-end"};function Q(o,r,p,q,i,t){return b(),h(w,{modelValue:p.modelValue,onHide:t.onHide},{default:a(()=>[e(g,null,{default:a(()=>[e(s,{class:"bg-primary text-white"},{default:a(()=>[e(d,null,{default:a(()=>[y("Combinar Contatos")]),_:1}),c(e(l,{dense:"",flat:"",icon:"close",round:""},null,512),[[u]])]),_:1}),e(_,{onSubmit:t.combinar},{default:a(()=>[e(V,null,{default:a(()=>[e(m,{modelValue:i.origem.nome,"onUpdate:modelValue":r[0]||(r[0]=n=>i.origem.nome=n),color:"primary",inputClass:"cursor-pointer",placeholder:"Buscar Contato",label:"Pegar dados de",readonly:"",onClick:t.selecionarCombinarOrigem},{append:a(()=>[e(C,{name:"search",onClick:t.selecionarCombinarOrigem,class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onClick"]),e(m,{modelValue:i.destino.nome,"onUpdate:modelValue":r[1]||(r[1]=n=>i.destino.nome=n),color:"primary",inputClass:"cursor-pointer",placeholder:"Buscar Contato",label:"Transferir para",class:"cursor-pointer",readonly:"",onClick:t.selecionarCombinarDestino},{append:a(()=>[e(C,{name:"search",onClick:t.selecionarCombinarDestino,class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onClick"])]),_:1}),e(s,null,{default:a(()=>[e(d,null,{default:a(()=>[k("div",B,[c(e(l,{flat:"",color:"tertiary",label:"Cancelar"},null,512),[[u]]),e(l,{unelevated:"",color:"primary",type:"submit",label:"Combinar"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","onHide"])}var A=f(v,[["render",Q]]);export{A as M};
