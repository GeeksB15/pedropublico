import{_ as p,aE as h,r as f,o as i,d as c,w as n,l as b,e as v,f as r,R as _,av as S,bh as g,S as u,j as D,T as y,k as w,t as x,as as N}from"./index.353e304f.js";const W={data(){return{contaWhats:null,lista:[],dbUsuario:h.usuario,clienteSistema:{}}},props:{standard:{type:Boolean,default:!0},filled:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},conta:{type:String,default:null}},methods:{async whatsListaConexoes(){this.lista.push({icon:"storage",label:this.clienteSistema.bancoDeDados,value:this.clienteSistema.bancoDeDados});let e;const o=await $db.empresa.ler({filtro:{ativo:!0}});for(const a of o)a.numeroDocumentoNacional&&(e?this.lista.push({icon:"business",label:(a==null?void 0:a.sigla)||(a==null?void 0:a.apelido),value:`cnpj${a.numeroDocumentoNacional.replace("/","_")||null}`}):(e="empresa",this.lista.push({icon:"business",label:(a==null?void 0:a.sigla)||(a==null?void 0:a.apelido),tipo:e,value:`cnpj${a.numeroDocumentoNacional.replace("/","_")||null}`})));const t=(await $db.contato.ler({filtros:{ativo:!0,usuario:!0}})).data;t.sort((a,s)=>a.nome.localeCompare(s.nome)),e="";for(const a of t)a!=null&&a.numeroDocumentoNacional&&(e?this.lista.push({avatar:(a==null?void 0:a.imagem)||"",label:a.nome,value:`cpf${a.numeroDocumentoNacional}`}):(e="usuario",this.lista.push({avatar:(a==null?void 0:a.imagem)||"",label:a.nome,tipo:e,value:`cpf${a.numeroDocumentoNacional}`})));this.lista=Array.from(new Set(this.lista.map(JSON.stringify))).map(JSON.parse)},async emitirValorSeletor(e){this.contaWhats=e||"",this.$emit("atualizarConexao",this.contaWhats.value)}},async mounted(){this.clienteSistema=JSON.parse(await localStorage.getItem("clienteSistema"))||{},await this.whatsListaConexoes();const e=this.conta||"";if(e.substring(0,3)==="cpf"){const o=e.substring(3),t=(await $db.hibrido.lista({table:"contato",where:{numeroDocumentoNacional:o}}))[0];this.contaWhats={label:t.nome}}else if(e.substring(0,4)==="cnpj"){const o=e.substring(4).replace("_","/"),t=(await $db.hibrido.lista({table:"empresa",whereFilter:{numeroDocumentoNacional:o}}))[0];this.contaWhats={label:(t==null?void 0:t.sigla)||(t==null?void 0:t.apelido)}}else this.contaWhats={label:this.clienteSistema.bancoDeDados};this.conta||await this.emitirValorSeletor({label:this.clienteSistema.bancoDeDados,value:this.clienteSistema.bancoDeDados})}};function C(e,o,t,a,s,m){const d=f("avatar");return i(),c(N,{modelValue:s.contaWhats,"onUpdate:modelValue":[o[0]||(o[0]=l=>s.contaWhats=l),m.emitirValorSeletor],"option-label":"label","option-value":"value",options:s.lista,clearable:"",standard:t.standard,filled:t.filled,outlined:t.outlined,dense:"",label:"Conex\xE3o Whatsapp",color:"primary","options-selected-class":"text-primary","popup-content-class":"conexoesDropdown"},{option:n(l=>[l.opt.tipo?(i(),c(b,{key:0,class:"q-mx-xl q-my-xs"})):v("",!0),r(_,S(g(l.itemProps)),{default:n(()=>[r(u,{avatar:""},{default:n(()=>[l.opt.icon?(i(),c(D,{key:0,name:l.opt.icon,size:"sm"},null,8,["name"])):(i(),c(d,{key:1,imagem:l.opt.avatar,color:"#eeeeee",tamanho:"24"},null,8,["imagem"]))]),_:2},1024),r(u,null,{default:n(()=>[r(y,{class:"text-weight-medium",lines:"1"},{default:n(()=>[w(x(l.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","standard","filled","outlined","onUpdate:modelValue"])}var k=p(W,[["render",C]]);export{k as s};
