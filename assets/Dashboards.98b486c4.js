import{_ as w,o as b,d as k,w as i,f as o,Q as q,B as s,n as f,e as y,aY as v,t as r,u as F,h as _,r as g,b1 as E,b2 as C,l as S,E as A,I as D,bc as I,bd as B,y as d,H as z}from"./index.129a5639.js";import{_ as G}from"./Grafico.023b0d77.js";import{_ as P}from"./b15-white.58ad6516.js";import{_ as V}from"./optidados-white.e4237b1d.js";import"./Chart.b7863f5e.js";const Q={computed:{piscarContador(){return this.contador==="00:00"}},data(){return{dbUsuario:$db.usuario,sistemaPai:"",horario:null,contador:null,actualFullScreenIcon:"fullscreen"}},methods:{IsFullScreenCurrently(){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null;return t===null?(this.actualFullScreenIcon="fullscreen_exit",!1):(this.actualFullScreenIcon="fullscreen",!0)},GoInFullscreen(t){console.log("GoInFullscreen"),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},GoOutFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},abrirFullscreen(){this.IsFullScreenCurrently()?this.GoOutFullscreen():this.GoInFullscreen(document.getElementById("Dashboards"))},alternarMenu(){$db.app.menuVisivel.value=!$db.app.menuVisivel.value},iniciarContador(){let t=6e4;this.contador=new Date(t).toISOString().substring(14,19),this.horario=new Date().toLocaleTimeString(),this.contadorInterval=setInterval(async()=>{t-=1e3,this.contador=new Date(t).toISOString().substring(14,19),t>0||(clearInterval(this.contadorInterval),await new Promise((e,n)=>{$utils.emitter.emit("atualizarDashboards",e)}),this.iniciarContador())},1e3)}},async mounted(){this.sistemaPai=$utils.sistemaPai(),this.iniciarContador()},beforeUnmount(){clearInterval(this.contadorInterval)}},O={style:{height:"30px"}},$={key:0,src:P,alt:"B15",style:{height:"30px"},class:"q-mr-md"},M={key:1,src:V,alt:"Optidados",style:{height:"30px"},class:"q-mr-md"},R={class:"flex justify-between items-center"},T={class:"q-mr-md"};function N(t,e,n,p,l,c){return b(),k(_,{class:"q-px-sm"},{default:i(()=>[o(q,{onClick:c.alternarMenu,icon:"menu",flat:"",round:"",dense:"",color:"white",class:"q-mr-sm"},null,8,["onClick"]),s("div",O,[l.sistemaPai==="b15"?(b(),f("img",$)):y("",!0),l.sistemaPai==="optisoul"?(b(),f("img",M)):y("",!0)]),o(v),s("div",R,[s("div",T,[s("span",null,r(l.horario)+" | ",1),s("span",{class:F(c.piscarContador?"blink":"")},r(l.contador),3)]),o(q,{onClick:c.abrirFullscreen,icon:l.actualFullScreenIcon,flat:"",round:"",dense:"",color:"white"},null,8,["onClick","icon"])])]),_:1})}var L=w(Q,[["render",N],["__scopeId","data-v-113c8314"]]);const j={components:{Grafico:G,BarraTopoDashboards:L},computed:{mesAno(){const t=new Date,e=t.toLocaleString("default",{month:"long"}),n=t.getFullYear().toString().slice(-2);return`${e}/${n}`}},data(){return{tab:"Empresa",dados:{},links:{},optionsGraficoFluxo3:{},graficoFluxo3:{},optionsGraficoFluxo4:{},graficoFluxo4:{},graficoOpcoesFinanceiro:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1,position:"right"},title:{display:!1,text:"Chart.js Horizontal Bar Chart"}},options:{scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}}},graficoOpcoesFinanceiro2:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1,position:"right"},title:{display:!1,text:"Chart.js Horizontal Bar Chart"}},options:{scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}}}}},methods:{async atualizar(t){this.buscarGruposELinks(),this.dados=JSON.parse((await this.$utils.geeksApi({dash:{funcao:"0A3AB851-7870-485C-A90D-2C4EEFCD6EFD"}})).data.dash),this.montarGraficoFinanceiro(),this.montarGraficoAnaliseMarcas(),t&&t()},montarGraficoFinanceiro(){this.optionsGraficoFluxo3={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"right"}},scales:{xAxes:[{ticks:{callback:function(t,e,n){return Number(t).toLocaleString("pt-br",{minimumFractionDigits:0})}}}]},tooltips:{callbacks:{label:function(t,e){let n=e.datasets[t.datasetIndex].label||"";return n&&(n+=`: ${Number(t.value).toLocaleString("pt-br",{minimumFractionDigits:2})}`),n},title:function(t,e){return t[0].label}}}},this.graficoFluxo3={labels:this.dados.financeiro.map(t=>t.grupo),datasets:[{label:"Sa\xEDda",backgroundColor:"rgba(219, 40, 40, 0.5)",borderColor:"rgb(219, 40, 40)",borderWidth:1,data:this.dados.financeiro.map(t=>t.saida)},{label:"Entrada",backgroundColor:"rgba(33, 186, 69, 0.5)",borderColor:"rgb(33, 186, 69)",borderWidth:1,data:this.dados.financeiro.map(t=>t.entrada)}]}},montarGraficoAnaliseMarcas(){this.optionsGraficoFluxo4={responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{ticks:{callback:function(t,e,n){return Number(t).toLocaleString("pt-br",{minimumFractionDigits:0})}}}]},tooltips:{callbacks:{label:function(t,e){let n=e.datasets[t.datasetIndex].label||"";return n&&(n+=`: ${Number(t.value).toLocaleString("pt-br",{minimumFractionDigits:2})}`),n},title:function(t,e){return t[0].label}}}},this.graficoFluxo4={labels:this.dados.analiseMarcas.map(t=>t.Marca),datasets:[{label:"Compra",backgroundColor:"rgba(219, 40, 40, 0.5)",borderColor:"rgb(219, 40, 40)",borderWidth:1,data:this.dados.analiseMarcas.map(t=>t.compra)},{label:"Venda",backgroundColor:"rgba(33, 186, 69, 0.5)",borderColor:"rgb(33, 186, 69)",borderWidth:1,data:this.dados.analiseMarcas.map(t=>t.venda)},{label:"Estoque",borderWidth:1,data:this.dados.analiseMarcas.map(t=>t.estoque)}]}},async buscarGruposELinks(){const t=(await $utils.geeksApi({ret:{funcao:"099420F9-82D6-4E1B-BEFB-8BA1697B0710",filtros:{},limit:50}})).data.ret;let e=[],n={};t.data.forEach(p=>{e.push(p.grupo);const l=p.grupo;let c=[];c=t.data.filter(function(u){return u.grupo.indexOf(l)!==-1}),n=JSON.parse(`{"${l}": { "grupo": "${l}", "itens": []}}`),c.forEach(u=>{let m={descricao:u.descricao,imagem:u.imagemB64,link:u.link};n[l].itens.push(m)}),this.links=Object.assign(this.links,n)}),console.log(this.links)}},mounted(){$utils.emitter.on("atualizarDashboards",this.atualizar),this.atualizar()},beforeUnmount(){$utils.emitter.off("atualizarDashboards",this.atualizar)}},U={id:"Dashboards",class:"background-dashboards"},W={class:"col-12 col-md"},H={class:"q-pa-md"},J={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},Y={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},K={class:"col-12 col-md"},X={class:"q-pa-md"},Z={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},tt={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},et={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},st={class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}},at={class:"col text-right"},ot={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},lt={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},it={class:"col-12 col-md"},nt={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},rt={class:"col-12 col-md"},dt={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},ct={class:"col-12 col-md"},ut={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},mt={class:"col-12 col-md"},ht={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},pt={class:"col-12 col-md"},xt={class:"q-pa-md"},bt={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},gt={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},ft={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}};function qt(t,e,n,p,l,c){const u=g("BarraTopoDashboards"),m=g("grafico"),x=g("row");return b(),f("div",U,[o(A,{class:"bg-azul-dashboards text-white"},{default:i(()=>[o(u),o(_,{class:"q-px-sm",style:{"min-height":"36px"}},{default:i(()=>[o(E,{modelValue:l.tab,"onUpdate:modelValue":e[0]||(e[0]=a=>l.tab=a),dense:"","indicator-color":"white",color:"white",class:"fit"},{default:i(()=>[o(C,{name:"Empresa",label:c.mesAno},null,8,["label"])]),_:1},8,["modelValue"])]),_:1}),o(S,{class:"q-mx-lg",style:{"border-bottom":"1px solid rgba(255,255,255,.25)"}})]),_:1}),o(z,null,{default:i(()=>[o(D,null,{default:i(()=>[o(I,{modelValue:l.tab,"onUpdate:modelValue":e[1]||(e[1]=a=>l.tab=a),animated:"",class:"bg-transparent q-px-md"},{default:i(()=>[o(B,{name:"Empresa",class:"q-px-none"},{default:i(()=>[o(x,null,{default:i(()=>[s("div",W,[s("div",H,[e[4]||(e[4]=s("h2",{class:"text-subtitle2 text-white"},"Compras x Estoque",-1)),s("div",null,[o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[2]||(e[2]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Compras ",-1)),s("div",J,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.compra,2)),1)]}),_:1}),o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[3]||(e[3]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Estoque ",-1)),s("div",Y,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.estoque,2)),1)]}),_:1})]),o(d,{class:"no-shadow q-pa-md",style:{position:"relative",height:"450px"}},{default:i(()=>[o(m,{id:"graficoFaturamentoAno",type:"horizontalBar",data:l.graficoFluxo4,options:l.optionsGraficoFluxo4,fit:""},null,8,["data","options"])]),_:1})])]),s("div",K,[s("div",X,[e[14]||(e[14]=s("h2",{class:"text-subtitle2 text-white"},"Faturamento",-1)),o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[5]||(e[5]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Vendas ",-1)),s("div",Z,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.venda,2)),1)]}),_:1}),o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[6]||(e[6]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Aguardando faturamento ",-1)),s("div",tt,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.aFaturar,2)),1)]}),_:1}),o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[7]||(e[7]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Faturado ",-1)),s("div",et,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.faturado,2)),1)]}),_:1}),o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[s("small",st,[o(x,null,{default:i(()=>{var h;return[e[8]||(e[8]=s("div",{class:"col"},"Meta",-1)),s("div",at,r((h=l.dados.dash)==null?void 0:h.metaPercentual)+" %",1)]}),_:1})]),s("div",ot,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.metaValor,2)),1)]}),_:1}),o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[9]||(e[9]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Proje\xE7\xE3o ",-1)),s("div",lt,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.faturamentoProjecao,2)),1)]}),_:1}),e[15]||(e[15]=s("h2",{class:"text-subtitle2 text-white"},"Expedi\xE7\xE3o",-1)),o(x,null,{default:i(()=>[s("div",it,[o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[10]||(e[10]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Aguardando estoque ",-1)),s("div",nt,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.aguardandoEstoque,2)),1)]}),_:1})]),s("div",rt,[o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[11]||(e[11]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Expedindo ",-1)),s("div",dt,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.expedindo,2)),1)]}),_:1})])]),_:1}),o(x,null,{default:i(()=>[s("div",ct,[o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[12]||(e[12]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Aguardando entrega ",-1)),s("div",ut,r(t.$filters.numero((a=l.dados.dash)==null?void 0:a.aguardandoEntrega,2)),1)]}),_:1})]),s("div",mt,[o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a,h;return[e[13]||(e[13]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Pedido por dia ",-1)),s("div",ht,r((h=(a=l.dados.dash)==null?void 0:a.pedidoPorDia)!=null?h:"-"),1)]}),_:1})])]),_:1})])]),s("div",pt,[s("div",xt,[e[19]||(e[19]=s("h2",{class:"text-subtitle2 text-white"},"Financeiro",-1)),o(d,{class:"no-shadow q-pa-md",style:{position:"relative",height:"340px"}},{default:i(()=>[o(m,{id:"graficoOpcoesFinanceiro",type:"horizontalBar",data:l.graficoFluxo3,options:l.optionsGraficoFluxo3,fit:""},null,8,["data","options"])]),_:1}),e[20]||(e[20]=s("h2",{class:"text-subtitle2 text-white"},"Inadimpl\xEAncia (Fora o m\xEAs)",-1)),o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[16]||(e[16]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," At\xE9 90 dias ",-1)),s("div",bt,r(t.$filters.numero((a=l.dados.inadimplenciaPorIdade)==null?void 0:a.valor0a90dias,2)),1)]}),_:1}),o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[17]||(e[17]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," De 90 a 120 dias ",-1)),s("div",gt,r(t.$filters.numero((a=l.dados.inadimplenciaPorIdade)==null?void 0:a.valor91a120dias,2)),1)]}),_:1}),o(d,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:i(()=>{var a;return[e[18]||(e[18]=s("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," A mais de 120 dias ",-1)),s("div",ft,r(t.$filters.numero((a=l.dados.inadimplenciaPorIdade)==null?void 0:a.valorMaior120dias,2)),1)]}),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])}var Ft=w(j,[["render",qt],["__scopeId","data-v-631e8a72"]]);export{Ft as default};
