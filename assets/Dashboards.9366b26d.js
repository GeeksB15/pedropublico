import{_ as w,o as g,d as v,w as l,f as a,Q as q,B as t,n as f,e as y,a_ as F,t as d,u as E,h as k,r as _,b3 as C,b4 as S,l as A,E as I,I as D,be as B,bf as z,y as c,H as G,X as P,Y as V}from"./index.353e304f.js";import{_ as Q}from"./Grafico.fee1f49d.js";import{_ as O}from"./b15-white.58ad6516.js";import{_ as $}from"./optidados-white.e4237b1d.js";import"./Chart.22c07124.js";const M={computed:{piscarContador(){return this.contador==="00:00"}},data(){return{dbUsuario:$db.usuario,sistemaPai:"",horario:null,contador:null,actualFullScreenIcon:"fullscreen"}},methods:{IsFullScreenCurrently(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null;return e===null?(this.actualFullScreenIcon="fullscreen_exit",!1):(this.actualFullScreenIcon="fullscreen",!0)},GoInFullscreen(e){console.log("GoInFullscreen"),e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},GoOutFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},abrirFullscreen(){this.IsFullScreenCurrently()?this.GoOutFullscreen():this.GoInFullscreen(document.getElementById("Dashboards"))},alternarMenu(){$db.app.menuVisivel.value=!$db.app.menuVisivel.value},iniciarContador(){let e=6e4;this.contador=new Date(e).toISOString().substring(14,19),this.horario=new Date().toLocaleTimeString(),this.contadorInterval=setInterval(async()=>{e-=1e3,this.contador=new Date(e).toISOString().substring(14,19),e>0||(clearInterval(this.contadorInterval),await new Promise((i,r)=>{$utils.emitter.emit("atualizarDashboards",i)}),this.iniciarContador())},1e3)}},async mounted(){this.sistemaPai=$utils.sistemaPai(),this.iniciarContador()},beforeUnmount(){clearInterval(this.contadorInterval)}},R={style:{height:"30px"}},T={key:0,src:O,alt:"B15",style:{height:"30px"},class:"q-mr-md"},N={key:1,src:$,alt:"Optidados",style:{height:"30px"},class:"q-mr-md"},L={class:"flex justify-between items-center"},j={class:"q-mr-md"};function U(e,i,r,x,o,u){return g(),v(k,{class:"q-px-sm"},{default:l(()=>[a(q,{onClick:u.alternarMenu,icon:"menu",flat:"",round:"",dense:"",color:"white",class:"q-mr-sm"},null,8,["onClick"]),t("div",R,[o.sistemaPai==="b15"?(g(),f("img",T)):y("",!0),o.sistemaPai==="optisoul"?(g(),f("img",N)):y("",!0)]),a(F),t("div",L,[t("div",j,[t("span",null,d(o.horario)+" | ",1),t("span",{class:E(u.piscarContador?"blink":"")},d(o.contador),3)]),a(q,{onClick:u.abrirFullscreen,icon:o.actualFullScreenIcon,flat:"",round:"",dense:"",color:"white"},null,8,["onClick","icon"])])]),_:1})}var W=w(M,[["render",U],["__scopeId","data-v-113c8314"]]);const H={components:{Grafico:Q,BarraTopoDashboards:W},computed:{mesAno(){const e=new Date,i=e.toLocaleString("default",{month:"long"}),r=e.getFullYear().toString().slice(-2);return`${i}/${r}`}},data(){return{tab:"Empresa",dados:{},links:{},optionsGraficoFluxo3:{},graficoFluxo3:{},optionsGraficoFluxo4:{},graficoFluxo4:{},graficoOpcoesFinanceiro:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1,position:"right"},title:{display:!1,text:"Chart.js Horizontal Bar Chart"}},options:{scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}}},graficoOpcoesFinanceiro2:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1,position:"right"},title:{display:!1,text:"Chart.js Horizontal Bar Chart"}},options:{scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}}}}},methods:{async atualizar(e){this.buscarGruposELinks(),this.dados=JSON.parse((await this.$utils.geeksApi({dash:{funcao:"0A3AB851-7870-485C-A90D-2C4EEFCD6EFD"}})).data.dash),this.montarGraficoFinanceiro(),this.montarGraficoAnaliseMarcas(),e&&e()},montarGraficoFinanceiro(){this.optionsGraficoFluxo3={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"right"}},scales:{xAxes:[{ticks:{callback:function(e,i,r){return Number(e).toLocaleString("pt-br",{minimumFractionDigits:0})}}}]},tooltips:{callbacks:{label:function(e,i){let r=i.datasets[e.datasetIndex].label||"";return r&&(r+=`: ${Number(e.value).toLocaleString("pt-br",{minimumFractionDigits:2})}`),r},title:function(e,i){return e[0].label}}}},this.graficoFluxo3={labels:this.dados.financeiro.map(e=>e.grupo),datasets:[{label:"Sa\xEDda",backgroundColor:"rgba(219, 40, 40, 0.5)",borderColor:"rgb(219, 40, 40)",borderWidth:1,data:this.dados.financeiro.map(e=>e.saida)},{label:"Entrada",backgroundColor:"rgba(33, 186, 69, 0.5)",borderColor:"rgb(33, 186, 69)",borderWidth:1,data:this.dados.financeiro.map(e=>e.entrada)}]}},montarGraficoAnaliseMarcas(){this.optionsGraficoFluxo4={responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{ticks:{callback:function(e,i,r){return Number(e).toLocaleString("pt-br",{minimumFractionDigits:0})}}}]},tooltips:{callbacks:{label:function(e,i){let r=i.datasets[e.datasetIndex].label||"";return r&&(r+=`: ${Number(e.value).toLocaleString("pt-br",{minimumFractionDigits:2})}`),r},title:function(e,i){return e[0].label}}}},this.graficoFluxo4={labels:this.dados.analiseMarcas.map(e=>e.Marca),datasets:[{label:"Compra",backgroundColor:"rgba(219, 40, 40, 0.5)",borderColor:"rgb(219, 40, 40)",borderWidth:1,data:this.dados.analiseMarcas.map(e=>e.compra)},{label:"Venda",backgroundColor:"rgba(33, 186, 69, 0.5)",borderColor:"rgb(33, 186, 69)",borderWidth:1,data:this.dados.analiseMarcas.map(e=>e.venda)},{label:"Estoque",borderWidth:1,data:this.dados.analiseMarcas.map(e=>e.estoque)}]}},async buscarGruposELinks(){const e=(await $utils.geeksApi({ret:{funcao:"099420F9-82D6-4E1B-BEFB-8BA1697B0710",filtros:{},limit:50}})).data.ret;let i=[],r={};e.data.forEach(x=>{i.push(x.grupo);const o=x.grupo;let u=[];u=e.data.filter(function(h){return h.grupo.indexOf(o)!==-1}),r=JSON.parse(`{"${o}": { "grupo": "${o}", "itens": []}}`),u.forEach(h=>{let m={descricao:h.descricao,imagem:h.imagemB64,link:h.link};r[o].itens.push(m)}),this.links=Object.assign(this.links,r)}),console.log(this.links)}},mounted(){$utils.emitter.on("atualizarDashboards",this.atualizar),this.atualizar()},beforeUnmount(){$utils.emitter.off("atualizarDashboards",this.atualizar)}},n=e=>(P("data-v-631e8a72"),e=e(),V(),e),J={id:"Dashboards",class:"background-dashboards"},Y={class:"col-12 col-md"},X={class:"q-pa-md"},K=n(()=>t("h2",{class:"text-subtitle2 text-white"},"Compras x Estoque",-1)),Z=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Compras ",-1)),ee={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},te=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Estoque ",-1)),se={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},ae={class:"col-12 col-md"},oe={class:"q-pa-md"},le=n(()=>t("h2",{class:"text-subtitle2 text-white"},"Faturamento",-1)),ie=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Vendas ",-1)),ne={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},re=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Aguardando faturamento ",-1)),de={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},ce=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Faturado ",-1)),ue={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},he={class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}},me=n(()=>t("div",{class:"col"},"Meta",-1)),pe={class:"col text-right"},xe={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},be=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Proje\xE7\xE3o ",-1)),ge={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},_e=n(()=>t("h2",{class:"text-subtitle2 text-white"},"Expedi\xE7\xE3o",-1)),fe={class:"col-12 col-md"},qe=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Aguardando estoque ",-1)),ye={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},we={class:"col-12 col-md"},ke=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Expedindo ",-1)),ve={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},Fe={class:"col-12 col-md"},Ee=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Aguardando entrega ",-1)),Ce={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},Se={class:"col-12 col-md"},Ae=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," Pedido por dia ",-1)),Ie={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},De={class:"col-12 col-md"},Be={class:"q-pa-md"},ze=n(()=>t("h2",{class:"text-subtitle2 text-white"},"Financeiro",-1)),Ge=n(()=>t("h2",{class:"text-subtitle2 text-white"},"Inadimpl\xEAncia (Fora o m\xEAs)",-1)),Pe=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," At\xE9 90 dias ",-1)),Ve={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},Qe=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," De 90 a 120 dias ",-1)),Oe={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}},$e=n(()=>t("small",{class:"text-body1 text-white text-weight-regular q-block q-ma-none q-pa-none",style:{display:"block"}}," A mais de 120 dias ",-1)),Me={class:"text-h5 text-weight-bold text-right text-white q-mt-sm q-pb-none",style:{"line-height":"22px"}};function Re(e,i,r,x,o,u){const h=_("BarraTopoDashboards"),m=_("grafico"),b=_("row");return g(),f("div",J,[a(I,{class:"bg-azul-dashboards text-white"},{default:l(()=>[a(h),a(k,{class:"q-px-sm",style:{"min-height":"36px"}},{default:l(()=>[a(C,{modelValue:o.tab,"onUpdate:modelValue":i[0]||(i[0]=s=>o.tab=s),dense:"","indicator-color":"white",color:"white",class:"fit"},{default:l(()=>[a(S,{name:"Empresa",label:u.mesAno},null,8,["label"])]),_:1},8,["modelValue"])]),_:1}),a(A,{class:"q-mx-lg",style:{"border-bottom":"1px solid rgba(255,255,255,.25)"}})]),_:1}),a(G,null,{default:l(()=>[a(D,null,{default:l(()=>[a(B,{modelValue:o.tab,"onUpdate:modelValue":i[1]||(i[1]=s=>o.tab=s),animated:"",class:"bg-transparent q-px-md"},{default:l(()=>[a(z,{name:"Empresa",class:"q-px-none"},{default:l(()=>[a(b,null,{default:l(()=>[t("div",Y,[t("div",X,[K,t("div",null,[a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[Z,t("div",ee,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.compra,2)),1)]}),_:1}),a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[te,t("div",se,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.estoque,2)),1)]}),_:1})]),a(c,{class:"no-shadow q-pa-md",style:{position:"relative",height:"450px"}},{default:l(()=>[a(m,{id:"graficoFaturamentoAno",type:"horizontalBar",data:o.graficoFluxo4,options:o.optionsGraficoFluxo4,fit:""},null,8,["data","options"])]),_:1})])]),t("div",ae,[t("div",oe,[le,a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[ie,t("div",ne,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.venda,2)),1)]}),_:1}),a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[re,t("div",de,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.aFaturar,2)),1)]}),_:1}),a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[ce,t("div",ue,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.faturado,2)),1)]}),_:1}),a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[t("small",he,[a(b,null,{default:l(()=>{var p;return[me,t("div",pe,d((p=o.dados.dash)==null?void 0:p.metaPercentual)+" %",1)]}),_:1})]),t("div",xe,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.metaValor,2)),1)]}),_:1}),a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[be,t("div",ge,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.faturamentoProjecao,2)),1)]}),_:1}),_e,a(b,null,{default:l(()=>[t("div",fe,[a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[qe,t("div",ye,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.aguardandoEstoque,2)),1)]}),_:1})]),t("div",we,[a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[ke,t("div",ve,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.expedindo,2)),1)]}),_:1})])]),_:1}),a(b,null,{default:l(()=>[t("div",Fe,[a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[Ee,t("div",Ce,d(e.$filters.numero((s=o.dados.dash)==null?void 0:s.aguardandoEntrega,2)),1)]}),_:1})]),t("div",Se,[a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s,p;return[Ae,t("div",Ie,d((p=(s=o.dados.dash)==null?void 0:s.pedidoPorDia)!=null?p:"-"),1)]}),_:1})])]),_:1})])]),t("div",De,[t("div",Be,[ze,a(c,{class:"no-shadow q-pa-md",style:{position:"relative",height:"340px"}},{default:l(()=>[a(m,{id:"graficoOpcoesFinanceiro",type:"horizontalBar",data:o.graficoFluxo3,options:o.optionsGraficoFluxo3,fit:""},null,8,["data","options"])]),_:1}),Ge,a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[Pe,t("div",Ve,d(e.$filters.numero((s=o.dados.inadimplenciaPorIdade)==null?void 0:s.valor0a90dias,2)),1)]}),_:1}),a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[Qe,t("div",Oe,d(e.$filters.numero((s=o.dados.inadimplenciaPorIdade)==null?void 0:s.valor91a120dias,2)),1)]}),_:1}),a(c,{class:"no-shadow q-px-sm q-py-xs q-my-md glassEffect"},{default:l(()=>{var s;return[$e,t("div",Me,d(e.$filters.numero((s=o.dados.inadimplenciaPorIdade)==null?void 0:s.valorMaior120dias,2)),1)]}),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])}var We=w(H,[["render",Re],["__scopeId","data-v-631e8a72"]]);export{We as default};
