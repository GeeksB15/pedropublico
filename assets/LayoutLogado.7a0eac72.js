import{_ as k,aS as G,r as c,o as l,n as m,s as L,F as v,d as h,w as r,f as a,at as I,z as V,S as P,j as B,k as f,t as w,R as E,aE as p,O as g,l as N,T as y,e as $,E as D,I as S,B as C,H as Q,bc as O,L as F,h as j,q as J,J as T,Q as U,b5 as A,G as x,bd as M}from"./index.353e304f.js";const R={name:"MenuGeradorItem",computed:{sincronismoStatus(){return G.status}},data(){return{}},methods:{repete_evento(e){this.$emit("menuClick",e)},menuClick(e){this.$lodash.get(e,"rota.name")==="Plataforma15"&&(e=JSON.parse(JSON.stringify(e.rota.params)),this.$emit("menuClick",e))}},props:{itens:{default:()=>[],type:Array}},emits:["menuClick"]};function z(e,t,n,d,s,i){const u=c("menu-gerador-item",!0);return l(!0),m(v,null,L(n.itens.filter(o=>o.mostrar),o=>(l(),m(v,{key:o.id},[e.$lodash.get(o,"filhos.length")?(l(),h(V,{key:0,onClick:I(b=>i.menuClick(o),["stop"]),icon:o.icone||"label",label:o.descricao,to:o.rota,duration:160,dense:"",class:"text-tertiary submenuGeradorItem"},{default:r(()=>[a(u,{onMenuClick:i.repete_evento,itens:o.filhos},null,8,["onMenuClick","itens"])]),_:2},1032,["onClick","icon","label","to"])):(l(),h(E,{key:1,onClick:I(b=>i.menuClick(o),["stop"]),to:o.rota,clickable:"",dense:"",class:"text-tertiary menuGeradorItem"},{default:r(()=>[a(P,{avatar:""},{default:r(()=>[a(B,{name:o.icone||"label",size:"sm"},null,8,["name"])]),_:2},1024),a(P,null,{default:r(()=>[f(w(o.descricao),1)]),_:2},1024)]),_:2},1032,["onClick","to"]))],64))),128)}var H=k(R,[["render",z]]);const W={components:{MenuGeradorItem:H},data(){return{carregando:!1,menuPrincipal:[],menuDesenvolvimento:[]}},methods:{menuClick(e){this.$emit("menuClick",e)},marcar(e){e.forEach(t=>{if((t.filhos||[]).length&&this.marcar(t.filhos),(t.descricao||"").toLowerCase().search(this.termoBusca)!==-1){t.mostrar=!0;return}t.mostrar=!!(t.filhos||[]).find(n=>n.mostrar)})},gerarIds(e){e.forEach(t=>{(t.filhos||[]).length&&this.gerarIds(t.filhos),this.$lodash.get(t,"rota.name")==="Plataforma15"&&this.$lodash.set(t,"rota.params.id",this.$utils.uuid())})}},props:{termoBusca:{type:String}},emits:["menuClick"],watch:{termoBusca(){this.marcar(this.menuPrincipal),this.marcar(this.menuDesenvolvimento)}},async created(){try{this.carregando=!0;let e=await p.permissao.menu();this.marcar(e),this.gerarIds(e),this.menuPrincipal=e.filter(d=>{if(!this.$q.platform.is.mobile||!/\/plataforma15\//.test((d.rota||{}).path))return!0});const t=!!p.usuario.logado.desenvolvedor&&p.usuario.logado.desenvolvedor();let n=t?await p.permissao.menu(!0):[];this.marcar(n),this.gerarIds(n),this.menuDesenvolvimento=t?[...n,{descricao:"Desenvolvedor",icone:"build",id:$utils.uuid(),mostrar:!0,rota:{name:"Desenvolvedor"}}]:[]}catch(e){this.$q.notifyError("Erro ao obter permiss\xF5es",e)}finally{this.carregando=!1}}};function Y(e,t,n,d,s,i){const u=c("MenuGeradorItem");return s.menuPrincipal.length?(l(),m(v,{key:0},[a(g,{class:"geradorItem text-tertiary"},{default:r(()=>[a(u,{itens:s.menuPrincipal,onMenuClick:i.menuClick},null,8,["itens","onMenuClick"])]),_:1}),a(N,{class:"q-my-sm q-mx-md"}),s.menuDesenvolvimento.length?(l(),h(g,{key:0,class:"geradorItem text-tertiary"},{default:r(()=>[a(y,{header:""},{default:r(()=>[f("Menu Desenvolvimento")]),_:1}),a(u,{itens:s.menuDesenvolvimento,onMenuClick:i.menuClick},null,8,["itens","onMenuClick"])]),_:1})):$("",!0)],64)):s.carregando?(l(),h(g,{key:1},{default:r(()=>[a(y,null,{default:r(()=>[f(" Carregando... ")]),_:1})]),_:1})):(l(),h(g,{key:2},{default:r(()=>[a(y,null,{default:r(()=>[f(" Ops! Parece que voc\xEA n\xE3o possui permiss\xF5es de acesso. ")]),_:1})]),_:1}))}var K=k(W,[["render",Y]]);const X={data(){return{carregando:!1}},methods:{async menuClick(e){$q.loading.show(),await $utils.dormir(250);const t=new Date;for(this.carregando||(this.carregando=!0,localStorage.setItem("plat15message",""),await new Promise(async(n,d)=>{for(;localStorage.getItem("plat15message","")===""&&new Date-t<1e4;)await $utils.dormir(500);n()})),localStorage.setItem("plat15message",""),this.$refs.quadro.contentWindow.postMessage({objeto:e.objeto},"*");localStorage.getItem("plat15message","")===""&&new Date-t<1e4;)await $utils.dormir(500);$q.loading.hide()}},mounted(){}},Z={id:"Plataforma15"},ee={key:0},ae={class:"Plataforma15-quadro",ref:"quadro",src:"/statics/plat15/Index.html",frameborder:"0",style:{position:"relative","min-height":"calc(100vh - 64px)!important",height:"calc(100vh - 64px)!important","max-height":"calc(100vh - 64px)!important"}};function te(e,t,n,d,s,i){const u=c("barraTopo");return l(),m("div",Z,[a(D,{elevated:"",class:"bg-gradiente text-white"},{default:r(()=>[a(u)]),_:1}),a(Q,{style:{"padding-top":"56px"}},{default:r(()=>[a(S,null,{default:r(()=>[s.carregando?(l(),m("div",ee,[C("iframe",ae,null,512)])):$("",!0)]),_:1})]),_:1})])}var re=k(X,[["render",te]]);const oe={components:{MenuGerador:K,Plataforma15:re},computed:{termoBuscaInLowerCase(){return(this.termoBusca||"").toLowerCase()}},data(){return{sistemaPai:O(),dbUsuario:$db.usuario,rota:"",start:!1,menuPrincipal:p.app.menuVisivel,termoBusca:""}},methods:{async menuClick(e){this.$refs.Plataforma15.menuClick(e)},whatsappAbrir(){const e=encodeURI(`Ol\xE1 sou ${this.dbUsuario.logado.nome} (${localStorage.getItem("bancoDeDados")}), e preciso de suporte!`);window.open("https://api.whatsapp.com/send?phone=551621116161&text="+e,"_blank")}},mounted(){this.$route.name==="Plataforma15"&&!this.$route.redirectedFrom&&this.$refs.Plataforma15.menuClick(JSON.parse(JSON.stringify(this.$route.params)))}},se={class:"text-weight-medium float-left"},ne={key:0},le={class:"text-weight-bold float-right"};function ie(e,t,n,d,s,i){const u=c("MenuGerador"),o=c("g-label"),b=c("Plataforma15"),q=c("router-view");return l(),m(v,null,[a(A,{modelValue:s.menuPrincipal,"onUpdate:modelValue":t[2]||(t[2]=_=>s.menuPrincipal=_),elevated:"",behavior:"mobile",side:"left"},{default:r(()=>[a(F,{view:"hHh LpR lFr"},{default:r(()=>[a(D,null,{default:r(()=>[a(j,{class:"bg-white q-py-sm q-px-md border-bottom"},{default:r(()=>[a(J,{modelValue:s.termoBusca,"onUpdate:modelValue":t[0]||(t[0]=_=>s.termoBusca=_),debounce:300,placeholder:"Filtrar",color:"none","clear-icon":"close",clearable:"",outlined:"",dense:""},{prepend:r(()=>[a(B,{name:"mdi-filter"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(Q,null,{default:r(()=>[a(S,null,{default:r(()=>[a(u,{termoBusca:i.termoBuscaInLowerCase,onMenuClick:i.menuClick},null,8,["termoBusca","onMenuClick"])]),_:1})]),_:1}),a(T,{class:"bg-white border-top"},{default:r(()=>[a(o,{color:"text-tertiary",class:"q-py-xs q-px-sm"},{default:r(()=>[C("small",se,[f(" \xA9"+w(new Date().getFullYear())+" | B15",1),s.sistemaPai==="optisoul"?(l(),m("span",ne," Optidados")):$("",!0)]),C("small",le,w(e.$db.app.versao.value),1)]),_:1}),a(U,{onClick:t[1]||(t[1]=_=>i.whatsappAbrir()),icon:"contact_support",label:"Ajuda / Suporte",unelevated:"",dense:"",color:"primary",class:"fit",style:{"text-transform":"capitalize"}})]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(a(b,{ref:"Plataforma15"},null,512),[[M,e.$route.name==="Plataforma15"]]),x(a(q,null,null,512),[[M,e.$route.name!=="Plataforma15"]])],64)}var ce=k(oe,[["render",ie]]);export{ce as default};
