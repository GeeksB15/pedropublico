import{_ as Q,b8 as mo,b9 as K,ba as Y,p as _,o as h,i as C,w as s,f as t,s as I,M as X,B as O,C as j,D as b,L as M,E as L,e as y,z as G,x as d,l as T,d as v,F as q,r as A,t as k,y as Z,N as po,P as B,R as F,S as P,Q as W,bb as ho,j as V,bc as eo,bd as $,Y as fo,Z as bo,be as go,bf as Co,bg as vo,bh as Vo,bi as oo,a8 as _o,k as D,a6 as E,a9 as H,bj as J,q as To,T as R,b2 as yo,b3 as x,bk as wo,bl as N,a4 as ko,a7 as S,h as So,I as qo}from"./index.88955961.js";import{I as Eo}from"./Icone.afe174ba.js";import{S as Uo,a as Po}from"./SeletorPais.4a2267e1.js";import{o as Ao}from"./open-url.de6258fb.js";const Do={computed:{metaDados(){return mo}},data(){return{contatoTmp:{},enderecoTmp:{},selecionarCertificado:!1,certificadoPadrao:"07660198000189 35 SP;",certificado:"",opcoesCertificados:[],cnpj:"",uf:"",erros:[],show:!1}},methods:{async consultarCadastroBrasilAPI(){const a=`https://brasilapi.com.br/api/cnpj/v1/${this.cnpj}`,e=await fetch(a),n=await e.json();if(!e.ok)throw new Error("N\xE3o foi poss\xEDvel realizar a consulta no Brasil API");let c=n.data_inicio_atividade;c&&(c=new Date(c),c=new Date(c.setDate(c.getDate()+1)),c=c.toJSON()),this.limpar(),this.contatoTmp.nome=n.razao_social,this.contatoTmp.apelido=n.nome_fantasia,this.contatoTmp.numeroDocumentoEstadual="",this.contatoTmp.regime=n.opcao_pelo_simples?"SIMPLES NACIONAL":"NORMAL",this.contatoTmp.dataAbertura=c,this.contatoTmp.situacao=n.descricao_situacao_cadastral,this.enderecoTmp.cep=n.cep||"",this.enderecoTmp.numero=n.numero||"",this.enderecoTmp.complemento=n.complemento||"",this.enderecoTmp.pais="Brasil",this.enderecoTmp.codigoPais=1058;try{const i=(await $utils.buscarEndereco(this.enderecoTmp.cep)).data;if(this.enderecoTmp.bairro=i.bairro,this.enderecoTmp.ibgeCod=i.ibge,this.enderecoTmp.logradouro=i.logradouro,this.enderecoTmp.municipio=i.localidade,this.enderecoTmp.uf=i.uf,this.enderecoTmp.ufCod=$utils.mapearEstadoCodigo[i.uf],this.enderecoTmp.complemento||(this.enderecoTmp.complemento=i.complemento),i.ibge){const u=await $db.cidade.le({cidadeCodIbge:i.ibge.toString(),ativo:!0});this.enderecoTmp.cidadeCodChave=(u.find(r=>r.cod)||{}).cod}}catch{this.enderecoTmp.uf=n.uf||"",this.enderecoTmp.municipio=n.municipio||"",this.enderecoTmp.logradouro=((n.descricao_tipo_logradouro||"")+" "+(n.logradouro||"")).trim(),this.enderecoTmp.bairro=n.bairro}this.show=!0},async consultarCadastroSefaz(){let a="";this.opcoesCertificados=[];const n=(await $erp().empresa.toArray()).filter(r=>r.idContato).map(r=>r.idContato),c=await $erp().contato.where("id").anyOf(n).toArray(),o=await $erp().contatoEndereco.where("idContato").anyOf(n).toArray();for(const r of c){const g=o.filter(U=>U.idContato===r.id);let p=g.find(U=>U.grupo==="Principal");p||(p=g[0]);const w=this.$utils.filtrarDigitos(r.numeroDocumentoNacional),z=String(this.$utils.mapearEstadoCodigo[p.uf]);if(w.length===14&&z.length===2&&p.uf.length===2){const U=w+" "+z+" "+p.uf+";";a+=U,this.opcoesCertificados.push({valor:U,rotulo:r.apelido,sublabel:r.numeroDocumentoNacional})}}this.opcoesCertificados.push({valor:this.certificadoPadrao,rotulo:""}),a+=this.certificadoPadrao;const i=K.consultarCadastroContribuinte(this.cnpj,""),u=await Y.consultarCadastroContribuinte(a,i,this.cnpj);if(u.status==="Erro")throw u.mensagem&&(this.erros=u.mensagem.split(`
`)),new Error("N\xE3o foi poss\xEDvel realizar a consulta no Sefaz");await this.preencherTemplateDadosSefaz(u.xml)},async consultarCadastroSefazCertificado(){try{$q.loading.show({message:"Consultando cadastro de CNPJ"});const a=K.consultarCadastroContribuinte(this.cnpj,this.uf),e=await Y.consultarCadastroContribuinte(this.certificado,a,this.cnpj);if(e.status==="Erro"){e.mensagem&&(this.erros=e.mensagem.split(`
`));return}await this.preencherTemplateDadosSefaz(e.xml),$q.notifyPositive("Consulta realizada pelo Certificado Digital")}finally{$q.loading.hide()}},async consultar(a){try{if($q.loading.show({message:"Consultando cadastro de CNPJ"}),this.cnpj=a.replace(/[^\d]/g,""),!$utils.validarDocumentoNacional(this.cnpj)){let e=function(n,c,o,i,u,r){return r?c+"."+o+"."+i+"/"+u+"-"+r:u?c+"."+o+"."+i+"/"+u:i?c+"."+o+"."+i:o?c+"."+o:c};throw this.cnpj=this.cnpj.replace(/(\d{0,2})(\d{0,3})(\d{0,3})(\d{0,4})(\d{0,2})$/,e),new Error(`CNPJ ${this.cnpj} inv\xE1lido`)}try{await this.consultarCadastroSefaz(),$q.notifyPositive("Consulta realizada pelo cadastro na SEFAZ");return}catch(e){console.log(e.message)}try{await this.consultarCadastroBrasilAPI(),$q.notifyPositive("Consulta realizada pela Brasil API");return}catch(e){console.log(e.message)}this.certificado=this.certificadoPadrao,this.uf=(this.opcoesCertificados[0].valor||"").substr(18,2),this.selecionarCertificado=!0,this.show=!0}catch(e){throw new Error(e)}finally{$q.loading.hide()}},limpar(){this.contatoTmp={},this.enderecoTmp=[],this.selecionarCertificado=!1},async preencherTemplateDadosSefaz(a){const c=new DOMParser().parseFromString(a,"application/xml").getElementsByTagName("infCons")[0].getElementsByTagName("infCad")[0],o=c.getElementsByTagName("ender")[0],i=(u,r)=>(u.getElementsByTagName(r)[0]||{}).innerHTML||"";this.limpar(),this.contatoTmp.apelido=i(c,"xFant")||i(c,"xNome"),this.contatoTmp.nome=i(c,"xNome"),this.contatoTmp.numeroDocumentoEstadual=i(c,"IE"),this.contatoTmp.regime=i(c,"xRegApur"),this.contatoTmp.dataAbertura=i(c,"dIniAtiv"),this.contatoTmp.situacao=i(c,"cSit")>0?"ATIVA":"BAIXADA",this.enderecoTmp.bairro=i(o,"xBairro"),this.enderecoTmp.cep=i(o,"CEP").padStart(8,"0").replace(/(\d{5})(\d{3})/g,"$1-$2"),this.enderecoTmp.complemento=i(o,"xCpl"),this.enderecoTmp.ibgeCod=i(o,"cMun"),this.enderecoTmp.logradouro=i(o,"xLgr"),this.enderecoTmp.municipio=i(o,"xMun"),this.enderecoTmp.numero=i(o,"nro"),this.enderecoTmp.uf=i(c,"UF"),this.enderecoTmp.pais="Brasil",this.enderecoTmp.codigoPais=1058;try{const r=(await $utils.buscarEndereco(this.enderecoTmp.cep)).data;if(this.enderecoTmp.bairro=r.bairro,this.enderecoTmp.ibgeCod=r.ibge,this.enderecoTmp.logradouro=r.logradouro,this.enderecoTmp.municipio=r.localidade,this.enderecoTmp.uf=r.uf,this.enderecoTmp.ufCod=$utils.mapearEstadoCodigo[r.uf],this.enderecoTmp.complemento||(this.enderecoTmp.complemento=r.complemento),r.ibge){const g=await $db.cidade.le({cidadeCodIbge:r.ibge.toString(),ativo:!0});this.enderecoTmp.cidadeCodChave=(g.find(p=>p.cod)||{}).cod}}catch(u){console.error(u)}this.show=!0},salvar(){var n;this.contato.apelido=this.contatoTmp.apelido||this.contatoTmp.nome,this.contato.nome=this.contatoTmp.nome,this.contato.numeroDocumentoEstadual=this.contatoTmp.numeroDocumentoEstadual,this.contato.dataAbertura=this.contatoTmp.dataAbertura,this.contato.observacao=`${this.contatoTmp.situacao} | `+((n=this.contato.observacao)!=null?n:""),this.contato.regime=this.contatoTmp.regime.includes("SIMPLES NACIONAL")?"SimplesNacional":"Normal";const a=this.endereco.find(c=>c.bairro===this.enderecoTmp.bairro&&c.cep===this.enderecoTmp.cep&&c.complemento===this.enderecoTmp.complemento&&c.ibgeCod===this.enderecoTmp.ibgeCod&&c.logradouro===this.enderecoTmp.logradouro&&c.municipio===this.enderecoTmp.municipio&&c.numero===this.enderecoTmp.numero&&c.uf===this.enderecoTmp.uf),e=this.endereco.find(c=>c.grupo==="Principal");a||this.endereco.push({...this.enderecoTmp,grupo:e?void 0:"Principal",id:$utils.uuid(),idContato:this.contato.id}),this.show=!1}},props:{contato:Object,endereco:Array}},xo={class:"q-px-lg q-py-md"},No={class:"row q-col-gutter-x-sm"},Fo={class:"row q-col-gutter-x-sm"},Ro=d("div",{class:"row q-mt-lg q-mb-sm q-ml-sm text-subtitle1"},"Endere\xE7o",-1),Oo={class:"row q-col-gutter-x-sm q-ml-xs"},Lo={class:"row justify-end"},Io={class:"q-px-lg q-py-md"},jo={class:"row justify-end"};function zo(a,e,n,c,o,i){const u=_("campo");return h(),C(Z,{modelValue:o.show,"onUpdate:modelValue":e[16]||(e[16]=r=>o.show=r),"content-css":{maxWidth:"800px"}},{default:s(()=>[t(I,null,{default:s(()=>[t(X,null,{default:s(()=>[t(O,null,{default:s(()=>[j(t(b,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[M]]),t(L,null,{default:s(()=>[y("Cadastro CNPJ")]),_:1})]),_:1}),o.selecionarCertificado?T("",!0):(h(),C(G,{key:0,onSubmit:i.salvar},{default:s(()=>[d("div",xo,[t(u,{modelValue:o.contatoTmp.nome,"onUpdate:modelValue":e[0]||(e[0]=r=>o.contatoTmp.nome=r),"somente-leitura":"",class:"row",rotulo:"Raz\xE3o social"},null,8,["modelValue"]),t(u,{modelValue:o.contatoTmp.apelido,"onUpdate:modelValue":e[1]||(e[1]=r=>o.contatoTmp.apelido=r),"somente-leitura":"",class:"row",rotulo:"Fantasia"},null,8,["modelValue"]),d("div",No,[t(u,{modelValue:o.contatoTmp.numeroDocumentoEstadual,"onUpdate:modelValue":e[2]||(e[2]=r=>o.contatoTmp.numeroDocumentoEstadual=r),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"IE"},null,8,["modelValue"]),t(u,{modelValue:o.contatoTmp.dataAbertura,"onUpdate:modelValue":e[3]||(e[3]=r=>o.contatoTmp.dataAbertura=r),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Data de abertura",tipo:"data"},null,8,["modelValue"])]),d("div",Fo,[t(u,{modelValue:o.contatoTmp.regime,"onUpdate:modelValue":e[4]||(e[4]=r=>o.contatoTmp.regime=r),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Regime"},null,8,["modelValue"]),t(u,{modelValue:o.contatoTmp.situacao,"onUpdate:modelValue":e[5]||(e[5]=r=>o.contatoTmp.situacao=r),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Situa\xE7\xE3o"},null,8,["modelValue"])]),Ro,d("div",Oo,[t(u,{modelValue:o.enderecoTmp.cep,"onUpdate:modelValue":e[6]||(e[6]=r=>o.enderecoTmp.cep=r),"somente-leitura":"",class:"col-6 col-sm-4",rotulo:"CEP",mask:"#####-###"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.uf,"onUpdate:modelValue":e[7]||(e[7]=r=>o.enderecoTmp.uf=r),"somente-leitura":"",class:"col-2 col-sm-2",rotulo:"UF"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.municipio,"onUpdate:modelValue":e[8]||(e[8]=r=>o.enderecoTmp.municipio=r),"somente-leitura":"",class:"col-10 col-sm-6",rotulo:"Cidade",ajuda:o.enderecoTmp.ibgeCod?"C\xF3digo IBGE: "+o.enderecoTmp.ibgeCod:""},null,8,["modelValue","ajuda"]),t(u,{modelValue:o.enderecoTmp.logradouro,"onUpdate:modelValue":e[9]||(e[9]=r=>o.enderecoTmp.logradouro=r),"somente-leitura":"",class:"col-12 col-sm-7",rotulo:"Endere\xE7o"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.numero,"onUpdate:modelValue":e[10]||(e[10]=r=>o.enderecoTmp.numero=r),"somente-leitura":"",class:"col-12 col-sm-2",rotulo:"N\xFAmero"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.complemento,"onUpdate:modelValue":e[11]||(e[11]=r=>o.enderecoTmp.complemento=r),"somente-leitura":"",class:"col-12 col-sm-3",rotulo:"Complemento"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.bairro,"onUpdate:modelValue":e[12]||(e[12]=r=>o.enderecoTmp.bairro=r),"somente-leitura":"",class:"col-12 col-sm-6",rotulo:"Bairro"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.pais,"onUpdate:modelValue":e[13]||(e[13]=r=>o.enderecoTmp.pais=r),"somente-leitura":"",class:"col-12 col-sm-6",rotulo:"Pa\xEDs"},null,8,["modelValue"])])]),t(O,{color:"light"},{default:s(()=>[t(L,null,{default:s(()=>[d("div",Lo,[j(t(b,{flat:"",color:"tertiary",label:"Cancelar"},null,512),[[M]]),t(b,{unelevated:"",color:"primary",type:"submit",label:"Confirmar"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])),o.selecionarCertificado?(h(),C(G,{key:1,onSubmit:i.consultarCadastroSefazCertificado},{default:s(()=>[d("div",Io,[(h(!0),v(q,null,A(o.erros,(r,g)=>(h(),v("div",{class:"row q-py-xs text-negative",key:g},k(r),1))),128)),t(u,{modelValue:o.certificado,"onUpdate:modelValue":e[14]||(e[14]=r=>o.certificado=r),class:"row q-mt-md",rotulo:"Certificado",tipo:"seletor",opcoes:o.opcoesCertificados},null,8,["modelValue","opcoes"]),t(u,{modelValue:o.uf,"onUpdate:modelValue":e[15]||(e[15]=r=>o.uf=r),class:"row",rotulo:"UF do Sefaz para consulta",tipo:"seletor",opcoes:i.metaDados.infNFe.emit.enderEmit.UF._enumeration},null,8,["modelValue","opcoes"])]),t(O,{color:"light"},{default:s(()=>[t(L,null,{default:s(()=>[d("div",jo,[t(b,{flat:"",color:"primary",type:"submit",label:"Nova consulta"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])):T("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Bo=Q(Do,[["render",zo]]);const Mo={computed:{registrosEncontrados(){return!!this.itens.length}},data(){return{itens:[],redeSocialCampo:"",visivel:!1,idContato:""}},methods:{adicionar(){this.redeSocialErro=!1,this.redeSocialErroDescricao="";const a=this.redeSocialCampo.toLowerCase();if(!a)return!1;if(this.itens.find(e=>e.link===a))return this.redeSocialErro=!0,this.redeSocialErroDescricao="Rede social j\xE1 cadastrada.",!1;try{this.itens.push({...$utils.analisarRedeSocialLink(a),id:$utils.uuid(),idContato:this.idContato}),this.redeSocialCampo=""}catch{this.redeSocialErro=!0,this.redeSocialErroDescricao="Insira uma URL v\xE1lida."}},remover(a){this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar voc\xEA ir\xE1 remover esta rede social.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{a>=0&&(this.termo=this.itens[a].link,this.itens.splice(a,1))})},onHide(){this.resolve(this.itens)},onShow(){this.$refs.redeSocialCampo.focus()},async show(a){return this.itens=a.itens,this.idContato=a.idContato,this.visivel=!0,new Promise((e,n)=>{this.resolve=e})}}};function Qo(a,e,n,c,o,i){return h(),C(Z,{modelValue:o.visivel,"onUpdate:modelValue":e[1]||(e[1]=u=>o.visivel=u),onHide:e[2]||(e[2]=u=>i.onHide()),onShow:e[3]||(e[3]=u=>i.onShow()),"content-css":"{ minWidth: '80vw' }"},{default:s(()=>[t(I,null,{default:s(()=>[t(O,{class:"bg-primary text-white"},{default:s(()=>[t(L,null,{default:s(()=>[y("Redes Sociais")]),_:1}),j(t(b,{dense:"",flat:"",icon:"close",round:""},null,512),[[M]])]),_:1}),t(X,null,{default:s(()=>[t(po,{"no-border":"",separator:""},{default:s(()=>[(h(!0),v(q,null,A(o.itens,(u,r)=>(h(),C(B,{class:"animate-pop q-px-none",key:r},{default:s(()=>[t(F,null,{default:s(()=>[y(k(u.tipo),1),t(P,null,{default:s(()=>[y(k(u.link),1)]),_:2},1024)]),_:2},1024),t(P,null,{default:s(()=>[t(b,{color:"negative",size:"xs",icon:"remove",outline:"",round:"",onClick:g=>i.remover(r)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(W,{color:"green",placeholder:"Insira a URL aqui.",type:"url",modelValue:o.redeSocialCampo,"onUpdate:modelValue":e[0]||(e[0]=u=>o.redeSocialCampo=u),ref:"redeSocialCampo",onKeyup:ho(i.adicionar,["enter"])},{append:s(()=>[t(V,{name:"done",onClick:i.adicionar,class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Ho=Q(Mo,[["render",Qo]]);const Jo={data(){return{visivel:!1}},methods:{trocarFoto(a){eo(a[0],{crop:!0,outputFormat:"jpg",targetHeight:200,targetWidth:200},(e,n)=>{this.resolve(n),this.visivel=!1})},onHide(){this.resolve()},async show(){return this.visivel=!0,new Promise((a,e)=>{this.resolve=a})}},props:{modelValue:{type:String}}};function Go(a,e,n,c,o,i){return h(),C(Z,{modelValue:o.visivel,"onUpdate:modelValue":e[0]||(e[0]=u=>o.visivel=u),onHide:e[1]||(e[1]=u=>i.onHide())},{default:s(()=>[t(I,null,{default:s(()=>[t(O,null,{default:s(()=>[t(L,null,{default:s(()=>[y("Alterar foto")]),_:1}),j(t(b,{dense:"",flat:"",icon:"close",round:""},null,512),[[M]])]),_:1}),t($,{"auto-expand":"",color:"none",class:"mobile-only",label:"Foto","hide-upload-button":"","hide-upload-progress":"","dark-light":"",url:"",ref:"fotoCampo",factory:i.trocarFoto},null,8,["factory"]),t($,{"auto-expand":"",color:"none",class:"mobile-hide",extensions:".jpg,.jpeg",label:"Foto","hide-upload-button":"","hide-upload-progress":"","dark-light":"",url:"",ref:"fotoCampo",factory:i.trocarFoto},null,8,["factory"])]),_:1})]),_:1},8,["modelValue"])}var Wo=Q(Jo,[["render",Go]]);const Xo={components:{Avatar:fo,Badge:bo,Icone:Eo,SeletorCampoTabela:go,SeletorCidade:Uo,SeletorPais:Po,ConsultaCNPJ:Bo,ContatoCriar:Co,RedesSociaisModal:Ho,PromptGrupoUnico:vo,modalTrocarFoto:Wo,Arquivo:Vo},computed:{badgeCor(){return this.contato.ativo?this.contato.condutaRestricao?"negative":this.contato.condutaObservacao?"orange":"positive":"tertiary"},ehEmpresa(){const a=this.contato.numeroDocumentoNacional;return a?a.length>14:!1},idade(){let a=this.contato.dataAbertura;if(!a)return 0;a=new Date(a);const e=new Date(Date.now()-a.getTime());return Math.abs(e.getUTCFullYear()-1970)},segmentoProfissao(){const a=this.contato.numeroDocumentoNacional||"";return a.length>14?"Segmento":a.length>=11?"Profiss\xE3o":"Segmento/Profiss\xE3o"},temRedeSocial(){return this.redeSocial&&!!this.redeSocial.length}},data(){return{contato:{},contatoOriginal:{},endereco:[],enderecoEstrangeiro:{},telefone:[],redeSocial:[],consulta:[],grupo:[],filhos:[],filhosId:{},arquivo:[],tab:"profile-tab-1",consultaDescricao:"",descricaoAssistente:"",descricaoFormaPagamento:"",descricaoItemTabelaPreco:"",descricaoTransportadora:"",descricaoEmpresaCarteira:"",descricaoContatoLider:"",descricaoVendedor:"",filhoCampo:"",contatoUsuario:{},somenteCarteira:!1,podeAlterarVendedorAssistente:!1,opcoesDependentes:[],opcoesTabelaPreco:[],enderecoTipos:[{label:"Principal",value:"Principal",icon:"star",color:"orange"},{label:"Cobran\xE7a",value:"Cobran\xE7a",icon:"attach_money"},{label:"Comercial",value:"Comercial",icon:"business"},{label:"Correspond\xEAncia",value:"Correspond\xEAncia",icon:"mail"},{label:"Entrega",value:"Entrega",icon:"local_shipping"},{label:"Instala\xE7\xE3o",value:"Instala\xE7\xE3o",icon:"build"},{label:"Residencial",value:"Residencial",icon:"store_mall_directory"},{label:"Outros",value:"Outros",icon:"location_city"}],regimes:[{label:"Normal",value:"Normal"},{label:"Simples Nacional",value:"SimplesNacional"},{label:"Simples Nacional - MEI",value:"MEI"}],sexos:[{label:"Masculino",value:"Masculino"},{label:"Feminino",value:"Feminino"},{label:"Outro",value:"Outro"}],telefoneTipos:[{label:"Principal",value:"Principal",color:"orange",icon:"star"},{label:"Comercial",value:"Comercial",color:"dark",icon:"phone"},{label:"Celular",value:"Celular",color:"dark",icon:"phone_iphone"},{label:"Fixo",value:"Fixo",color:"dark",icon:"phone"},{label:"WhatsApp",value:"WhatsApp",color:"positive",icon:"mdi-whatsapp",ix:"duo"}],permissoes:{},configuracoes:{},rules:{}}},methods:{async atualizar({id:a}){var e;$q.loading.show();try{if(a||(a=this.$route.params.id),this.somenteCarteira=!1,this.contatoUsuario={},!$db.usuario.logado.administrador&&await $db.permissao.objetoClienteSistema("Diretiva_Contatos_AcessaTodosContatos")&&!await $db.permissao.objeto("Diretiva_Contatos_AcessaTodosContatos")){let o=$db.usuario.logado.codigoContato;o&&(this.contatoUsuario=(await $erp().contato.where({codigoContato:o}).toArray()).find(i=>i.id)),this.somenteCarteira=!0}this.podeAlterarVendedorAssistente=!1,!$db.usuario.logado.administrador&&await $db.permissao.objetoClienteSistema("Diretiva_Contatos_AlterarVendedorEAssistente")&&!await $db.permissao.objeto("Diretiva_Contatos_AlterarVendedorEAssistente")&&(this.podeAlterarVendedorAssistente=!0);const n=await $db.contato.leCompletoV3(a);this.contato=n.contato;for(let o=0;o<n.endereco.length;o++)this.enderecoEstrangeiro[o]=!1,((e=n.endereco[o].uf)!=null?e:"").toUpperCase()==="EX"&&(this.enderecoEstrangeiro[o]=!0);this.arquivoOriginal=await $db.arquivo.lista({tipoArquivo:"contatoImagem",idTabelaMaster:this.contato.id}),this.arquivo=$utils.clonarV2(this.arquivoOriginal),this.endereco=n.endereco,this.telefone=n.telefone,this.redeSocial=n.redeSocial,this.filhos=n.filhos,this.consulta=n.consulta,this.grupo=n.grupo.map(o=>({...o,label:o.descricao})),this.contatoOriginal=$utils.clonarV2(n.contato),this.enderecoOriginal=$utils.clonarV2(n.endereco),this.telefoneOriginal=$utils.clonarV2(n.telefone),this.redeSocialOriginal=$utils.clonarV2(n.redeSocial),this.filhosOriginal=$utils.clonarV2(n.filhos),this.consultaOriginal=$utils.clonarV2(n.consulta),this.grupoOriginal=$utils.clonarV2(n.grupo),a===""&&(n.contato.id=$utils.uuid(),this.contatoOriginal={});const c=n.contato;this.descricaoAssistente=(await $erp().contato.get(c.idContatoAssistente||"")||{}).apelido||"",this.descricaoTransportadora=(await $erp().contato.get(c.idContatoTransportadora||"")||{}).apelido||"",this.descricaoEmpresaCarteira=(await $erp().contato.get(c.idEmpresaCarteira||"")||{}).apelido||"",this.descricaoContatoLider=(await $erp().contato.get(c.idContatoLider||"")||{}).apelido||"",this.descricaoVendedor=(await $erp().contato.get(c.idContatoVendedor||"")||{}).apelido||"",this.descricaoFormaPagamento=(await $erp().formaPagamento.get(c.idFormaPagamento||"")||{}).descricao||"",this.descricaoItemTabelaPreco=(await $erp().itemTabelaPreco.get(c.idItemTabelaPreco||"")||{}).descricao||"";for(const o of n.filhos)this.filhosId[o.idContatoRelacionado]=await $db.contato.le({id:o.idContatoRelacionado});this.atualizarTabelaPreco()}catch(n){this.$q.notifyError("Ocorreu um erro ao obter contato.",n)}finally{$q.loading.hide()}},async restaurarContato(){try{$q.loading.show(),this.contato.ativo=!0,await this.salvarContato(),this.$q.notifyPositive("O contato foi restaurado com sucesso.")}catch{$q.notify("Ocorreu um erro ao restaurar.")}finally{$q.loading.hide()}},validateEmail(a){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())},async salvarContato(){var n,c;const a=await $db.hibrido.lista({table:"configuracoes",columns:["valor"],where:{nome:"venda.codigoconsumidor"}});if(Number((c=(n=a==null?void 0:a[0])==null?void 0:n.valor)!=null?c:0)===$db.contato.selecionado.codigoContato){$q.notifyError("N\xE3o \xE9 poss\xEDvel editar/remover a ficha Consumidor!");return}if(!this.verificarSeAlterouCampos())return this.$q.notifyPositive("N\xE3o h\xE1 dados alterados.");try{this.$q.loading.show();const o=this.contato.id,i=$utils.clonarV2(this.grupo).map(r=>(r.descricao=r.label,r.idContato=o,delete r.label,r)),u={dadosOriginais:{contato:this.contatoOriginal,endereco:this.enderecoOriginal,telefone:this.telefoneOriginal,redeSocial:this.redeSocialOriginal,filhos:this.filhosOriginal,consulta:this.consultaOriginal,grupo:this.grupoOriginal},contato:this.contato,endereco:this.endereco,telefone:this.telefone,redeSocial:this.redeSocial,filhos:this.filhos,consulta:this.consulta,grupo:i};await $db.contato.grava(u),await $db.arquivo.remove(this.arquivoOriginal.filter(r=>!this.arquivo.find(g=>g.id===r.id)));for(const r of this.arquivo){let g={};Object.keys(this.arquivoOriginal).length?g={original:this.arquivoOriginal.find(p=>p.id===r.id)||[{}],atual:r}:g={atual:r},(r==null?void 0:r.name)&&(r==null?void 0:r.editado)&&await $db.arquivo.edita(g),r!=null&&r.name||await $db.arquivo.grava(g)}await this.atualizar({id:o}),$db.contato.selecionado=await $db.contato.le({id:o}),$utils.emitter.emit("carregarContatoAtendimentoLayout"),$q.notifyPositive("Os dados do contato foram salvos com sucesso.")}catch(o){$q.notifyError("Ocorreu um erro ao salvar.",o)}finally{$q.loading.hide()}},async contatoRemover(){var c,o;let a=!1;const e=await $db.hibrido.lista({table:"configuracoes",columns:["valor"],where:{nome:"venda.codigoconsumidor"}});if(Number((o=(c=e==null?void 0:e[0])==null?void 0:c.valor)!=null?o:0)===$db.contato.selecionado.codigoContato&&(a=!0,$q.notifyError("N\xE3o \xE9 poss\xEDvel editar/remover a ficha Consumidor!")),this.$refs.form.getValidationComponents().forEach(i=>{!i.validate()&&!a&&(a=!0)}),!a){await this.removerConfirma();try{$q.loading.show();const i=$utils.clonar(this.contato),u=i.id;i.ativo=!1;const r={dadosOriginais:{contato:this.contatoOriginal},contato:i};await $db.contato.grava(r),await this.atualizar({id:u}),$db.contato.selecionado=await $db.contato.le({id:u}),$utils.emitter.emit("carregarContatoAtendimentoLayout"),$q.notifyPositive("O contato foi exclu\xEDdo com sucesso.")}catch(i){$q.notifyError("Ocorreu um erro ao remover",i)}finally{$q.loading.hide()}}},aoCancelar(){if(!this.verificarSeAlterouCampos()){this.$q.notifyPositive("N\xE3o h\xE1 dados alterados.");return}this.$q.dialog({cancel:{label:"Manter",push:!0,color:"tertiary",flat:!0},title:"Tem certeza?",message:"Ao continuar voc\xEA ir\xE1 perder todas as modifica\xE7\xF5es.",ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.atualizar({id:this.contato.id})})},async dependenteCriar(){const a=await this.$refs.promptCriarDependente.mostrar();$lodash.get(a,"nome")&&this.filhoAdicionar({data:a})},async filhosBuscar(a,e){try{if(a=a.trim(),this.opcoesDependentes=[],a.length>1){const n=(await $db.contato.ler({filtros:{termoBusca:a,ativo:!0}})).data;this.opcoesDependentes=n.map(c=>({data:c,label:`${c.apelido} | ${c.nome}`,stamp:"#0000000",sublabel:c.nome,value:c.nome}))}e()}catch{e(),this.$q.notify("Ocorreu um erro ao obter os contatos.")}},async filhoRemover(a){await this.removerConfirma();const e=this.filhos.filter(n=>!(n.idContato===a.idContato&&n.idContatoRelacionado===a.idContatoRelacionado||n.idContato===a.idContatoRelacionado&&n.idContatoRelacionado===a.idContato));this.filhos=e},async filhoAdicionar(a){const e=a.data;this.filhoCampo="",this.filhosId[e.id]=await $db.contato.le({id:e.id}),this.filhos.push({id:$utils.uuid(),idContato:this.contato.id,idContatoRelacionado:e.id,socio:!1,cobranca:!1}),this.filhos.push({id:$utils.uuid(),idContato:e.id,idContatoRelacionado:this.contato.id,socio:!1,cobranca:!1}),this.filhos=oo.exports.orderBy(this.filhos,"apelido")},async btSelecionarVendedor_click(){var c,o;const a=$utils.clonarV2(this.contato),e=this.descricaoVendedor,n=await $g.promptContato.show({filtro:{ativo:!0,vendedores:!0},placeholder:"Selecione o vendedor"});n!=null&&n.id&&(this.contato.idContatoVendedor=n.id,this.descricaoVendedor=n.apelido||""),(a==null?void 0:a.idContatoVendedor)&&((c=this.contato)==null?void 0:c.idContatoVendedor)&&(a==null?void 0:a.idContatoVendedor)!==((o=this.contato)==null?void 0:o.idContatoVendedor)&&$q.dialog({cancel:{label:"Apenas Este",push:!0,class:"bg-negative",textColor:"white",flat:!0},title:"Alterar Vendedor",message:`Deseja alterar o Vendedor em todos os Clientes de '${e}'' para '${this.descricaoVendedor}'?`,ok:{label:"Todos",push:!0,color:"tertiary",flat:!0}}).onOk(async()=>{try{$q.loading.show();const i=await $db.hibrido.lista({table:"contato",whereFilter:{idContatoVendedor:a==null?void 0:a.idContatoVendedor}}),u=$utils.clonarV2(i);u.map(r=>{var g;r.idContatoVendedor=(g=this.contato)==null?void 0:g.idContatoVendedor});for(let r=0;r<u.length;r++)try{await $db.contato.grava({dadosOriginais:{contato:i[r]},contato:u[r]})}catch(g){console.error(g)}}catch(i){console.log(i.message),$q.notifyError("Ocorreu um erro ao alterar Vendedor",i)}finally{$q.loading.hide()}})},vendedorLimpar(){this.contato.idContatoVendedor="",this.descricaoVendedor=""},async btSelecionarAssistente_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,vendedores:!0},placeholder:"Selecione a empresa"});$lodash.get(a,"id")&&(this.contato.idContatoAssistente=a.id,this.descricaoAssistente=a.apelido||"")},assistenteLimpar(){this.contato.idContatoAssistente="",this.descricaoAssistente=""},async btSelecionaFormaPagamento_click(){const a=await this.$root.$refs.promptFormaPagamento.show();!$lodash.get(a,"id")||(this.contato.idFormaPagamento=a.id,this.descricaoFormaPagamento=a.descricao||"")},formaPagamentoLimpar(){this.contato.idFormaPagamento="",this.descricaoFormaPagamento=""},async btSelecionarTransportadora_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,transportadoras:!0},placeholder:"Transportadora"});$lodash.get(a,"id")&&(this.contato.idContatoTransportadora=a.id,this.descricaoTransportadora=a.apelido||"")},transportadoraLimpar(){this.contato.idContatoTransportadora="",this.descricaoTransportadora=""},async btSelecionarEmpresaCarteira_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,empresas:!0},placeholder:"Empresa Carteira"});$lodash.get(a,"id")&&(this.contato.idEmpresaCarteira=a.id,this.descricaoEmpresaCarteira=a.apelido||"")},empresaCarteiraLimpar(){this.contato.idEmpresaCarteira="",this.descricaoEmpresaCarteira=""},async btSelecionarContatoLider_click(){const a=await $g.promptContato.show({filtro:{ativo:!0},placeholder:"Contato L\xEDder"});!a.id||(this.contato.idContatoLider=a.id,this.descricaoContatoLider=a.apelido||"")},contatoLiderLimpar(){this.contato.idContatoLider="",this.descricaoContatoLider=""},async btRedeSocialadicionar_click(){const a=await this.$refs.modalRedesSociais.show({idContato:this.contato.id,itens:this.redeSocial});this.redeSocial=a},consultaAdicionar(){try{if(!this.consultaDescricao){this.$q.notifyError("Informar a descri\xE7\xE3o da consulta de cadastro");return}const a=this.consultaDescricao+` (Cadastro realizado pelo usu\xE1rio: ${$db.usuario.logado.nome} - CPF: ${this.$filters.cpfCnpj($db.usuario.logado.numeroDocumentoNacional)})`;this.consulta.push({id:$utils.uuid(),idContato:this.contato.id,dataConsulta:$utils.dataAtual(),descricao:a}),this.consulta=oo.exports.orderBy(this.consulta,"dataConsulta","desc"),this.consultaDescricao=""}catch(a){this.$q.notifyError("Ocorreu um erro ao adicionar",a)}},async fotoTrocar_click(){const a=await this.$refs.modalTrocarFoto.show();a&&(this.contato.imagem=a)},uploadClick(){this.$refs.Upload.click()},async abrirArquivo(a){const e=this.$refs.Upload.files;if(FileReader&&e&&e.length){var n=new FileReader;n.onload=()=>{eo(e[0],{crop:!0,outputFormat:"jpg",targetHeight:200,targetWidth:200},(c,o)=>{this.contato.imagem=o})},n.readAsDataURL(e[0])}},async grupoSelecionar_Click(){const a=await this.$refs.PromptGrupoUnico.show();!a.descricao||this.grupo.push({id:$utils.uuid(),label:a.descricao})},async atualizarTabelaPreco(a,e,n){const c=await $db.itemTabelaPreco.le({tabelaMaster:!0})||[];for(const o of c)o.empresa=(await $db.contato.le({id:o.idEmpresa})).nome;this.opcoesTabelaPreco=c,typeof e=="function"&&e()},telefoneAdicionar(){this.telefone.push({id:$utils.uuid(),idContato:this.contato.id})},async telefoneAbrir(a){if(!a.telefone)return;const e=a.tipoTelefone==="WhatsApp"?"https://api.whatsapp.com/send?phone=":"tel:+";this.abrirURL(e+await $utils.formatarTelefone(a))},async telefoneRemover(a){await this.removerConfirma(),a>=0&&this.telefone.splice(a,1)},enderecoAdicionar(){this.endereco.push({id:$utils.uuid(),idContato:this.contato.id}),this.enderecoEstrangeiro[this.endereco.length-1]=!1},async enderecoRemover(a){await this.removerConfirma(),a>=0&&this.endereco.splice(a,1)},enderecoIcone(a){const e=this.enderecoTipos.find(n=>n.label===a)||{};return{color:e.color||"dark",name:e.icon||"store_mall_directory",size:a==="Principal"?"18px":"24px"}},consultarCep(a){const e=this.endereco[a];if(!e.cep||this.enderecoEstrangeiro[a])return;const n=e.cep.replace(/[^0-9]/g,"");n.length<8||$utils.buscarEndereco(n).then(async({data:c})=>{if(e.bairro=c.bairro,e.complemento=c.complemento,e.ibgeCod=c.ibge,e.logradouro=c.logradouro,e.municipio=c.localidade,e.pais="Brasil",e.codigoPais=1058,e.uf=c.uf,e.ufCod=$utils.mapearEstadoCodigo[c.uf],c.ibge){const o=await $db.cidade.le({cidadeCodIbge:c.ibge.toString(),ativo:!0});e.cidadeCodChave=(o.find(i=>i.cod)||{}).cod}})},async selecionarCidade(a,e){const n=this.endereco[e];n.municipio=a.municipio||"",n.ibgeCod=a.ibgeCod||"",n.uf=a.uf||"",n.ufCod=a.ufCod||"",n.cidadeCodChave=a.cidadeCodChave||"",n.codigoPais=1058,n.pais="Brasil"},async selecionarPais(a,e){const n=this.endereco[e];n.pais=a.nome,n.codigoPais=a.codigo,this.enderecoEstrangeiro[e]=!1,a.codigo!==1058&&(this.enderecoEstrangeiro[e]=!0,this.setarEstrangeiro(e))},removerConfirma(){return new Promise((a,e)=>{this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar voc\xEA ir\xE1 remover este contato.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{a()})})},verificarSeAlterouCampos(){const a={contato:this.contatoOriginal,endereco:this.enderecoOriginal,telefone:this.telefoneOriginal,redeSocial:this.redeSocialOriginal,filhos:this.filhosOriginal,consulta:this.consultaOriginal,grupo:this.grupoOriginal};for(const o of this.arquivoOriginal)if(!this.arquivo.some(i=>i.id===o.id))return!0;for(const o of this.arquivo)if(!this.arquivoOriginal.some(u=>u.id===o.id)||this.arquivoOriginal.find(u=>u.id===o.id).nome!==o.nome)return!0;const e=$utils.clonarV2(this.grupo).map(o=>(o.descricao=o.label,o.idContato=this.contato.id,delete o.label,o)),n={contato:this.contato,endereco:this.endereco,telefone:this.telefone,redeSocial:this.redeSocial,filhos:this.filhos,consulta:this.consulta,grupo:e},c=$utils.diferenca(a,n);return $utils.gconsole.log("ContatoFicha","verificarSeAlterouCampos",c!==null,c),c!==null},abrirURL(a){Ao(a)},async configRules(){await $db.contato.carregarMemoria(),this.rules={numeroDocumentoNacional:[()=>{const a=(this.contato.numeroDocumentoNacional||"").replace(/\D/g,"");if(!a.trim())return!0;if(!$utils.validarDocumentoNacional(a))return"Documento inv\xE1lido";for(const e of $db.contato.contatos){if(e.id===this.contato.id)continue;const n=(e.numeroDocumentoNacional||"").replace(/\D/g,"");if(!!n&&a===n)return"Documento j\xE1 existente"}return!0}]}},setarEstrangeiro(a){this.endereco[a].municipio="Exterior",this.endereco[a].ibgeCod="9999999",this.endereco[a].cep="99999-999",this.endereco[a].uf="EX"},abrirBuscaCep(){window.open("https://buscacepinter.correios.com.br/app/localidade_logradouro/index.php","_blank")}},watch:{"campos.nome"(a,e){this.campos.apelido===e&&(this.campos.apelido=a)},"$route.params.id"(){this.atualizar({id:this.$route.params.id})}},created(){this.configRules(),this.permissoes={editarLimiteCredito:!1,editarCondutaRestricao:!1},this.configuracoes={descontoCondicionado:!1},$db.configuracoes.le({nome:"usa.DescontoCondicionado"}).then(a=>{var e;this.configuracoes.descontoCondicionado=Number((e=a[0])==null?void 0:e.valor)||!1}),$db.permissao.objeto("Diretiva_Contatos_EditaLimiteCredito").then(a=>{this.permissoes.editarLimiteCredito=a}),$db.permissao.objeto("Diretiva_Contatos_EditaCondutaRestricao").then(a=>{this.permissoes.editarCondutaRestricao=a}),this.atualizar({id:this.id||""})},props:{id:{required:!1,default:null}}},Zo={class:"col-12 col-md-3 text-center"},Ko={class:"group q-mt-md"},Yo={class:"col-12 col-md-6"},$o={key:0,class:"text-right"},oe={class:"col-12 col-sm-4"},ee={class:"col-12 col-sm-4"},te={class:"col-12 col-sm-4"},ae=d("div",{class:"text-subtitle1 q-mt-lg"},"Telefones",-1),le={class:"col-6 col-sm-4"},ie={class:"col-6 col-sm-4"},re={class:"col-10 col-sm-3"},ne={class:"mlmobile34"},se={class:"col-2 col-sm-1 text-right"},ce={class:"q-mt-md text-center"},de=d("div",{class:"text-subtitle1 q-mt-lg"},"Endere\xE7os",-1),ue={class:"col-8"},me={class:"col-4"},pe={class:"col-5"},he={class:"col-2"},fe={class:"col-5"},be={class:"col-12 col-sm-5"},ge={class:"col-3 col-sm-2"},Ce={class:"col-9 col-sm-5"},ve={class:"col-5 col-sm-6"},Ve={class:"col-5"},_e={class:"col-2 col-sm-1 text-right"},Te={class:"q-my-md text-center"},ye={class:"col-12 col-md-3"},we={class:"col-12 col-sm-4"},ke={class:"col-12 col-sm-4"},Se={class:"col-12 col-sm-4"},qe={class:"col-12 col-sm"},Ee={key:0,class:"col-12 col-sm"},Ue={class:"col-12 col-sm"},Pe={class:"col-12 col-sm"},Ae={class:"col-12 col-sm-6"},De={class:"col-12 col-sm-6"},xe={class:"col-12 q-mt-sm"},Ne={class:"q-mt-lg"},Fe={class:"col-auto"},Re={class:"col"},Oe={class:"q-mb-none"},Le={class:"q-mb-none"},Ie={class:"q-mb-none"},je={class:"hideondesktop"},ze={class:"hideondesktop"},Be={class:"col-12 col-md hideonmobile"},Me={class:"col-12 col-md-auto hideonmobile",style:{"justify-content":"flex-start !important"}},Qe={class:"col-12 col-md-auto"},He={class:"col"},Je={class:"col-auto text-right"},Ge={class:"col-12 col-sm-6"},We={class:"col-12 col-sm-6"},Xe={class:"q-col-gutter-sm items-center row"},Ze=d("strong",null,"Empresa: ",-1),Ke=d("strong",null,"Fator (%): ",-1),Ye=d("strong",null,"Arredondamento: ",-1),$e={class:"col-12 col-sm-4"},ot={class:"col-12 col-sm-4"},et={class:"q-pa-md"},tt={class:"items-center justify-around q-my-lg row"},at={key:0},lt={key:1},it={class:"u-container relative-position"},rt={key:1,class:"q-py-sm"},nt=d("span",{class:"text-tertiary"},"N\xE3o \xE9 poss\xEDvel editar informa\xE7\xF5es de um contato exclu\xEDdo.",-1);function st(a,e,n,c,o,i){const u=_("avatar"),r=_("icone"),g=_("badge"),p=_("campo"),w=_("row"),z=_("SeletorCidade"),U=_("SeletorPais"),to=_("SeletorCampoTabela"),ao=_("gchips"),lo=_("arquivo"),io=_("contato-criar"),ro=_("RedesSociaisModal"),no=_("modalTrocarFoto"),so=_("ConsultaCNPJ"),co=_("PromptGrupoUnico"),uo=_o("mask");return h(),v(q,null,[t(G,{ref:"form",onSubmit:i.salvarContato,class:"ContatoFicha q-mt-md"},{default:s(()=>[t(I,{class:"bg-white no-shadow q-px-md q-py-md"},{default:s(()=>[t(w,{class:"q-col-gutter-x-md justify-around"},{default:s(()=>[d("div",Zo,[t(u,{imagem:o.contato.imagem,rotulo:o.contato.apelido,tamanho:"160",onClick:i.uploadClick},null,8,["imagem","rotulo","onClick"]),d("input",{ref:"Upload",type:"file",id:"Upload",onChange:e[0]||(e[0]=(...l)=>i.abrirArquivo&&i.abrirArquivo(...l)),style:{visibility:"hidden"}},null,544),d("div",Ko,[(h(!0),v(q,null,A(o.redeSocial,(l,f)=>(h(),C(b,{color:l.tipo==="link"?"primary":l.tipo,key:f,round:"",size:"sm",onClick:m=>i.abrirURL(l.link),class:"q-mx-xs"},{default:s(()=>[l.tipo==="link"?(h(),C(V,{key:0,name:"launch"})):(h(),C(r,{key:1,nome:l.tipo,tamanho:"12"},null,8,["nome"]))]),_:2},1032,["color","onClick"]))),128)),t(b,{color:"positive",icon:"add",outline:"",round:i.temRedeSocial,size:"sm",class:"q-mx-xs",onClick:i.btRedeSocialadicionar_click},null,8,["round","onClick"])])]),d("div",Yo,[o.contato&&o.contato.codigoContato?(h(),v("div",$o,[t(g,{cor:i.badgeCor,escuro:""},{default:s(()=>[y("#"+k((o.contato.codigoContato||0).toString().padStart(6,"0")),1)]),_:1},8,["cor"])])):T("",!0),t(p,{tipo:"texto",class:"q-title",placeholder:i.ehEmpresa?"Fantasia":"Apelido",autogrow:"","class-campo":"q-pb-sm",modelValue:o.contato.apelido,"onUpdate:modelValue":e[1]||(e[1]=l=>o.contato.apelido=l),rules:[l=>l&&l.length>2||"obrigat\xF3rio."],dense:""},null,8,["placeholder","modelValue","rules"]),t(p,{tipo:"texto",rotulo:i.ehEmpresa?"Raz\xE3o social":"Nome completo",modelValue:o.contato.nome,"onUpdate:modelValue":e[2]||(e[2]=l=>o.contato.nome=l),autogrow:"","class-campo":"q-pb-sm",rules:[l=>l&&l.length>2||"O nome \xE9 obrigat\xF3rio."],dense:""},null,8,["rotulo","modelValue","rules"]),t(w,{class:"q-col-gutter-sm"},{default:s(()=>[d("div",oe,[j((h(),C(W,{label:i.ehEmpresa?"CNPJ":"CPF/CNPJ",class:"q-pb-xs",modelValue:o.contato.numeroDocumentoNacional,"onUpdate:modelValue":e[4]||(e[4]=l=>o.contato.numeroDocumentoNacional=l),rules:o.rules.numeroDocumentoNacional,dense:""},{append:s(()=>[(o.contato.numeroDocumentoNacional||"").length===18&&a.$utils.validarDocumentoNacional(o.contato.numeroDocumentoNacional)?(h(),C(b,{key:0,dense:"",flat:"",round:"",icon:"mdi-arrow-down-bold-circle",color:"positive",onClick:e[3]||(e[3]=l=>a.$refs.consultaCNPJ.consultar(o.contato.numeroDocumentoNacional))},{default:s(()=>[t(D,null,{default:s(()=>[y("Consultar cadastro")]),_:1})]),_:1})):T("",!0)]),_:1},8,["label","modelValue","rules"])),[[uo,["###.###.###-##","##.###.###/####-##"]]])]),d("div",ee,[t(p,{rotulo:i.ehEmpresa?"Inscri\xE7\xE3o estadual":"RG/IE",modelValue:o.contato.numeroDocumentoEstadual,"onUpdate:modelValue":e[5]||(e[5]=l=>o.contato.numeroDocumentoEstadual=l),class:"q-pb-xs"},null,8,["rotulo","modelValue"])]),d("div",te,[t(p,{rotulo:"Inscri\xE7\xE3o municipal",modelValue:o.contato.numeroDocumentoMunicipal,"onUpdate:modelValue":e[6]||(e[6]=l=>o.contato.numeroDocumentoMunicipal=l),class:"q-pb-xs"},null,8,["modelValue"])])]),_:1}),ae,(h(!0),v(q,null,A(o.telefone,(l,f)=>(h(),v("div",{key:f,class:"q-mt-md"},[t(w,null,{default:s(()=>[d("div",le,[t(E,{modelValue:l.tipoTelefone,"onUpdate:modelValue":m=>l.tipoTelefone=m,options:o.telefoneTipos,"option-value":"value","option-label":"label","emit-value":"","map-options":"",dense:"",label:"Tipo"},{before:s(()=>[t(b,{flat:"",round:"",icon:(o.telefoneTipos.find(m=>m.value===l.tipoTelefone)||{}).icon||"star",color:"tertiary",size:"sm",onClick:m=>i.telefoneAbrir(l)},null,8,["icon","onClick"])]),option:s(m=>[t(B,H(J(m.itemProps)),{default:s(()=>[t(F,{avatar:""},{default:s(()=>[t(V,{name:m.opt.icon},null,8,["name"])]),_:2},1024),t(F,null,{default:s(()=>[t(P,{innerHTML:m.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),d("div",ie,[t(p,{rotulo:"Telefone",modelValue:l.telefone,"onUpdate:modelValue":m=>l.telefone=m},null,8,["modelValue","onUpdate:modelValue"])]),d("div",re,[d("div",ne,[t(p,{rotulo:"Descri\xE7\xE3o",modelValue:l.observacao,"onUpdate:modelValue":m=>l.observacao=m},null,8,["modelValue","onUpdate:modelValue"])])]),d("div",se,[t(b,{onClick:m=>i.telefoneRemover(f),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mt-sm"},null,8,["onClick"])])]),_:2},1024)]))),128)),d("div",ce,[t(b,{color:"positive",icon:"add",label:"Telefone",outline:"",size:"sm",onClick:i.telefoneAdicionar},null,8,["onClick"])]),de,(h(!0),v(q,null,A(o.endereco,(l,f)=>(h(),v("div",{class:"u-separador animate-pop q-mt-md",key:f},[t(w,null,{default:s(()=>[d("div",ue,[t(E,{modelValue:l.grupo,"onUpdate:modelValue":m=>l.grupo=m,options:o.enderecoTipos,"option-value":"value","option-label":"label",class:"q-pb-md","emit-value":"","map-options":"",dense:"",label:"Grupo"},{before:s(()=>[t(V,To(i.enderecoIcone(l.grupo),{color:"tertiary",size:"xs",class:"q-mx-xs"}),null,16)]),option:s(m=>[t(B,H(J(m.itemProps)),{default:s(()=>[t(F,{avatar:""},{default:s(()=>[t(V,{name:m.opt.icon},null,8,["name"])]),_:2},1024),t(F,null,{default:s(()=>[t(P,{innerHTML:m.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),d("div",me,[t(R,{modelValue:l.estrangeiro,"onUpdate:modelValue":[m=>l.estrangeiro=m,m=>i.setarEstrangeiro(f)],val:!1,label:"Estrangeiro",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024),t(w,null,{default:s(()=>[d("div",pe,[t(W,{modelValue:l.cep,"onUpdate:modelValue":m=>l.cep=m,onChange:m=>i.consultarCep(f),readonly:o.enderecoEstrangeiro[f],rules:[m=>m&&m.replace(/\D/g,"").length===8||"O CEP est\xE1 muito curto."],type:"texto",label:"CEP",mask:"#####-###",debounce:"500",dense:"",class:"q-pb-none"},{append:s(()=>[t(b,{onClick:e[7]||(e[7]=m=>i.abrirBuscaCep()),disabled:o.enderecoEstrangeiro[f],icon:"not_listed_location",flat:"",round:"",dense:""},{default:s(()=>[t(D,{anchor:"bottom middle",self:"center middle"},{default:s(()=>[y("N\xE3o sei CEP")]),_:1})]),_:2},1032,["disabled"])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","readonly","rules"])]),d("div",he,[t(p,{"class-campo":"q-pb-none ",rotulo:"UF",maxlength:"2",modelValue:l.uf,"onUpdate:modelValue":m=>l.uf=m,onBlur:o.endereco.$touch,dense:"",rules:[m=>m&&m.length===2||"Insira um UF."],"somente-leitura":o.enderecoEstrangeiro[f]},null,8,["modelValue","onUpdate:modelValue","onBlur","rules","somente-leitura"])]),d("div",fe,[t(z,{ibgeCod:l.ibgeCod,onSelecionar:m=>i.selecionarCidade(m,f),required:"","somente-leitura":o.enderecoEstrangeiro[f]},null,8,["ibgeCod","onSelecionar","somente-leitura"])]),d("div",be,[t(p,{"class-campo":"q-pb-md",rotulo:"Endere\xE7o",modelValue:l.logradouro,"onUpdate:modelValue":m=>l.logradouro=m,autogrow:"",onBlur:o.endereco.$touch,dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",ge,[t(p,{"class-campo":"q-pb-md",rotulo:"N\xFAmero",modelValue:l.numero,"onUpdate:modelValue":m=>l.numero=m,onBlur:o.endereco.$touch,dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",Ce,[t(p,{rotulo:"Complemento",modelValue:l.complemento,"onUpdate:modelValue":m=>l.complemento=m,onBlur:o.endereco.$touch,"class-campo":"q-pb-md",dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",ve,[t(p,{rotulo:"Bairro",modelValue:l.bairro,"onUpdate:modelValue":m=>l.bairro=m,onBlur:o.endereco.$touch,"class-campo":"q-pb-sm",dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",Ve,[t(U,{codigoPais:l.codigoPais,onSelecionar:m=>i.selecionarPais(m,f),required:""},null,8,["codigoPais","onSelecionar"])]),d("div",_e,[t(b,{onClick:m=>i.enderecoRemover(f),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mt-sm"},null,8,["onClick"])])]),_:2},1024)]))),128)),d("div",Te,[t(b,{color:"positive",icon:"add",label:"Endere\xE7o",outline:"",size:"sm",onClick:i.enderecoAdicionar},null,8,["onClick"])])]),d("div",ye,[t(p,{rotulo:"Observa\xE7\xF5es",rows:"10",tipo:"textoArea",modelValue:o.contato.observacao,"onUpdate:modelValue":e[8]||(e[8]=l=>o.contato.observacao=l)},null,8,["modelValue"])])]),_:1})]),_:1}),t(yo,{modelValue:o.tab,"onUpdate:modelValue":e[9]||(e[9]=l=>o.tab=l),class:"bg-transparent q-mt-lg text-primary",color:"transparent",align:"left"},{default:s(()=>[t(x,{label:"Dados Adicionais",name:"profile-tab-1"}),t(x,{label:"Dependentes / Empresa",name:"profile-tab-2"}),t(x,{label:"Consulta de cadastro",name:"profile-tab-3"}),t(x,{label:"Conduta",name:"profile-tab-4"}),t(x,{label:"Configura\xE7\xF5es comerciais",name:"profile-tab-5"}),t(x,{label:"Arquivos",name:"profile-arquivos"})]),_:1},8,["modelValue"]),t(wo,{modelValue:o.tab,"onUpdate:modelValue":e[43]||(e[43]=l=>o.tab=l),animated:""},{default:s(()=>[t(N,{class:"bg-white",name:"profile-tab-1"},{default:s(()=>[t(w,{class:"q-col-gutter-sm"},{default:s(()=>[d("div",we,[t(p,{modelValue:o.contato.email,"onUpdate:modelValue":e[10]||(e[10]=l=>o.contato.email=l),before:[{icon:"alternate_email"}],rotulo:"E-mail",rules:[l=>i.validateEmail(l)||(l||"").length===0||"email inv\xE1lido"]},null,8,["modelValue","rules"])]),d("div",ke,[t(p,{modelValue:o.contato.site,"onUpdate:modelValue":e[11]||(e[11]=l=>o.contato.site=l),before:[{icon:"language"}],rotulo:"Site"},null,8,["modelValue"])]),d("div",Se,[t(to,{modelValue:o.contato.segmento,"onUpdate:modelValue":e[12]||(e[12]=l=>o.contato.segmento=l),tabela:"contato",campo:"segmento",label:i.segmentoProfissao,buscarSemCaractere:!0,enableAdd:""},null,8,["modelValue","label"])]),i.ehEmpresa?(h(),v(q,{key:0},[d("div",qe,[t(p,{tipo:"seletor",dense:"","rotulo-fixo":"Regime",options:o.regimes,modelValue:o.contato.regime,"onUpdate:modelValue":e[13]||(e[13]=l=>o.contato.regime=l)},null,8,["options","modelValue"])]),o.contato.regime==="Normal"?(h(),v("div",Ee,[t(p,{modelValue:o.contato.tributacao,"onUpdate:modelValue":e[14]||(e[14]=l=>o.contato.tributacao=l),tipo:"seletor","rotulo-fixo":"Tributa\xE7\xE3o",opcoes:[{rotulo:"",valor:""},{rotulo:"Lucro real",valor:"1"},{rotulo:"Lucro presumido",valor:"2"}]},null,8,["modelValue"])])):T("",!0),d("div",Ue,[t(p,{modelValue:o.contato.tributacaoSetor,"onUpdate:modelValue":e[15]||(e[15]=l=>o.contato.tributacaoSetor=l),opcoes:[{rotulo:"",valor:""},{rotulo:"Ind\xFAstria",valor:"1"},{rotulo:"Outros",valor:"99"}],"rotulo-fixo":"Setor tributa\xE7\xE3o",tipo:"seletor"},null,8,["modelValue"])]),d("div",Pe,[t(p,{modelValue:o.contato.dataAbertura,"onUpdate:modelValue":e[16]||(e[16]=l=>o.contato.dataAbertura=l),rotulo:"Data de abertura",clearable:"",suffix:o.contato.dataAbertura?`${i.idade} anos`:"",max:Date.now(),tipo:"data"},null,8,["modelValue","suffix","max"])])],64)):(h(),v(q,{key:1},[d("div",Ae,[t(p,{tipo:"seletor","rotulo-fixo":"Sexo",options:o.sexos,modelValue:o.contato.sexo,"onUpdate:modelValue":e[17]||(e[17]=l=>o.contato.sexo=l)},null,8,["options","modelValue"])]),d("div",De,[t(p,{modelValue:o.contato.dataAbertura,"onUpdate:modelValue":e[18]||(e[18]=l=>o.contato.dataAbertura=l),rotulo:"Data de nascimento",clearable:"",suffix:o.contato.dataAbertura?`${i.idade} anos`:"",max:Date.now(),tipo:"data"},null,8,["modelValue","suffix","max"])])],64))]),_:1}),t(w,null,{default:s(()=>[d("div",xe,[t(ao,{modelValue:o.grupo,"onUpdate:modelValue":e[19]||(e[19]=l=>o.grupo=l),rotulo:"Grupos",dense:"",before:[{icon:"local_offer",handler(){i.grupoSelecionar_Click()}}]},null,8,["modelValue","before"])])]),_:1})]),_:1}),t(N,{class:"bg-white",name:"profile-tab-2"},{default:s(()=>[t(w,null,{default:s(()=>[t(E,{modelValue:o.filhoCampo,"onUpdate:modelValue":[e[20]||(e[20]=l=>o.filhoCampo=l),i.filhoAdicionar],"use-input":"","input-debounce":"500",label:"Dependentes",options:o.opcoesDependentes,outlined:"",onFilter:i.filhosBuscar},{append:s(()=>[t(b,{color:"tertiary",size:"lg",icon:"person_add",dense:"",flat:"",round:"",onClick:i.dependenteCriar},{default:s(()=>[t(D,null,{default:s(()=>[y("Criar contato")]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue"])]),_:1}),d("div",Ne,[(h(!0),v(q,null,A(o.filhos.filter(l=>l.idContato===o.contato.id),l=>(h(),v(q,{key:l.id},[t(w,{class:"q-col-gutter-x-md items-center"},{default:s(()=>[d("div",Fe,[t(u,{imagem:(o.filhosId[l.idContatoRelacionado]||{}).imagem,rotulo:(o.filhosId[l.idContatoRelacionado]||{}).apelido},null,8,["imagem","rotulo"])]),d("div",Re,[d("p",Oe,k((o.filhosId[l.idContatoRelacionado]||{}).apelido),1),d("p",Le,k((o.filhosId[l.idContatoRelacionado]||{}).nome),1),d("p",Ie,k((o.filhosId[l.idContatoRelacionado]||{}).numeroDocumentoNacional||""),1),d("span",je,[t(p,{modelValue:l.observacao,"onUpdate:modelValue":f=>l.observacao=f,rotulo:"Observacao"},null,8,["modelValue","onUpdate:modelValue"])]),d("span",ze,[t(R,{modelValue:l.socio,"onUpdate:modelValue":f=>l.socio=f,val:!0,label:"S\xF3cio",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"]),t(R,{modelValue:l.cobranca,"onUpdate:modelValue":f=>l.cobranca=f,val:!0,label:"Cobran\xE7a",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"])])]),d("div",Be,[t(p,{modelValue:l.observacao,"onUpdate:modelValue":f=>l.observacao=f,rotulo:"Observacao",autogrow:"",filled:""},null,8,["modelValue","onUpdate:modelValue"])]),d("div",Me,[t(R,{modelValue:l.socio,"onUpdate:modelValue":f=>l.socio=f,val:!0,label:"S\xF3cio"},null,8,["modelValue","onUpdate:modelValue"]),t(R,{modelValue:l.cobranca,"onUpdate:modelValue":f=>l.cobranca=f,val:!0,label:"Cobran\xE7a"},null,8,["modelValue","onUpdate:modelValue"])]),d("div",Qe,[t(w,{class:"justify-end"},{default:s(()=>[!o.somenteCarteira||o.somenteCarteira&&o.contatoUsuario.id&&(o.filhosId[l.idContatoRelacionado]||{}).idContatoVendedor===o.contatoUsuario.id?(h(),C(b,{key:0,to:{name:"AtendimentoContato",params:{id:l.idContatoRelacionado}},icon:"edit",flat:"",round:"",dense:"",color:"tertiary",class:"q-mr-sm"},{default:s(()=>[t(D,null,{default:s(()=>[y("Editar contato")]),_:1})]),_:2},1032,["to"])):T("",!0),t(b,{onClick:f=>i.filhoRemover(l),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mr-sm"},{default:s(()=>[t(D,null,{default:s(()=>[y("Remover")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024),t(ko)],64))),128))])]),_:1}),t(N,{class:"bg-white",name:"profile-tab-3"},{default:s(()=>[t(w,{class:"q-col-gutter-sm"},{default:s(()=>[d("div",He,[t(p,{rotulo:"Descri\xE7\xE3o",modelValue:o.consultaDescricao,"onUpdate:modelValue":e[21]||(e[21]=l=>o.consultaDescricao=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),d("div",Je,[t(b,{color:"positive",icon:"add",label:"Consulta",outline:"",size:"sm",onClick:i.consultaAdicionar},null,8,["onClick"])])]),_:1}),(h(!0),v(q,null,A(o.consulta,(l,f)=>(h(),C(I,{class:"animate-pop q-mt-md shadow-1",key:f},{default:s(()=>[t(X,null,{default:s(()=>[d("div",null,k(l.descricao),1),d("span",null,[y("Consulta realizada em "),d("strong",null,k(a.$filters.dataHora(l.dataConsulta)),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(N,{modelValue:o.tab,"onUpdate:modelValue":e[24]||(e[24]=l=>o.tab=l),class:"bg-white",name:"profile-tab-4"},{default:s(()=>[t(w,{class:"q-col-gutter-sm q-pb-sm"},{default:s(()=>[d("div",Ge,[t(p,{rows:"3",rotulo:"Observa\xE7\xF5es",tipo:"textoArea",modelValue:o.contato.condutaObservacao,"onUpdate:modelValue":e[22]||(e[22]=l=>o.contato.condutaObservacao=l),"class-campo":"q-mb-sm",ajuda:"Este conte\xFAdo ser\xE1 exibido sempre que um documento for criado para este contato."},null,8,["modelValue"])]),d("div",We,[t(p,{rows:"3",rotulo:"Restri\xE7\xE3o",tipo:"textoArea",modelValue:o.contato.condutaRestricao,"onUpdate:modelValue":e[23]||(e[23]=l=>o.contato.condutaRestricao=l),"class-campo":"q-mb-sm",somenteLeitura:!o.permissoes.editarCondutaRestricao,ajuda:"Ao preencher este campo, o contato n\xE3o poder\xE1 comprar e o operador visualizar\xE1 esta mensagem."},null,8,["modelValue","somenteLeitura"])])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:o.tab,"onUpdate:modelValue":e[41]||(e[41]=l=>o.tab=l),class:"bg-white",name:"profile-tab-5"},{default:s(()=>[d("div",Xe,[t(E,{dense:"",rounded:"",modelValue:o.descricaoVendedor,"onUpdate:modelValue":e[25]||(e[25]=l=>o.descricaoVendedor=l),label:"Vendedor",options:["a","b"],disable:o.podeAlterarVendedorAssistente,onFilter:i.btSelecionarVendedor_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoVendedor!==""?(h(),C(V,{key:0,name:"close",onClick:S(i.vendedorLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):T("",!0),t(V,{name:"search",onClick:S(i.btSelecionarVendedor_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","disable","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoAssistente,"onUpdate:modelValue":e[26]||(e[26]=l=>o.descricaoAssistente=l),label:"Assistente",options:["a","b"],disable:o.podeAlterarVendedorAssistente,onFilter:i.btSelecionarAssistente_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoAssistente!==""?(h(),C(V,{key:0,name:"close",onClick:S(i.assistenteLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):T("",!0),t(V,{name:"search",onClick:S(i.btSelecionarAssistente_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","disable","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoContatoLider,"onUpdate:modelValue":e[27]||(e[27]=l=>o.descricaoContatoLider=l),label:"Contato L\xEDder",options:["a","b"],onFilter:i.btSelecionarContatoLider_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoContatoLider!==""?(h(),C(V,{key:0,name:"close",onClick:S(i.contatoLiderLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):T("",!0),t(V,{name:"search",onClick:S(i.btSelecionarContatoLider_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoEmpresaCarteira,"onUpdate:modelValue":e[28]||(e[28]=l=>o.descricaoEmpresaCarteira=l),label:"Empresa Carteira",options:["a","b"],onFilter:i.btSelecionarEmpresaCarteira_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoEmpresaCarteira!==""?(h(),C(V,{key:0,name:"close",onClick:S(i.empresaCarteiraLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):T("",!0),t(V,{name:"search",onClick:S(i.btSelecionarEmpresaCarteira_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.origemMarketing,"onUpdate:modelValue":e[29]||(e[29]=l=>o.contato.origemMarketing=l),rotulo:"Origem Marketing"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.grupoEconomico,"onUpdate:modelValue":e[30]||(e[30]=l=>o.contato.grupoEconomico=l),rotulo:"Grupo Econ\xF4mico"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.rotaVendedor,"onUpdate:modelValue":e[31]||(e[31]=l=>o.contato.rotaVendedor=l),rotulo:"Rota Vendedor"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.rotaEntrega,"onUpdate:modelValue":e[32]||(e[32]=l=>o.contato.rotaEntrega=l),rotulo:"Rota Entrega"},null,8,["modelValue"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoTransportadora,"onUpdate:modelValue":e[33]||(e[33]=l=>o.descricaoTransportadora=l),label:"Transportadora",options:["a","b"],onFilter:i.btSelecionarTransportadora_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoTransportadora!==""?(h(),C(V,{key:0,name:"close",onClick:S(i.transportadoraLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):T("",!0),t(V,{name:"search",onClick:S(i.btSelecionarTransportadora_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.contato.idItemTabelaPreco,"onUpdate:modelValue":e[35]||(e[35]=l=>o.contato.idItemTabelaPreco=l),label:"Tabela de pre\xE7o",options:o.opcoesTabelaPreco,"option-value":"id","option-label":"descricao",onFilter:i.atualizarTabelaPreco,"emit-value":"","map-options":"",class:"col-12 col-sm-4"},So({option:s(l=>[t(B,H(J(l.itemProps)),{default:s(()=>[t(F,null,{default:s(()=>[t(P,{innerHTML:l.opt.descricao},null,8,["innerHTML"]),t(P,{caption:""},{default:s(()=>[Ze,y(k(l.opt.empresa),1)]),_:2},1024),l.opt.fatorPercentual?(h(),C(P,{key:0,caption:"",sublabel:""},{default:s(()=>[Ke,y(k(a.$filters.numero(l.opt.fatorPercentual,2))+" %",1)]),_:2},1024)):T("",!0),t(P,{caption:""},{default:s(()=>[Ye,y(k(l.opt.arredondamento?"Sim":"N\xE3o"),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[o.contato.idItemTabelaPreco?{name:"append",fn:s(()=>[t(V,{name:"close",onClick:e[34]||(e[34]=S(l=>{o.contato.idItemTabelaPreco="",o.contato.codigoItemTabelaPreco=""},["stop"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","options","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoFormaPagamento,"onUpdate:modelValue":e[36]||(e[36]=l=>o.descricaoFormaPagamento=l),label:"Forma de pagamento",options:["a","b"],onFilter:i.btSelecionaFormaPagamento_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoFormaPagamento!==""?(h(),C(V,{key:0,name:"close",onClick:S(i.formaPagamentoLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):T("",!0),t(V,{name:"search",onClick:S(i.btSelecionaFormaPagamento_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.limiteCredito,"onUpdate:modelValue":e[37]||(e[37]=l=>o.contato.limiteCredito=l),decimals:"2",rotulo:"Limite de cr\xE9dito",tipo:"decimal","somente-leitura":!o.permissoes.editarLimiteCredito},null,8,["modelValue","somente-leitura"]),d("div",$e,[t(p,{rotulo:"E-mail NFe",modelValue:o.contato.emailNfe,"onUpdate:modelValue":e[38]||(e[38]=l=>o.contato.emailNfe=l)},null,8,["modelValue"])]),d("div",ot,[t(p,{rotulo:"Observa\xE7\xF5es na NFe",modelValue:o.contato.observacaoNFE,"onUpdate:modelValue":e[39]||(e[39]=l=>o.contato.observacaoNFE=l)},null,8,["modelValue"])]),o.configuracoes.descontoCondicionado?(h(),C(p,{key:0,class:"col-12 col-sm-4",modelValue:o.contato.descontoCondicionadoPercentual,"onUpdate:modelValue":e[40]||(e[40]=l=>o.contato.descontoCondicionadoPercentual=l),decimals:"2",suffix:"%",rotulo:"Desconto Condicionado",tipo:"decimal"},null,8,["modelValue"])):T("",!0)])]),_:1},8,["modelValue"]),t(N,{modelValue:o.tab,"onUpdate:modelValue":e[42]||(e[42]=l=>o.tab=l),class:"bg-white",name:"profile-arquivos"},{default:s(()=>[d("div",et,[t(lo,{resize:{crop:!0,width:1e3,height:1e3},idTabelaMaster:o.contato.id,tipoArquivo:"contatoImagem",arquivo:o.arquivo},null,8,["idTabelaMaster","arquivo"])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),d("div",tt,[o.contato.dataCadastro?(h(),v("small",at,"Data do cadastro: "+k(a.$filters.dataHora(o.contato.dataCadastro)),1)):T("",!0),o.contato.dataAlteracao?(h(),v("small",lt,"\xDAltima altera\xE7\xE3o: "+k(a.$filters.dataHora(o.contato.dataAlteracao)),1)):T("",!0)]),t(qo,{class:"bg-light no-shadow q-pa-sm text-right u-bordaCima"},{default:s(()=>[d("div",it,[o.contato.ativo?(h(),v(q,{key:0},[t(b,{color:"tertiary",flat:"",label:"Cancelar",onClick:i.aoCancelar},null,8,["onClick"]),t(b,{class:"q-ml-sm no-shadow",color:"primary",unelevated:"",label:"Salvar",type:"submit"}),t(b,{color:"tertiary",flat:"",icon:"delete",round:"",onClick:i.contatoRemover},{default:s(()=>[t(D,null,{default:s(()=>[y("Remover")]),_:1})]),_:1},8,["onClick"])],64)):(h(),v("div",rt,[nt,t(b,{class:"q-ml-sm text-white",unelevated:"",color:"primary",onClick:i.restaurarContato,label:"Restaurar contato"},null,8,["onClick"])]))])]),_:1})]),_:1},8,["onSubmit"]),t(io,{ref:"promptCriarDependente","cpf-cnpj":"","data-nascimento":"",observacao:""},null,512),t(ro,{ref:"modalRedesSociais"},null,512),t(no,{ref:"modalTrocarFoto"},null,512),t(so,{ref:"consultaCNPJ",contato:o.contato,endereco:o.endereco},null,8,["contato","endereco"]),t(co,{ref:"PromptGrupoUnico"},null,512)],64)}var pt=Q(Xo,[["render",st]]);export{pt as default};
