import{_ as k,aQ as G,r as m,o as l,n as c,s as L,F as v,d as f,w as r,f as t,ar as I,z as V,S as P,j as B,k as h,t as w,R as N,aC as p,O as g,l as O,T as y,e as $,E as D,I as Q,B as C,H as S,ba as E,L as F,h as j,q as J,J as T,Q as U,b3 as A,G as x,bb as M}from"./index.129a5639.js";const R={name:"MenuGeradorItem",computed:{sincronismoStatus(){return G.status}},data(){return{}},methods:{repete_evento(a){this.$emit("menuClick",a)},menuClick(a){this.$lodash.get(a,"rota.name")==="Plataforma15"&&(a=JSON.parse(JSON.stringify(a.rota.params)),this.$emit("menuClick",a))}},props:{itens:{default:()=>[],type:Array}},emits:["menuClick"]};function z(a,e,n,d,s,i){const u=m("menu-gerador-item",!0);return l(!0),c(v,null,L(n.itens.filter(o=>o.mostrar),o=>(l(),c(v,{key:o.id},[a.$lodash.get(o,"filhos.length")?(l(),f(V,{key:0,onClick:I(b=>i.menuClick(o),["stop"]),icon:o.icone||"label",label:o.descricao,to:o.rota,duration:160,dense:"",class:"text-tertiary submenuGeradorItem"},{default:r(()=>[t(u,{onMenuClick:i.repete_evento,itens:o.filhos},null,8,["onMenuClick","itens"])]),_:2},1032,["onClick","icon","label","to"])):(l(),f(N,{key:1,onClick:I(b=>i.menuClick(o),["stop"]),to:o.rota,clickable:"",dense:"",class:"text-tertiary menuGeradorItem"},{default:r(()=>[t(P,{avatar:""},{default:r(()=>[t(B,{name:o.icone||"label",size:"sm"},null,8,["name"])]),_:2},1024),t(P,null,{default:r(()=>[h(w(o.descricao),1)]),_:2},1024)]),_:2},1032,["onClick","to"]))],64))),128)}var H=k(R,[["render",z]]);const W={components:{MenuGeradorItem:H},data(){return{carregando:!1,menuPrincipal:[],menuDesenvolvimento:[]}},methods:{menuClick(a){this.$emit("menuClick",a)},marcar(a){a.forEach(e=>{if((e.filhos||[]).length&&this.marcar(e.filhos),(e.descricao||"").toLowerCase().search(this.termoBusca)!==-1){e.mostrar=!0;return}e.mostrar=!!(e.filhos||[]).find(n=>n.mostrar)})},gerarIds(a){a.forEach(e=>{(e.filhos||[]).length&&this.gerarIds(e.filhos),this.$lodash.get(e,"rota.name")==="Plataforma15"&&this.$lodash.set(e,"rota.params.id",this.$utils.uuid())})}},props:{termoBusca:{type:String}},emits:["menuClick"],watch:{termoBusca(){this.marcar(this.menuPrincipal),this.marcar(this.menuDesenvolvimento)}},async created(){try{this.carregando=!0;let a=await p.permissao.menu();this.marcar(a),this.gerarIds(a),this.menuPrincipal=a.filter(d=>{if(!this.$q.platform.is.mobile||!/\/plataforma15\//.test((d.rota||{}).path))return!0});const e=!!p.usuario.logado.desenvolvedor&&p.usuario.logado.desenvolvedor();let n=e?await p.permissao.menu(!0):[];this.marcar(n),this.gerarIds(n),this.menuDesenvolvimento=e?[...n,{descricao:"Desenvolvedor",icone:"build",id:$utils.uuid(),mostrar:!0,rota:{name:"Desenvolvedor"}}]:[]}catch(a){this.$q.notifyError("Erro ao obter permiss\xF5es",a)}finally{this.carregando=!1}}};function Y(a,e,n,d,s,i){const u=m("MenuGeradorItem");return s.menuPrincipal.length?(l(),c(v,{key:0},[t(g,{class:"geradorItem text-tertiary"},{default:r(()=>[t(u,{itens:s.menuPrincipal,onMenuClick:i.menuClick},null,8,["itens","onMenuClick"])]),_:1}),t(O,{class:"q-my-sm q-mx-md"}),s.menuDesenvolvimento.length?(l(),f(g,{key:0,class:"geradorItem text-tertiary"},{default:r(()=>[t(y,{header:""},{default:r(()=>e[0]||(e[0]=[h("Menu Desenvolvimento")])),_:1}),t(u,{itens:s.menuDesenvolvimento,onMenuClick:i.menuClick},null,8,["itens","onMenuClick"])]),_:1})):$("",!0)],64)):s.carregando?(l(),f(g,{key:1},{default:r(()=>[t(y,null,{default:r(()=>e[1]||(e[1]=[h(" Carregando... ")])),_:1})]),_:1})):(l(),f(g,{key:2},{default:r(()=>[t(y,null,{default:r(()=>e[2]||(e[2]=[h(" Ops! Parece que voc\xEA n\xE3o possui permiss\xF5es de acesso. ")])),_:1})]),_:1}))}var K=k(W,[["render",Y]]);const X={data(){return{carregando:!1}},methods:{async menuClick(a){$q.loading.show(),await $utils.dormir(250);const e=new Date;for(this.carregando||(this.carregando=!0,localStorage.setItem("plat15message",""),await new Promise(async(n,d)=>{for(;localStorage.getItem("plat15message","")===""&&new Date-e<1e4;)await $utils.dormir(500);n()})),localStorage.setItem("plat15message",""),this.$refs.quadro.contentWindow.postMessage({objeto:a.objeto},"*");localStorage.getItem("plat15message","")===""&&new Date-e<1e4;)await $utils.dormir(500);$q.loading.hide()}},mounted(){}},Z={id:"Plataforma15"},ee={key:0},ae={class:"Plataforma15-quadro",ref:"quadro",src:"/statics/plat15/Index.html",frameborder:"0",style:{position:"relative","min-height":"calc(100vh - 64px)!important",height:"calc(100vh - 64px)!important","max-height":"calc(100vh - 64px)!important"}};function te(a,e,n,d,s,i){const u=m("barraTopo");return l(),c("div",Z,[t(D,{elevated:"",class:"bg-gradiente text-white"},{default:r(()=>[t(u)]),_:1}),t(S,{style:{"padding-top":"56px"}},{default:r(()=>[t(Q,null,{default:r(()=>[s.carregando?(l(),c("div",ee,[C("iframe",ae,null,512)])):$("",!0)]),_:1})]),_:1})])}var re=k(X,[["render",te]]);const oe={components:{MenuGerador:K,Plataforma15:re},computed:{termoBuscaInLowerCase(){return(this.termoBusca||"").toLowerCase()}},data(){return{sistemaPai:E(),dbUsuario:$db.usuario,rota:"",start:!1,menuPrincipal:p.app.menuVisivel,termoBusca:""}},methods:{async menuClick(a){this.$refs.Plataforma15.menuClick(a)},whatsappAbrir(){const a=encodeURI(`Ol\xE1 sou ${this.dbUsuario.logado.nome} (${localStorage.getItem("bancoDeDados")}), e preciso de suporte!`);window.open("https://api.whatsapp.com/send?phone=551621116161&text="+a,"_blank")}},mounted(){this.$route.name==="Plataforma15"&&!this.$route.redirectedFrom&&this.$refs.Plataforma15.menuClick(JSON.parse(JSON.stringify(this.$route.params)))}},se={class:"text-weight-medium float-left"},ne={key:0},le={class:"text-weight-bold float-right"};function ie(a,e,n,d,s,i){const u=m("MenuGerador"),o=m("g-label"),b=m("Plataforma15"),q=m("router-view");return l(),c(v,null,[t(A,{modelValue:s.menuPrincipal,"onUpdate:modelValue":e[2]||(e[2]=_=>s.menuPrincipal=_),elevated:"",behavior:"mobile",side:"left"},{default:r(()=>[t(F,{view:"hHh LpR lFr"},{default:r(()=>[t(D,null,{default:r(()=>[t(j,{class:"bg-white q-py-sm q-px-md border-bottom"},{default:r(()=>[t(J,{modelValue:s.termoBusca,"onUpdate:modelValue":e[0]||(e[0]=_=>s.termoBusca=_),debounce:300,placeholder:"Filtrar",color:"none","clear-icon":"close",clearable:"",outlined:"",dense:""},{prepend:r(()=>[t(B,{name:"mdi-filter"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(S,null,{default:r(()=>[t(Q,null,{default:r(()=>[t(u,{termoBusca:i.termoBuscaInLowerCase,onMenuClick:i.menuClick},null,8,["termoBusca","onMenuClick"])]),_:1})]),_:1}),t(T,{class:"bg-white border-top"},{default:r(()=>[t(o,{color:"text-tertiary",class:"q-py-xs q-px-sm"},{default:r(()=>[C("small",se,[h(" \xA9"+w(new Date().getFullYear())+" | B15",1),s.sistemaPai==="optisoul"?(l(),c("span",ne," Optidados")):$("",!0)]),C("small",le,w(a.$db.app.versao.value),1)]),_:1}),t(U,{onClick:e[1]||(e[1]=_=>i.whatsappAbrir()),icon:"contact_support",label:"Ajuda / Suporte",unelevated:"",dense:"",color:"primary",class:"fit",style:{"text-transform":"capitalize"}})]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(t(b,{ref:"Plataforma15"},null,512),[[M,a.$route.name==="Plataforma15"]]),x(t(q,null,null,512),[[M,a.$route.name!=="Plataforma15"]])],64)}var me=k(oe,[["render",ie]]);export{me as default};
