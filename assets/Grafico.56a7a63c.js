import{C as d}from"./Chart.b885b198.js";import{aM as l,an as y,aq as D,ac as b}from"./index.094a6fb0.js";const n=["beforeInit","afterInit","beforeUpdate","afterUpdate","beforeLayout","afterLayout","beforeDatasetsUpdate","afterDatasetsUpdate","beforeDatasetUpdate","afterDatasetUpdate","beforeRender","afterRender","beforeDraw","afterDraw","beforeDatasetsDraw","afterDatasetsDraw","beforeDatasetDraw","afterDatasetDraw","beforeEvent","afterEvent","resize","destroy"];function v(a,e=null){return{type:a,chartRef:e,preventDefault(){this._defaultPrevented=!0},isDefaultPrevented(){return!this._defaultPrevented},_defaultPrevented:!1}}function g(a,e){return{[e.type]:()=>(a(e.type,e),e.isDefaultPrevented())}}const J=l({name:"Vue3ChartJs",props:{fit:{type:Boolean,default:!1},type:{type:String,required:!0},data:{type:Object,required:!0},options:{type:Object,default(){return{}}},plugins:{type:Array,default(){return[]}}},emits:n,setup(a,{emit:e}){const r=y(null),o=n.reduce((i,p)=>{const h=v(p,r);return{...i,...g(e,h)}},{id:"Vue3ChartJsEventHookPlugin"}),t={chart:null,plugins:[o,...a.plugins],props:{...a}},u=()=>{t.chart&&(t.chart.destroy(),t.chart=null)},c=()=>{t.props={...t.props,...a},t.chart.update()},f=()=>t.chart&&t.chart.resize(),s=()=>t.chart?t.chart.update():(t.chart=new d(r.value.getContext("2d"),{type:t.props.type,data:t.props.data,options:t.props.options}),t.chart);return D(()=>s()),{chartJSState:t,chartRef:r,render:s,resize:f,update:c,destroy:u}},watch:{data(){this.chartJSState.chart.config.data=this.data,this.chartJSState.chart.options=this.options,this.chartJSState.chart.update(),this.chartJSState.chart.resize()}},render(){return b("canvas",{style:this.fit?"height:100%;width:100%":"",ref:"chartRef"})}}),w=J;export{w as _};
