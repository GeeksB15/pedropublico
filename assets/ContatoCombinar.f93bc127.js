import{_ as c,r as d,o as u,d as f,w as a,f as e,L as p,D as h,E as C,h as g,i as b,j as y,k as _,H as w,I as V,J as Q,a_ as q,G as v,Q as n,M as x,C as $}from"./index.9b156bba.js";const k={data(){return{origem:{},destino:{}}},methods:{fechar(){this.origem={},this.destino={},this.$emit("update:modelValue",!1)},async combinar(){if(!(this.origem.id&&this.destino.id)){$q.notify({message:"Preencha todos os campos",type:"negative"});return}$q.dialog({message:"Ao continuar voc\xEA ir\xE1 combinar todas as informa\xE7\xF5es dos dois contatos em apenas um contato.",title:"Tem certeza?",cancel:{label:"Cancelar",color:"tertiary",push:!0,flat:!0},ok:{label:"Confirmar",class:"bg-primary",textColor:"white",push:!0,flat:!0}}).onOk(async()=>{try{$q.loading.show();const o=await $utils.geeksApi({combinarContato:{funcao:"1C2ABCA8-AF5A-45CA-B799-774E43FA7F96",idContatoCombinar:this.destino.id,idContatoRemover:this.origem.id}});$q.notifyPositive(o.data.combinarContato.mensagem),this.fechar(),this.$nextTick(()=>{this.$emit("atualizar")})}catch(o){$q.notifyError("Ocorreu um erro ao combinar contatos",o)}finally{$q.loading.hide()}})},async selecionarCombinarOrigem(){const o=await $g.promptContato.show({filtro:{ativo:!0,somenteCarteira:!0,empresas:!1}});$lodash.get(o,"id")&&(this.origem=o)},async selecionarCombinarDestino(){const o=await $g.promptContato.show({filtro:{ativo:!0,somenteCarteira:!0}});$lodash.get(o,"id")&&(this.destino=o)}},emits:["update:modelValue","atualizar"],props:{modelValue:{required:!0,type:Boolean}}};function A(o,t,m,B,r,i){const l=d("campo");return u(),f($,{modelValue:m.modelValue,onHide:i.fechar},{default:a(()=>[e(p,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:{height:"100%","max-height":"400px"}},{default:a(()=>[e(h,{onSubmit:i.combinar,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",novalidate:""},{default:a(()=>[e(C,null,{default:a(()=>[e(g,null,{default:a(()=>[e(b,null,{default:a(()=>[e(y,{name:"compare_arrows",size:"sm",class:"q-mr-sm"}),_(" Combinar Contatos ")]),_:1})]),_:1})]),_:1}),e(w,null,{default:a(()=>[e(V,{class:"q-pa-md"},{default:a(()=>[e(l,{modelValue:r.origem.nome,"onUpdate:modelValue":t[0]||(t[0]=s=>r.origem.nome=s),somenteLeitura:"",filled:"",rotulo:"Contato de origem",after:[{icon:"search",handler:i.selecionarCombinarOrigem}],color:"primary",inputClass:"cursor-pointer",class:"q-mt-lg"},null,8,["modelValue","after"]),e(l,{modelValue:r.destino.nome,"onUpdate:modelValue":t[1]||(t[1]=s=>r.destino.nome=s),somenteLeitura:"",filled:"",rotulo:"Contato de destino",after:[{icon:"search",handler:i.selecionarCombinarDestino}],color:"primary",inputClass:"cursor-pointer",class:"q-mt-xl"},null,8,["modelValue","after"])]),_:1})]),_:1}),e(Q,{class:"bg-white text-right border-top q-pa-sm"},{default:a(()=>[e(q),v(e(n,{label:"Cancelar",color:"tertiary",flat:""},null,512),[[x]]),e(n,{label:"Combinar",color:"primary",unelevated:"",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","onHide"])}var T=c(k,[["render",A]]);export{T as C};
