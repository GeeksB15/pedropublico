import{_ as C,o as f,d as b,w as o,f as n,R as c,at as g,bf as P,S as m,T as p,k as l,t as u,n as y,F as S,B as h,e as w,aq as _}from"./index.129a5639.js";const x={computed:{rules(){return this.required?[e=>e!==""||"Selecione um munic\xEDpio"]:[]}},data(){return{cidade:"",cidades:[],hint:"",opcoes:[]}},emits:["selecionar"],methods:{buscarCidade(e,i){setTimeout(()=>{i(async()=>{if(!this.cidades.length&&await this.obterCidades(),e||(this.opcoes=this.cidades),e){const d=$utils.removerAcentos(e).toLowerCase().replace(/\s+/," ").trim().split(" ");this.opcoes=this.cidades.filter(a=>{let t=$utils.removerAcentos(a.municipio+" "+a.distrito+" "+a.uf).toLowerCase().replace(/\s+/," ").trim();for(const s of d)if(!~t.indexOf(s))return!1;return!0})}})},500)},async obterCidades(){return this.obtendoCidades?this.obtendoCidades:(this.obtendoCidades=new Promise(async(e,i)=>{try{const d=await $erp()._cidade.toArray(),a=[];d.sort((t,s)=>(t.nomeMunic||"").toLowerCase()<(s.nomeMunic||"").toLowerCase()?-1:1);for(const t of d)a.push({value:t.id,municipio:t.nomeMunic||"",distrito:t.nomeDistr||"",ibgeCod:t.cidadeCodIbge||"",uf:t.siglaUf||"",ufCod:t.uf||"",cidadeCodChave:t.cod});a.push({value:"Exterior",municipio:"Exterior",distrito:"",ibgeCod:"9999999",uf:"EX",ufCod:"",cidadeCodChave:null}),this.cidades=a,e()}catch(d){i(d)}}),this.obtendoCidades)},async obterCidadePorIbgeCod(){await this.obterCidades();const e=this.cidades.find(i=>String(i.ibgeCod)===String(this.ibgeCod));e||(this.cidade="",this.hint=""),e&&(this.cidade=e.municipio,this.hint="",e.ibgeCod&&(this.hint="C\xF3digo IBGE: "+e.ibgeCod))},selecionarCidade(e){this.cidade=e.municipio,this.hint="",e.ibgeCod&&(this.hint="C\xF3digo IBGE: "+e.ibgeCod),this.$emit("selecionar",e)}},props:{ibgeCod:[Number,String],required:Boolean,somenteLeitura:{type:Boolean,default:!1}},watch:{ibgeCod(){this.obterCidadePorIbgeCod()}},created(){this.obterCidades(),this.ibgeCod&&this.obterCidadePorIbgeCod()}};function B(e,i,d,a,t,s){return f(),b(_,{"model-value":t.cidade,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",label:"Cidade",options:t.opcoes,onFilter:s.buscarCidade,"onUpdate:modelValue":s.selecionarCidade,hint:t.hint,rules:s.rules,readonly:d.somenteLeitura},{option:o(r=>[n(c,g(P(r.itemProps)),{default:o(()=>[n(m,null,{default:o(()=>[n(p,null,{default:o(()=>[l(u(r.opt.municipio)+" - "+u(r.opt.uf),1)]),_:2},1024),n(p,{caption:""},{default:o(()=>[r.opt.municipio!==r.opt.distrito?(f(),y(S,{key:0},[i[0]||(i[0]=h("b",null,"Distrito:",-1)),l(" "+u(r.opt.distrito)+" ",1),i[1]||(i[1]=h("br",null,null,-1))],64)):w("",!0),i[2]||(i[2]=h("b",null,"C\xF3digo IBGE:",-1)),l(" "+u(r.opt.ibgeCod),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":o(()=>[n(c,null,{default:o(()=>[n(m,{class:"text-grey"},{default:o(()=>i[3]||(i[3]=[l(" Resultado n\xE3o encontrado ")])),_:1})]),_:1})]),_:1},8,["model-value","options","onFilter","onUpdate:modelValue","hint","rules","readonly"])}var V=C(x,[["render",B]]);const I={computed:{rules(){return this.required?[e=>e!==""||"Selecione um pa\xEDs"]:[]}},data(){return{pais:"",hint:"",opcoes:[]}},emits:["selecionar"],methods:{buscarPais(e,i){setTimeout(()=>{i(async()=>{if(e||(this.opcoes=$db.pais.lista),e){const d=$utils.tratamentoCompletoString(e).split(" ");this.opcoes=$db.pais.lista.filter(a=>{let t=$utils.tratamentoCompletoString(a.codigo+a.nome);for(const s of d)if(!~t.indexOf(s))return!1;return!0})}})},500)},async obterPaisPorCodigo(){const e=$db.pais.lista.find(i=>i.codigo===+this.codigoPais);e||(this.pais="",this.hint=""),e&&(this.pais=e.nome,this.hint="",e.codigo&&(this.hint="C\xF3digo do Pa\xEDs: "+e.codigo))},selecionarPais(e){this.pais=e.nome,this.hint="",e.codigo&&(this.hint="C\xF3digo do Pa\xEDs: "+e.codigo),this.$emit("selecionar",e)}},props:{codigoPais:[Number,String],required:Boolean,somenteLeitura:{type:Boolean,default:!1}},watch:{codigoPais(){this.obterPaisPorCodigo()}},created(){this.codigoPais&&this.obterPaisPorCodigo()}};function v(e,i,d,a,t,s){return f(),b(_,{"model-value":t.pais,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",label:"Pa\xEDs",options:t.opcoes,onFilter:s.buscarPais,"onUpdate:modelValue":s.selecionarPais,hint:t.hint,rules:s.rules,readonly:d.somenteLeitura},{option:o(r=>[n(c,g(P(r.itemProps)),{default:o(()=>[n(m,null,{default:o(()=>[n(p,null,{default:o(()=>[l(u(r.opt.codigo)+" - "+u(r.opt.nome),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":o(()=>[n(c,null,{default:o(()=>[n(m,{class:"text-grey"},{default:o(()=>i[0]||(i[0]=[l(" Resultado n\xE3o encontrado ")])),_:1})]),_:1})]),_:1},8,["model-value","options","onFilter","onUpdate:modelValue","hint","rules","readonly"])}var E=C(I,[["render",v]]);export{V as S,E as a};
