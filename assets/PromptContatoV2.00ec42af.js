import{_ as h,c7 as p,r as g,o as c,d as m,w as s,f as a,M as _,G as v,h as C,H as b,Q as y,N as w,i as k,s as x,I as V,C as Q,p as u,P as N,F as B,u as T,e as f,D}from"./index.a1a1867c.js";const H={components:{ContatoCard:p},computed:{contatosEncontrados(){return this.contatos.length}},data(){return{carregando:!1,contatos:[],contato:{},filtro:{},placeholder:"Buscar",termo:"",visivel:!1}},emits:["selecionar"],methods:{async filtrar(){let i;try{if(this.carregando=!0,i=setTimeout(()=>{$q.loading.show({message:"Carregando informa\xE7\xF5es...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"})},500),this.filtro.idContato){let n=[];if(this.filtro.compradores&&(n=await $db.contato.leCompradores(this.filtro.idContato)),this.filtro.convenios&&(n=await $db.contato.leConvenios(this.filtro.idContato)),this.termo){let l=new Set(this.termo.toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" "));l=Array.from(l),l.sort((e,t)=>e<t?1:-1),n=n.filter(e=>{let t=(e.nome||"")+" "+(e.apelido||"");t=t.toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"");for(const d of l)if(t.indexOf(d)===-1)return!1;return!0})}this.contatos=n;return}const o=await $db.contato.ler({filtros:{termoBusca:this.termo,...this.filtro},limit:30,page:1,sort:["nome"]});this.contatos=o.data}finally{this.carregando=!1,clearTimeout(i),$q.loading.hide()}},limpar(){this.carregando=!1,this.contatos=[],this.contato={},this.filtro={},this.placeholder="Buscar",this.termo=""},mostrar(){this.filtrar(),this.visivel=!0},onHide(){this.$emit("selecionar",JSON.parse(JSON.stringify(this.contato))),this.limpar()},selecionar(i={}){this.contato=i,this.visivel=!1}},updated(){this.$nextTick(function(){this.$refs.search&&this.$refs.search.focus()})}},L={class:"layout-padding",container:""},P={key:0},S={key:1,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function q(i,o,n,l,e,t){const d=g("contato-card");return c(),m(D,{modelValue:e.visivel,"onUpdate:modelValue":o[1]||(o[1]=r=>e.visivel=r),maximized:"",onHide:o[2]||(o[2]=r=>t.onHide())},{default:s(()=>[a(_,{class:"bg-white",container:""},{default:s(()=>[a(v,null,{default:s(()=>[a(C,null,{default:s(()=>[b(a(y,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[w]]),a(k,null,{default:s(()=>[a(x,{modelValue:e.termo,"onUpdate:modelValue":[o[0]||(o[0]=r=>e.termo=r),t.filtrar],color:"none",ref:"search",dark:"",placeholder:e.placeholder,debounce:"1500"},null,8,["modelValue","placeholder","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),a(V,null,{default:s(()=>[Q("div",L,[t.contatosEncontrados?(c(),u("div",P,[a(N,{link:"","no-border":"",separator:""},{default:s(()=>[(c(!0),u(B,null,T(e.contatos,r=>(c(),m(d,{key:r.id,contato:r,modo:"lista",onSelecionar:t.selecionar},null,8,["contato","onSelecionar"]))),128))]),_:1})])):f("",!0),!e.carregando&&!t.contatosEncontrados?(c(),u("div",S," Nenhum resultado encontrado ")):f("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var F=h(H,[["render",q]]);export{F as P};
