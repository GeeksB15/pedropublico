import{_ as p,aG as l,aE as c,o as d,n as m,B as b,f as S,w as j,F as h,s as w,d as g,b4 as _,b3 as v,A as y}from"./index.353e304f.js";const O={data(){return{abaSelecionada:"",abas:[]}},methods:{async atualizar(){this.abas=[],this.abaSelecionada=null;let o=JSON.parse(localStorage.getItem("clienteSistema"))||{};if(!(o||{}).idSistema)return;const i=(await l.objeto.where({nomeObjeto:this.objetoPai}).toArray()).find(e=>e.id);if(!(i||{}).id)return;let n=await l.sistemaObjeto.where({idPai:i.id,idSistema:o.idSistema}).toArray();if(!n.length)return;const s=await l.objeto.where("id").anyOf(n.map(e=>e.idObjeto)).toArray();if(!s.length)return;n=n.sort((e,a)=>(e.ordem||0)>(a.ordem||0)?1:-1);const t=[];for(const e of n){const a=s.find(f=>f.id===e.idObjeto);if(!a)continue;const u=JSON.parse(a.rota||null)||{};!await c.permissao.objeto(a.nomeObjeto)||a.tipo==="componente"&&!a.menuPrincipal&&(a.menuDesenvolvimento&&!(c.usuario.logado.desenvolvedor&&c.usuario.logado.desenvolvedor())||t.push({icon:a.icone||"",label:a.descricao||"",to:{name:u.name||""}}))}if(!t.length)return;let r=t.find(e=>e.to.name===this.$route.name);r||(r=t[0]),i.descricao!=="Cockpit"&&this.irPara(r.to),this.abaSelecionada=r.to.name,this.abas=t},irPara(o){this.$router.push({...o,...this.$route.params.id?{params:{id:this.$route.params.id}}:{}}),this.abaSelecionada=o.name}},props:{objetoPai:{type:String,required:!0}},watch:{"$route.name"(){this.abaSelecionada=this.$route.name}},mounted(){this.atualizar()}},P={class:"bg-gradiente text-white"},$={class:"u-container"};function k(o,i,n,s,t,r){return d(),m(h,null,[b("div",P,[b("div",$,[S(v,{modelValue:t.abaSelecionada,"onUpdate:modelValue":i[0]||(i[0]=e=>t.abaSelecionada=e),dense:"",align:"justify","text-color":"white",color:"transparent","indicator-color":"cyan-12",class:"text-white q-mb-md"},{default:j(()=>[(d(!0),m(h,null,w(t.abas,(e,a)=>(d(),g(_,{key:a,onClick:u=>r.irPara(e.to),name:e.to.name,label:e.label,icon:e.icon,class:"Layout-aba"},null,8,["onClick","name","label","icon"]))),128))]),_:1},8,["modelValue"])])]),y(o.$slots,"default")],64)}var A=p(O,[["render",k]]);export{A as M};
