import{_ as B,r as k,o as g,n as C,B as i,f as l,w as a,O as F,F as q,s as O,R as S,S as _,c$ as R,k as f,t as b,m as ae,Q as V,U as L,d as w,be as j,e as T,z as $,L as G,D as H,E as K,h as N,i as I,H as W,I as X,q as x,y as D,bD as Y,C as Z,j as te,N as J,T as p}from"./index.c8ffb049.js";import{Q as oe}from"./QBtnToggle.0de5267f.js";import{S as se}from"./SeletorCfop.bf149bf5.js";import{Q as ne}from"./QBtnGroup.348a379f.js";const Q={id:"",descricao:"",finalidade:100,json:{contribuinte:[{descricao:"Venda",interna:"",internaST:"",interestadual:"",interestadualST:""},{descricao:"Devolu\xE7\xE3o",interna:"",internaST:"",interestadual:"",interestadualST:""}],naoContribuinte:[{descricao:"Venda",interna:"",internaST:"",interestadual:"",interestadualST:""},{descricao:"Devolu\xE7\xE3o",interna:"",internaST:"",interestadual:"",interestadualST:""}]}},z={show:!1,titulo:"",documento:{}},ie={components:{SeletorCfop:se},data(){return{documentos:[],columnsContribuinte:[],columnsNaoContribuinte:[],opcoesFinalidade:[],modal:{},validations:{}}},methods:{async atualizar(){this.modal=$utils.clonarV2(z);try{const o=await $db.documentoOperacao.ler();for(const e of o){if(!e.json){e.json=$utils.clonarV2(Q.json);continue}e.json=JSON.parse(e.json)}this.documentos=o}catch(o){console.log(o)}},alterar(o){const e=this.documentos.find(n=>n.id===o);this.modal.documento=$utils.clonarV2(e),this.modal.titulo="Alterar opera\xE7\xE3o",this.modal.show=!0},descricaoFinalidade(o){var n;const e=this.documentos.find(d=>d.id===o);return(n=this.opcoesFinalidade.find(d=>d.value===e.finalidade))==null?void 0:n.label},inserir(){this.modal.documento=$utils.clonarV2(Q),this.modal.documento.id=$utils.uuid(),this.modal.titulo="Inserir opera\xE7\xE3o",this.modal.show=!0},async ativarDesativar(o){const e=this.documentos.find(d=>d.id===o),n={};n.original={id:e.id,ativo:!e.ativo},n.atual={id:e.id,ativo:e.ativo};try{await $db.documentoOperacao.gravar(n)}catch(d){console.log(d)}},async salvar(){if(!this.modal.documento.finalidade){$q.notify({message:"Selecione a finalidade",type:"negative"});return}const o=this.documentos.find(n=>n.id===this.modal.documento.id),e={};o&&(e.original=$utils.clonarV2(o),e.original.json=JSON.stringify(e.original.json)),e.atual=$utils.clonarV2(this.modal.documento),e.atual.json=JSON.stringify(e.atual.json);try{await $db.documentoOperacao.gravar(e)}catch(n){console.log(n)}finally{this.atualizar()}},voltar(o){o.stopPropagation();const e=this.documentos.find(d=>d.id===this.modal.documento.id);let n={};if(e||(n=$utils.diferencaObjetos(Q,this.modal.documento)),e&&(n=$utils.diferencaObjetos(e,this.modal.documento)),delete n.id,console.log("diferenca: ",n),!Object.keys(n).length){this.modal=$utils.clonarV2(z);return}$q.dialog({message:"Deseja descartar as modifica\xE7\xF5es?",title:"Descartar",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Descartar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.modal=$utils.clonarV2(z)})}},async beforeMount(){this.columnsContribuinte=[{name:"descricao",align:"left",label:"PJ Contribuinte",field:"descricao",sortable:!1},{name:"interna",align:"left",label:"Interna",field:"interna",sortable:!1},{name:"internaST",align:"left",label:"Interna ST",field:"internaST",sortable:!1},{name:"interestadual",align:"left",label:"Interestadual",field:"interestadual",sortable:!1},{name:"interestadualST",align:"left",label:"Interestadual ST",field:"interestadualST",sortable:!1}],this.columnsNaoContribuinte=[{name:"descricao",align:"left",label:"PF/PJ N\xE3o Contribuinte",field:"descricao",sortable:!1},{name:"interna",align:"left",label:"Interna",field:"interna",sortable:!1},{name:"internaST",align:"left",label:"Interna ST",field:"internaST",sortable:!1},{name:"interestadual",align:"left",label:"Interestadual",field:"interestadual",sortable:!1},{name:"interestadualST",align:"left",label:"Interestadual ST",field:"interestadualST",sortable:!1}],this.opcoesFinalidade=[{label:"Revenda",value:99},{label:"Consumo",value:100}],this.validations={required:[o=>o.length||"Campo obrigat\xF3rio"]},this.atualizar()}},re={class:"text-left q-mt-lg u-container"},de={class:"q-card bg-white q-my-md no-shadow"},ue={class:"q-mt-md text-center"},ce={class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},me={class:"col-12"},fe={class:"col"},ge={class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},he={class:"col-12"},be={class:"col-12 col-md"},pe={class:"col-6 col-md"},_e={class:"col-6 col-md"},ve={class:"col-6 col-md"},Ve={class:"col-6 col-md"},we={key:0,class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},ye={class:"col-12"},Ce={class:"col-12 col-md"},Se={class:"col-6 col-md"},qe={class:"col-6 col-md"},Te={class:"col-6 col-md"},ke={class:"col-6 col-md"};function xe(o,e,n,d,s,u){const c=k("row"),m=k("SeletorCfop");return g(),C(q,null,[i("div",re,[i("div",de,[l($,{group:"somegroup",icon:"explore",label:"Opera\xE7\xF5es",class:"border-1 q-my-sm"},{default:a(()=>[l(F,{highlight:"",class:"q-ma-sm q-pb-md"},{default:a(()=>[(g(!0),C(q,null,O(s.documentos,t=>(g(),C(q,{key:t.id},[l(S,{class:"row u-separador q-my-none"},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(R,{color:t.ativo?"positive":"tertiary",small:""},{default:a(()=>[f(" #"+b(t.id.slice(-6)),1)]),_:2},1032,["color"]),l(ae,null,{default:a(()=>[f(b(t.ativo?"Ativado":"Desativado"),1)]),_:2},1024)]),_:2},1024),l(_,null,{default:a(()=>[f(b(t.descricao),1)]),_:2},1024),l(_,{avatar:""},{default:a(()=>[l(R,{color:"tertiary",small:""},{default:a(()=>[f(b(u.descricaoFinalidade(t.id)),1)]),_:2},1024)]),_:2},1024),l(_,{avatar:""},{default:a(()=>[l(c,{class:"q-col-gutter-x-sm itens-end"},{default:a(()=>[l(V,{color:"primary",dense:"",flat:"",icon:"edit",round:"",onClick:r=>u.alterar(t.id)},null,8,["onClick"]),i("div",null,[l(L,{modelValue:t.ativo,"onUpdate:modelValue":[r=>t.ativo=r,r=>u.ativarDesativar(t.id)],"checked-icon":"check",color:"green","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),t.json?(g(),w(S,{key:0},{default:a(()=>[l(_,null,{default:a(()=>[l(c,{class:"q-col-gutter-md q-mb-md"},{default:a(()=>[t.json.contribuinte[0].interna?(g(),w(j,{key:0,dense:"",flat:"",rows:t.json.contribuinte,columns:s.columnsContribuinte,"row-key":"descricao",class:"col-xs-12 col-md-6","hide-bottom":""},null,8,["rows","columns"])):T("",!0),t.json.naoContribuinte[0].interna?(g(),w(j,{key:1,dense:"",flat:"",rows:t.json.naoContribuinte,columns:s.columnsNaoContribuinte,"row-key":"descricao",class:"col-xs-12 col-md-6","hide-bottom":""},null,8,["rows","columns"])):T("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):T("",!0)],64))),128)),i("div",ue,[l(V,{color:"positive",icon:"add",label:"Opera\xE7\xE3o",outline:"",size:"sm",onClick:u.inserir},null,8,["onClick"])])]),_:1})]),_:1})])]),l(Z,{modelValue:s.modal.show,"onUpdate:modelValue":e[2]||(e[2]=t=>s.modal.show=t),maximized:"","content-css":{maxWidth:"80vw"},persistent:"",onKeyup:Y(u.voltar,["esc"])},{default:a(()=>[l(G,{container:"",class:"bg-light"},{default:a(()=>[l(H,{onSubmit:u.salvar},{default:a(()=>[l(K,null,{default:a(()=>[l(N,null,{default:a(()=>[l(V,{dense:"",flat:"",icon:"arrow_back",round:"",onClick:u.voltar},null,8,["onClick"]),l(I,null,{default:a(()=>[f(b(s.modal.titulo),1)]),_:1}),l(V,{class:"bg-white text-primary",label:"Salvar",unelevated:"",type:"submit"})]),_:1})]),_:1}),l(W,null,{default:a(()=>[l(X,{class:"u-container q-pt-md"},{default:a(()=>[i("div",ce,[l(c,{class:"items-center"},{default:a(()=>[i("div",me,[l(x,{modelValue:s.modal.documento.descricao,"onUpdate:modelValue":e[0]||(e[0]=t=>s.modal.documento.descricao=t),label:"Descri\xE7\xE3o",rules:s.validations.required},null,8,["modelValue","rules"])])]),_:1}),l(c,{class:"items-center q-mt-md"},{default:a(()=>[e[3]||(e[3]=i("div",{class:"col"},"Finalidade",-1)),i("div",fe,[l(oe,{unelevated:"",modelValue:s.modal.documento.finalidade,"onUpdate:modelValue":e[1]||(e[1]=t=>s.modal.documento.finalidade=t),"toggle-color":"primary",options:s.opcoesFinalidade},null,8,["modelValue","options"])]),e[4]||(e[4]=i("div",{class:"col"}," \xA0\xA0\xA0 ",-1)),e[5]||(e[5]=i("div",{class:"col"}," \xA0\xA0\xA0 ",-1)),e[6]||(e[6]=i("div",{class:"col"}," \xA0\xA0\xA0 ",-1))]),_:1})]),i("div",ge,[l(c,{class:"items-center"},{default:a(()=>[i("div",he,[l(D,{class:"no-shadow rounded-borders"},{default:a(()=>[l(N,{class:"q-pa-none"},{default:a(()=>[l(I,{class:"text-tertiary"},{default:a(()=>e[7]||(e[7]=[f("PJ Contribuinte")])),_:1})]),_:1}),l(c,{class:"items-center q-col-gutter-md"},{default:a(()=>e[8]||(e[8]=[i("div",{class:"col-12 col-md"}," \xA0\xA0\xA0 ",-1),i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interna")],-1),i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interna ST")],-1),i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interestadual")],-1),i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interestadual ST")],-1)])),_:1}),(g(!0),C(q,null,O(s.modal.documento.json.contribuinte,t=>(g(),w(c,{key:t.descricao,class:"items-center q-col-gutter-md"},{default:a(()=>[i("div",be,b(t.descricao),1),i("div",pe,[l(m,{modelValue:t.interna,"onUpdate:modelValue":r=>t.interna=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",_e,[l(m,{modelValue:t.internaST,"onUpdate:modelValue":r=>t.internaST=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",ve,[l(m,{modelValue:t.interestadual,"onUpdate:modelValue":r=>t.interestadual=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",Ve,[l(m,{modelValue:t.interestadualST,"onUpdate:modelValue":r=>t.interestadualST=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])])]),_:2},1024))),128))]),_:1})])]),_:1})]),s.modal.documento.finalidade===100?(g(),C("div",we,[l(c,{class:"items-center"},{default:a(()=>[i("div",ye,[l(D,{class:"no-shadow rounded-borders"},{default:a(()=>[l(N,{class:"q-pa-none"},{default:a(()=>[l(I,{class:"text-tertiary"},{default:a(()=>e[9]||(e[9]=[f("PF/PJ N\xE3o Contribuinte")])),_:1})]),_:1}),l(c,{class:"items-center q-col-gutter-md"},{default:a(()=>e[10]||(e[10]=[i("div",{class:"col-12 col-md"}," \xA0\xA0\xA0 ",-1),i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interna")],-1),i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interna ST")],-1),i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interestadual")],-1),i("div",{class:"col-6 col-md"},[i("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Interestadual ST")],-1)])),_:1}),(g(!0),C(q,null,O(s.modal.documento.json.naoContribuinte,t=>(g(),w(c,{key:t.descricao,class:"items-center q-col-gutter-md"},{default:a(()=>[i("div",Ce,b(t.descricao),1),i("div",Se,[l(m,{modelValue:t.interna,"onUpdate:modelValue":r=>t.interna=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",qe,[l(m,{modelValue:t.internaST,"onUpdate:modelValue":r=>t.internaST=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",Te,[l(m,{modelValue:t.interestadual,"onUpdate:modelValue":r=>t.interestadual=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])]),i("div",ke,[l(m,{modelValue:t.interestadualST,"onUpdate:modelValue":r=>t.interestadualST=r,rules:s.validations.required},null,8,["modelValue","onUpdate:modelValue","rules"])])]),_:2},1024))),128))]),_:1})])]),_:1})])):T("",!0)]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","onKeyup"])],64)}var Ne=B(ie,[["render",xe]]);const M={id:"",ncm:"",descricao:"",cest:"",dataVigenteInicial:"",dataVigenteFinal:"",json:[]},P={show:!1,titulo:"",ncm:{}},Ie={data(){return{columnsNCM:[],ncms:[],ncmsFiltrados:[],ufsDescricao:[],ufsNcm:[],pagination:{},fullText:{},termoBusca:"",modal:{},validations:{},loading:!1,hint:{}}},methods:{async atualizar(){try{this.loading=!0;const o=await $db.ncm.ler();this.obterJson(o),this.obterTermos(o),this.ncms=o,await this.buscar()}catch(o){console.log(o)}finally{this.loading=!1}},alterar(o){const e=this.ncms.find(n=>n.id===o);this.obterUfs(e),this.modal.ncm=$utils.clonarV2(e),this.modal.titulo="Alterar NCM",this.modal.show=!0},async buscar(){try{if(this.loading=!0,await $utils.dormir(500),!this.termoBusca.trim()){this.ncmsFiltrados=$utils.clonarV2(this.ncms);return}let o=$utils.removerAcentos(this.termoBusca).toLowerCase().trim().replace(/\s+/g," ").split(" ");if(this.hint.show=!1,!o.find(n=>n.length>=3)){this.hint.show=!0;return}o=Array.from(new Set(o)),o.sort((n,d)=>n.length<d.length?1:-1);const e=[];for(const n in this.fullText){const d=this.fullText[n];if(!d)continue;let s=!0;for(const c of o)if(!~d.indexOf(c)){s=!1;break}if(!s)continue;const u=$utils.clonarV2(this.ncms.find(c=>c.id===n));e.push(u),this.destacarTexto(["ncm","descricao"],u,o)}this.ncmsFiltrados=e}catch(o){console.log(o)}finally{this.loading=!1}},descricaoST(o){const e=this.ncms.find(d=>d.id===o),n=[];for(const d of(e==null?void 0:e.json)||[])n.push(d);return n.sort((d,s)=>d<s?-1:1),n.join(", ")},descricaoUF(o){const e=this.ufsDescricao.find(n=>n.sigla===o);return`${e.nome} (${e.sigla})`},inserir(){const o=$utils.clonarV2(M);this.obterUfs(o),this.modal.ncm=$utils.clonarV2(M),this.modal.ncm.id=$utils.uuid(),this.modal.titulo="Inserir NCM",this.modal.show=!0},obterJson(o){for(const e of o){if(!e.json){e.json=$utils.clonarV2(M.json);continue}e.json=JSON.parse(e.json)}},desmarcarTodos(){for(const o of this.ufsNcm)o.st=!1},inverterSelecao(){for(const o of this.ufsNcm)o.st=!o.st},destacarTexto(o,e,n){var d,s,u,c;for(const m of o){const t=$utils.removerAcentos(e[m]||"").toLowerCase(),r=[];for(const h of n){const y=new RegExp(h,"g");for(const A of[...t.matchAll(y)].map(le=>le.index))r.push({from:A,length:h.length})}r.sort((h,y)=>h.from<y.from?-1:1);let v=0;for(;!(!(r.length>1)||v+1>=r.length);){const h=r[v].from+r[v].length,y=r[v+1].from;if(h>y){r[v].length=r[v].length>r[v+1].length?r[v].length:r[v+1].length,r.splice(v+1,1),v=0;continue}v++}let U=e[m].substr(0,((d=r[0])==null?void 0:d.from)||0);for(let h=0;h<r.length;h++){U+='<mark style="background-color:#fafcb8 !important">'+e[m].substr(r[h].from,r[h].length)+"</mark>";const y=r[h].from+r[h].length,A=(((s=r[h+1])==null?void 0:s.from)||y)-y;U+=e[m].substr(y,A)}const E=r.length-1,ee=(((u=r[E])==null?void 0:u.from)||0)+(((c=r[E])==null?void 0:c.length)||0);U+=e[m].substr(ee,e[m].length),e[m]=U}},obterTermos(o){this.fullText=[];for(const e of o)this.fullText[e.id]=`${e.ncm} ${$utils.removerAcentos(e.descricao)}`.toLowerCase()},obterUfs(o){const e=[{uf:"AC",st:!1},{uf:"AL",st:!1},{uf:"AP",st:!1},{uf:"AM",st:!1},{uf:"BA",st:!1},{uf:"CE",st:!1},{uf:"DF",st:!1},{uf:"ES",st:!1},{uf:"GO",st:!1},{uf:"MA",st:!1},{uf:"MT",st:!1},{uf:"MS",st:!1},{uf:"MG",st:!1},{uf:"PA",st:!1},{uf:"PB",st:!1},{uf:"PR",st:!1},{uf:"PE",st:!1},{uf:"PI",st:!1},{uf:"RJ",st:!1},{uf:"RN",st:!1},{uf:"RS",st:!1},{uf:"RO",st:!1},{uf:"RR",st:!1},{uf:"SC",st:!1},{uf:"SP",st:!1},{uf:"SE",st:!1},{uf:"TO",st:!1}];if(!(o.json||[]).length){this.ufsNcm=$utils.clonarV2(e);return}for(const n of o.json){const d=e.find(s=>s.uf===n);!d||(d.st=!0)}this.ufsNcm=$utils.clonarV2(e)},async remover(o){try{await new Promise((e,n)=>{$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Deseja remover o NCM?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{e()}).onCancel(()=>{n()})})}catch{return}try{const e=this.ncms.find(n=>n.id===o);await $db.ncm.remover(e)}catch(e){console.log(e)}finally{this.atualizar()}},async salvar(){const o=this.ncms.find(n=>n.id===this.modal.ncm.id),e={};o&&(e.original=$utils.clonarV2(o),e.original.json=JSON.stringify(e.original.json)),e.atual=$utils.clonarV2(this.modal.ncm),e.atual.json=[];for(const n of this.ufsNcm)!n.st||e.atual.json.push(n.uf);e.atual.json=JSON.stringify(e.atual.json);try{await $db.ncm.gravar(e)}catch(n){console.log(n)}finally{this.modal=$utils.clonarV2(P),this.atualizar()}},voltar(o){o.stopPropagation();const e=this.ncms.find(d=>d.id===this.modal.ncm.id);let n={};if(e||(n=$utils.diferencaObjetos(M,this.modal.ncm)),e&&(n=$utils.diferencaObjetos(e,this.modal.ncm)),delete n.id,!Object.keys(n).length){this.modal=$utils.clonarV2(P);return}$q.dialog({message:"Deseja descartar as modifica\xE7\xF5es?",title:"Descartar",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Descartar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.modal=$utils.clonarV2(P)})}},async beforeMount(){this.pagination={rowsPerPage:25},this.columnsNCM=[{name:"id",align:"left",label:"ID",field:"id",sortable:!1},{name:"ncm",align:"left",label:"NCM",field:"ncm",sortable:!1},{name:"descricao",align:"left",label:"Descri\xE7\xE3o",field:"descricao",sortable:!1},{name:"cest",align:"left",label:"CEST",field:"cest",sortable:!1},{name:"dataVigenteInicial",align:"left",label:"Vig\xEAncia",field:"dataVigenteInicial",sortable:!1},{name:"alterar",align:"left",label:"Alterar",sortable:!1},{name:"remover",align:"left",label:"Remover",sortable:!1}],this.ufsDescricao=[{nome:"Acre",sigla:"AC"},{nome:"Alagoas",sigla:"AL"},{nome:"Amap\xE1",sigla:"AP"},{nome:"Amazonas",sigla:"AM"},{nome:"Bahia",sigla:"BA"},{nome:"Cear\xE1",sigla:"CE"},{nome:"Distrito Federal",sigla:"DF"},{nome:"Esp\xEDrito Santo",sigla:"ES"},{nome:"Goi\xE1s",sigla:"GO"},{nome:"Maranh\xE3o",sigla:"MA"},{nome:"Mato Grosso",sigla:"MT"},{nome:"Mato Grosso do Sul",sigla:"MS"},{nome:"Minas Gerais",sigla:"MG"},{nome:"Par\xE1",sigla:"PA"},{nome:"Para\xEDba",sigla:"PB"},{nome:"Paran\xE1",sigla:"PR"},{nome:"Pernambuco",sigla:"PE"},{nome:"Piau\xED",sigla:"PI"},{nome:"Rio de Janeiro",sigla:"RJ"},{nome:"Rio Grande do Norte",sigla:"RN"},{nome:"Rio Grande do Sul",sigla:"RS"},{nome:"Rond\xF4nia",sigla:"RO"},{nome:"Roraima",sigla:"RR"},{nome:"Santa Catarina",sigla:"SC"},{nome:"S\xE3o Paulo",sigla:"SP"},{nome:"Sergipe",sigla:"SE"},{nome:"Tocantins",sigla:"TO"}],this.validations={required:[o=>o.length||"Campo obrigat\xF3rio"],ncm:[o=>o.length||"Campo obrigat\xF3rio",o=>o.length>=8||"O NCM deve ser composto de 8 d\xEDgitos",o=>{const e=this.ncms.find(n=>n.ncm===o);return!e||e.id===this.modal.ncm.id?!0:"NCM j\xE1 existente"}]},this.hint={msg:"Para pesquisar digite termo(s) com 3 caracteres ou mais",show:!1},this.modal=$utils.clonarV2(P),this.atualizar()}},Ue={class:"text-left q-mt-lg u-container"},Me={class:"q-card bg-white q-my-md no-shadow"},Pe={class:"q-gutter-xs"},Fe=["innerHTML"],Oe=["innerHTML"],De={class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},Ae={class:"col-12"},Qe={class:"q-card bg-white no-shadow q-mb-md q-px-md q-pb-md"},ze={class:"col-12"},Re={class:"q-pb-md q-gutter-y-md column items-end"};function je(o,e,n,d,s,u){const c=k("campo"),m=k("row");return g(),C(q,null,[i("div",Ue,[i("div",Me,[l($,{group:"somegroup",icon:"explore",label:"NCM",class:"border-1 q-my-sm"},{default:a(()=>[l(F,{highlight:"",class:"q-ma-sm q-pb-md"},{default:a(()=>[l(j,{dense:"",flat:"",rows:s.ncmsFiltrados,columns:s.columnsNCM,pagination:s.pagination,class:"col-xs-12 col-md-6",grid:"",loading:s.loading},{"top-right":a(()=>[l(x,{outlined:"",dense:"",debounce:"300",modelValue:s.termoBusca,"onUpdate:modelValue":[e[0]||(e[0]=t=>s.termoBusca=t),u.buscar],placeholder:"Pesquisar",hint:s.hint.show?s.hint.msg:""},{append:a(()=>[l(te,{name:"search"})]),_:1},8,["modelValue","onUpdate:modelValue","hint"])]),"top-left":a(()=>[i("div",Pe,[l(V,{icon:"refresh",outline:"",size:"sm",onClick:u.atualizar},null,8,["onClick"]),l(V,{color:"positive",icon:"add",label:"NCM",outline:"",size:"sm",onClick:u.inserir},null,8,["onClick"])])]),item:a(t=>[l(D,{class:"my-card",flat:"",bordered:""},{default:a(()=>[l(J,{class:"row justify-between"},{default:a(()=>[l(R,{color:"positive",small:""},{default:a(()=>[f(" #"+b(t.row.id.slice(-6)),1)]),_:2},1024),i("div",null,[l(V,{color:"primary",dense:"",flat:"",size:"sm",icon:"edit",round:"",onClick:r=>u.alterar(t.row.id)},null,8,["onClick"])])]),_:2},1024),l(J,null,{default:a(()=>[l(F,null,{default:a(()=>[l(S,null,{default:a(()=>[l(_,null,{default:a(()=>[l(p,null,{default:a(()=>e[7]||(e[7]=[f("NCM")])),_:1}),l(p,{caption:""},{default:a(()=>[i("span",{innerHTML:t.row.ncm},null,8,Fe)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(S,null,{default:a(()=>[l(_,null,{default:a(()=>[l(p,null,{default:a(()=>e[8]||(e[8]=[f("Descri\xE7\xE3o")])),_:1}),l(p,{caption:"",class:"word-break"},{default:a(()=>[i("span",{innerHTML:t.row.descricao},null,8,Oe)]),_:2},1024)]),_:2},1024)]),_:2},1024),(t.row.cest||"").trim()?(g(),w(S,{key:0},{default:a(()=>[l(_,null,{default:a(()=>[l(p,null,{default:a(()=>e[9]||(e[9]=[f("CEST")])),_:1}),l(p,{caption:"",class:"word-break"},{default:a(()=>[f(b(t.row.cest),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):T("",!0),u.descricaoST(t.row.id)?(g(),w(S,{key:1},{default:a(()=>[l(_,null,{default:a(()=>[l(p,null,{default:a(()=>e[10]||(e[10]=[f("ST")])),_:1}),l(p,{caption:"",class:"word-break"},{default:a(()=>[f(b(u.descricaoST(t.row.id)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):T("",!0),l(S,null,{default:a(()=>[(t.row.dataVigenteInicial||"").trim()?(g(),w(_,{key:0},{default:a(()=>[l(p,null,{default:a(()=>e[11]||(e[11]=[f("Vig\xEAncia Inicial")])),_:1}),l(p,{caption:""},{default:a(()=>[f(b(o.$filters.data(t.row.dataVigenteInicial)),1)]),_:2},1024)]),_:2},1024)):T("",!0),(t.row.dataVigenteFinal||"").trim()?(g(),w(_,{key:1},{default:a(()=>[l(p,null,{default:a(()=>e[12]||(e[12]=[f("Vig\xEAncia Final")])),_:1}),l(p,{caption:""},{default:a(()=>[f(b(o.$filters.data(t.row.dataVigenteFinal)),1)]),_:2},1024)]),_:2},1024)):T("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","columns","pagination","loading"])]),_:1})]),_:1})])]),l(Z,{modelValue:s.modal.show,"onUpdate:modelValue":e[6]||(e[6]=t=>s.modal.show=t),maximized:"","content-css":{maxWidth:"80vw"},persistent:"",onKeyup:Y(u.voltar,["esc"])},{default:a(()=>[l(G,{container:"",class:"bg-light"},{default:a(()=>[l(H,{onSubmit:u.salvar},{default:a(()=>[l(K,null,{default:a(()=>[l(N,null,{default:a(()=>[l(V,{dense:"",flat:"",icon:"arrow_back",round:"",onClick:u.voltar},null,8,["onClick"]),l(I,null,{default:a(()=>[f(b(s.modal.titulo),1)]),_:1}),l(V,{class:"bg-white text-primary",label:"Salvar",unelevated:"",type:"submit"})]),_:1})]),_:1}),l(W,null,{default:a(()=>[l(X,{class:"u-container q-pt-md"},{default:a(()=>[i("div",De,[l(m,{class:"items-center"},{default:a(()=>[i("div",Ae,[l(x,{modelValue:s.modal.ncm.ncm,"onUpdate:modelValue":e[1]||(e[1]=t=>s.modal.ncm.ncm=t),mask:"########",maxlength:"8",label:"NCM",rules:s.validations.ncm},null,8,["modelValue","rules"]),l(x,{modelValue:s.modal.ncm.descricao,"onUpdate:modelValue":e[2]||(e[2]=t=>s.modal.ncm.descricao=t),maxlength:"500",label:"Descri\xE7\xE3o",rules:s.validations.required},null,8,["modelValue","rules"]),l(x,{modelValue:s.modal.ncm.cest,"onUpdate:modelValue":e[3]||(e[3]=t=>s.modal.ncm.cest=t),maxlength:"135",label:"CEST"},null,8,["modelValue"]),l(c,{modelValue:s.modal.ncm.dataVigenteInicial,"onUpdate:modelValue":e[4]||(e[4]=t=>s.modal.ncm.dataVigenteInicial=t),tipo:"data",rotulo:"Vig\xEAncia Inicial"},null,8,["modelValue"]),l(c,{modelValue:s.modal.ncm.dataVigenteFinal,"onUpdate:modelValue":e[5]||(e[5]=t=>s.modal.ncm.dataVigenteFinal=t),tipo:"data",rotulo:"Vig\xEAncia Final"},null,8,["modelValue"])])]),_:1})]),i("div",Qe,[l(m,{class:"items-center"},{default:a(()=>[i("div",ze,[l(D,{class:"no-shadow rounded-borders"},{default:a(()=>[l(N,{class:"q-pa-none"},{default:a(()=>[l(I,{class:"text-tertiary"},{default:a(()=>e[13]||(e[13]=[f("Substitui\xE7\xE3o Tribut\xE1ria por UF")])),_:1})]),_:1}),i("div",null,[i("div",Re,[l(ne,{push:""},{default:a(()=>[l(V,{push:"",label:"Desmarcar todos",icon:"remove_done",onClick:u.desmarcarTodos},null,8,["onClick"]),l(V,{push:"",label:"Inverter sele\xE7\xE3o",icon:"rule",onClick:u.inverterSelecao},null,8,["onClick"])]),_:1})]),l(F,{bordered:""},{default:a(()=>[(g(!0),C(q,null,O(s.ufsNcm,t=>(g(),w(S,{key:t.uf},{default:a(()=>[l(_,null,{default:a(()=>[l(p,null,{default:a(()=>[f(b(u.descricaoUF(t.uf)),1)]),_:2},1024)]),_:2},1024),l(_,{side:""},{default:a(()=>[l(L,{color:"blue",modelValue:t.st,"onUpdate:modelValue":r=>t.st=r,val:"1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})])]),_:1})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","onKeyup"])],64)}var Be=B(Ie,[["render",je],["__scopeId","data-v-8f10a9c0"]]);const Ee={components:{Operacoes:Ne,NCM:Be}};function Je(o,e,n,d,s,u){const c=k("Operacoes"),m=k("NCM");return g(),C(q,null,[l(c),l(m)],64)}var Ke=B(Ee,[["render",Je]]);export{Ke as default};
