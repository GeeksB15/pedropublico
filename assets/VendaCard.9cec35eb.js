import{_ as ye,bj as ge,r as K,o as d,n as w,F as V,d as u,w as e,f as a,B as p,h as Ce,i as we,T as _,k as i,t as c,d1 as X,j as h,G as H,d2 as pe,e as v,m as W,l as j,O as J,s as M,R as y,S as l,Q as T,az as Y,M as N,y as xe,bu as qe,bd as _e}from"./index.9b156bba.js";import{e as Ve}from"./emitirNFe.35117289.js";import{D as Fe}from"./DocumentosFiscais.9a161678.js";import{M as Ee}from"./ModalHistoricoStatus.d2a763d2.js";const De={components:{DocumentosFiscais:Fe,ModalHistoricoStatus:Ee,VendaModal:ge},computed:{config(){return $db.configuracoes.valores},podeMigrarFatura(){return!~["Aguardando Estoque","Aguardando Financeiro","Aguardando Aprova\xE7\xE3o","Aguardando Pagamento","Cancelado","N\xE3o Aprovado","Or\xE7amento","Faturado"].indexOf(this.dados.venda.status)}},data(){return{dbUsuario:$db.usuario,width:0,dados:{venda:{}},fatura:{},status:{"Aguardando Confer\xEAncia":"orange","Aguardando Embalagem":"orange","Aguardando Entrega":"orange","Aguardando Libera\xE7\xE3o":"orange","Aguardando Separa\xE7\xE3o":"orange","Aguardando Estoque":"orange","Aguardando Financeiro":"orange","Aguardando Aprova\xE7\xE3o":"orange","Aguardando Pagamento":"tertiary","Aguardando Faturamento":"tertiary","Em Confer\xEAncia":"orange","Em Separa\xE7\xE3o":"orange",Faturado:"positive",Entregue:"positive",Cancelado:"red","N\xE3o Aprovado":"amber",Or\u00E7amento:"orange"},contatos:{},faturasAbertas:[],detalhesVisivel:!1,visibilidade:{botao:{editar:!1,remover:!1}},modalDevolucaoGarantia:{visivel:!1,item:{},orcamento:{}},sistemaPai:"",configImpressaoOrcamento:[],configImpressosWhatsapp:[],documentoItemKit:{},quantidadeProdutos:0}},emits:["executar","carregou","verificarListaLayout"],mixins:[Ve],props:{id:{type:String,required:!0},dadosVenda:{type:Object,required:!1},vendasCompletas:{type:Object,required:!1},resetarEnvio:{type:Function,required:!1},layout:{type:String,default:"card"}},methods:{async duplicarVenda(){try{await new Promise((o,s)=>{this.$q.dialog({message:"Duplicar este pedido?",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{o()}).onCancel(()=>{s()})})}catch{return}try{const o=await $db.venda.duplicarVenda(this.id);this.$refs.vendaModal.mostrar({id:o}),this.$q.notify({type:"positive",message:"Pedido duplicado"})}catch(o){let s="N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o";/^GError:.+/.test(o.message)&&(s=o.message.slice(7)),this.$q.notify({type:"negative",message:s}),console.error(o)}},irParaAtendimentoFatura(o){this.$router.push({name:"AtendimentoFatura",params:{id:o}})},async migrarFatura(o){try{await new Promise((s,g)=>{this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 migrar esta venda para outra fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{s()}).onCancel(()=>{g()})})}catch{return}o||(o=$db.fatura.criar(this.dados.venda),await $db.fatura.grava({fatura:o})),o.id?(await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:o.id},original:{id:this.dados.venda.id}}),localStorage.setItem("idFatura",o.id),this.dados.venda.idContato&&(this.$emit("executar","atualizar"),this.irParaAtendimentoFatura(this.dados.venda.idContato))):this.$q.notify("N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o")},alternarDetalhes(o){this.detalhesVisivel=!this.detalhesVisivel,this.layout==="lista"&&this.$emit("verificarListaLayout",{id:o,acao:"detalhes",estado:this.detalhesVisivel})},async atualizar(){var g;const o=await $db.venda.leCompleto(this.id);o.carrinho.sort((m,t)=>new Date(m.dataHoraEmissao)<new Date(t.dataHoraEmissao)?-1:1),o.oss.sort((m,t)=>new Date(m.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),o.customs.sort((m,t)=>new Date(m.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),o.kits.sort((m,t)=>new Date(m.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),(g=o.venda)!=null&&g.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:o.venda.idFatura}));for(const m of o.kits){const t=m.documentosItem.find(f=>f.operacaoFator===-1&&f.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[m.documento.id]=t}if((o.venda||{}).idContato&&(o.venda||{}).idEmpresa){let m=[];m=await $db.fatura.obterAbertas(o.venda.idContato,o.venda.idEmpresa),this.faturasAbertas=m.sort((t,f)=>!t.numero||t.numero<f.numero?-1:1)}const s={};if(o.venda.idContato){const m=o.venda.idContato;s[m]||(s[m]=await $db.contato.le({id:m}))}if(o.venda.idContatoVendedor){const m=o.venda.idContatoVendedor;s[m]||(s[m]=await $db.contato.le({id:m}))}this.configuraImpressaoOrcamento(o.venda.idEmpresa),this.configuraImpressosWhatsapp(o.venda),this.contatos=s,this.dados=o,await this.$nextTick(),o.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:o.venda.id}),localStorage.removeItem("idVenda"))},async atualizarComDados(){var s,g,m,t;const o=await $db.venda.preparaDados(this.dadosVenda);o.carrinho.sort((f,F)=>new Date(f.dataHoraEmissao)<new Date(F.dataHoraEmissao)?-1:1),o.oss.sort((f,F)=>new Date(f.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),o.customs.sort((f,F)=>new Date(f.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),o.kits.sort((f,F)=>new Date(f.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),(s=o.venda)!=null&&s.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:o.venda.idFatura}));for(const f of o.kits){const F=f.documentosItem.find(G=>G.operacaoFator===-1&&G.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[f.documento.id]=F}this.faturasAbertas=((m=(g=this.vendasCompletas)==null?void 0:g.faturasAbertas)==null?void 0:m.filter(f=>f.idEmpresa===o.venda.idEmpresa))||[],this.configuraImpressaoOrcamento(o.venda.idEmpresa),this.configuraImpressosWhatsapp(o.venda),this.contatos=((t=this.vendasCompletas)==null?void 0:t.dadosContatos)||{},this.dados=o,await this.$nextTick(),o.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:o.venda.id}),localStorage.removeItem("idVenda"))},async configuraImpressaoOrcamento(o){const s=await $db.configuracoes.porNome("impressao.venda",o),g=[{valor:"invoice",texto:"Or\xE7amento/Venda (Invoice)"}];this.sistemaPai==="optisoul"&&g.push({valor:"orcamento",texto:"Or\xE7amento (Antigo)"},{valor:"termoGarantia",texto:"Termo de Garantia"}),this.configImpressaoOrcamento=[...s.length?s.map(m=>({texto:"Imprimir Or\xE7amento",...m})):g]},async configuraImpressosWhatsapp(o){const s=await $db.configuracoes.le({prefixoNome:"venda.whatsapp.enviar.",idEmpresa:o.idEmpresa});this.configImpressosWhatsapp=s.map(g=>({...g,idVenda:o.id}))},async dialogEnviar(o){var s,g;try{const m=await $db.hibrido.le({table:"documento",id:o.idVenda});$utils.verificarErro(!(m!=null&&m.id),"Erro ao obter dados");const t=await $db.contato.leCompleto(m.idContato),f=(((s=t==null?void 0:t.telefone)==null?void 0:s.find(F=>F.tipoTelefone==="WhatsApp"))||((g=t==null?void 0:t.telefone)==null?void 0:g.find(F=>F.tipoTelefone==="Principal"))||(t==null?void 0:t.telefone[0])||{}).telefone.trim()||"";$q.dialog({title:"Enviar impresso pelo Whatsapp?",preventClose:!0,prompt:{label:"Enviar para este n\xFAmero:",model:f||"",hint:"Ou adicione um novo n\xFAmero, ex: 19988776655",isValid:F=>F.length>0,type:"text"},cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async F=>{var oe;m.telefoneContato=F.replace(/\D/g,"");const G=await $db.venda.enviaImpressaoPdfwhatsapp({documento:m,nomeImpresso:o.nome.replace("venda.whatsapp.enviar.",""),mensagem:(oe=o.texto)!=null?oe:`Voc\xEA est\xE1 recebendo o ${o.valor} da empresa ${m.descricaoEmpresa} (${m.numeroDocumentoEmpresa}).`})})}catch{$q.notifyError("Erro ao enviar.",erro)}},copiarUid(){const o=this.$refs.uid;o.type="text";try{o.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a \xE1rea de transfer\xEAncia.",type:"info"})}catch{this.$q.notify("Erro ao copiar.")}o.type="hidden",window.getSelection().removeAllRanges()},async devolucaoGarantia(o){let s=await $db.hibrido.lista({table:"documento",where:{idContato:$db.contato.selecionado.id,tipo:"Venda",status:"Or\xE7amento"}});if(s=$lodash.orderBy(s,"dataHoraEmissao","desc"),!s.length){this.$q.notify({message:"Crie um or\xE7amento para inclus\xE3o de devolu\xE7\xE3o/garantia.",type:"info"});return}this.modalDevolucaoGarantia={visivel:!0,item:o,orcamento:s[0]}},editar(){this.$refs.vendaModal.mostrar({id:this.dados.venda.id})},executar(o){switch(o){case"atualizar":this.atualizar();break;case"cancelar":case"finalizar":case"reprovar":this.$emit("executar","atualizar");break;case"retornarOrcamento":this.$emit("executar",o);break}},async finalizaDevolucaoGarantia(o,s,g){const m=$utils.clonar(o);s==="devolucao"&&(m.operacao="Devolu\xE7\xE3o de Venda"),s==="garantia"&&(m.operacao="Garantia de Venda",m.motivo=g),m.idDocumentoItemVenda=m.id,m.idDocumentoVenda=m.idDocumento,m.id=$utils.uuid(),m.idDocumento=this.modalDevolucaoGarantia.orcamento.id,m.status="Or\xE7amento",m.operacaoFator=1,m.codigoCfop=20,m.idCfop=(await $db.cfop.le({codigoCfop:20}))[0].id,m.dataHoraEmissao=$utils.dataAtual(),m.dataHoraFinalizado="",m.subTotal=m.subTotal*-1,m.total=m.total*-1,m.valorItem=m.valorItem*-1,m.descontoSubTotal=0,delete m.codigoCfop,delete m.codigoDocumento,delete m.codigoDocumentoItem,delete m.codigoItem,delete m.codigoPlanoContaDestino,delete m.codigoPlanoContaEstoque,await $db.documentoItem.grava({atual:m}),this.$q.notify({message:"Item adicionado ao or\xE7amento.",type:"positive"}),localStorage.setItem("idVenda",this.modalDevolucaoGarantia.orcamento.id),this.$emit("executar","atualizar")},async remover(){this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 remover esta venda da fatura",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{await $db.venda.checarConflitoStatus({id:this.dados.venda.id,status:this.dados.venda.status})}catch(o){return $q.notifyError(o.message),!1}await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:""},original:{id:this.dados.venda.id}}),this.$emit("executar","remover")})},onResize(){this.width=window.innerWidth}},watch:{async dados(o){var g;this.visibilidade.botao.editar=!1,this.visibilidade.botao.visualizar=!1,this.visibilidade.botao.remover=!1;let s=(g=this.vendasCompletas)==null?void 0:g.contatosEmpresa;if(!s){const t=(await $db.hibrido.lista({table:"empresa",columns:["idContato"],whereFilter:{ativo:!0}})).map(({idContato:f})=>f);s=await $db.hibrido.lista({table:"contato",columns:["id"],whereIn:{id:t},whereFilter:{ativo:!0}})}!s.find(m=>m.id===o.venda.idEmpresa)||(o.venda.idFatura&&this.faturasAbertas.find(m=>m.id===o.venda.idFatura)&&(this.visibilidade.botao.remover=await $db.permissao.objeto("Diretiva_Vendas_RemoverVendaFatura")),!~["Cancelado","N\xE3o Aprovado"].indexOf(o.venda.status)&&!o.venda.idFatura&&(this.visibilidade.botao.editar=!0),this.visibilidade.botao.editar||(this.visibilidade.botao.visualizar=!0))}},async mounted(){var o,s,g,m,t,f,F,G;this.sistemaPai=$utils.sistemaPai(),this.dadosVenda&&this.vendasCompletas?await this.atualizarComDados():await this.atualizar(),this.quantidadeProdutos=(((s=(o=this.dados)==null?void 0:o.carrinho)==null?void 0:s.length)||0)+(((m=(g=this.dados)==null?void 0:g.customs)==null?void 0:m.length)||0)+(((f=(t=this.dados)==null?void 0:t.oss)==null?void 0:f.length)||0)+(((G=(F=this.dados)==null?void 0:F.kits)==null?void 0:G.length)||0)||0,this.$emit("carregou")}},Ie={id:"VendaCard"},ze={class:"col-12 col-md-6 q-pl-none"},He={class:"q-item-section"},Se={class:"col-6 col-md hideonmobile"},Oe={class:"text-left q-my-none"},Ae={class:"col-4 col-md hideonmobile"},Ne={class:"text-left q-my-none"},Me={class:"col-4 col-md hideonmobile"},Pe={class:"text-left q-my-none"},Te={class:"col-6 col-md hideonmobile"},Re={class:"text-right text-h5 text-positive text-weight-bold q-my-none"},Qe={class:"text-right text-weight-normal text-tertiary text-body2 q-my-none"},We={class:"col-12 hideondesktop"},Ge={class:"text-left q-my-none"},Be={class:"col-12 col-md-6"},Ke={class:"col-12 col-md-6 full-height items-end hideonmobile"},Ue={class:"col-6"},Le={class:"text-left q-my-none"},je={class:"text-left q-my-none"},Je={class:"col-6"},Xe={class:"text-right text-weight-normal text-tertiary text-body2 q-my-none"},Ye={class:"text-right text-h5 text-positive text-weight-bold q-my-none"},Ze={class:"col-12 full-height items-end"},$e={class:"col-12 col-md-6"},ea={class:"text-subtitle1 text-weight-bold q-ma-none items-center"},aa={class:"q-ma-none"},ta={key:0},oa={class:"col-6 col-md-4"},da=p("p",{class:"text-subtitle1 text-weight-bold q-ma-none"}," Faturamento ",-1),ia={class:"q-ma-none"},la={class:"col-6 col-md-2 text-right"},sa=p("p",{class:"text-subtitle1 text-weight-bold q-ma-none"}," Desconto ",-1),na={class:"q-ma-none"},ra={class:"mw80 text-center"},ua={style:{"margin-left":"14px"}},ca={style:{"margin-left":"14px"}},ma={class:"float-right text-weight-medium text-right q-ml-sm",style:{"min-width":"70px"}},fa=p("span",{class:"text-weight-medium q-mr-sm"},"Obs.:",-1),va=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Motivo Cancelamento:",-1),pa=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Interna:",-1),_a=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Cancelamento:",-1),ha=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Faturamento:",-1);function ba(o,s,g,m,t,f){var ie,le,se,ne,re,ue,ce,me;const F=K("avatar"),G=K("row"),oe=K("documentos-fiscais"),de=K("BadgeCopiarUid"),Z=K("badge"),A=K("g-label"),P=K("g-col"),U=K("g-row"),he=K("DocumentosFiscais"),be=K("VendaModal"),ke=K("ModalHistoricoStatus");return d(),w("div",Ie,[g.layout==="card"?(d(),w(V,{key:0},[t.dados.venda.id?(d(),u(xe,{key:0,class:"extratoItem bg-white q-pa-sm no-shadow"},{default:e(()=>[a(G,{class:"items-center justify-between q-mx-none q-px-none q-mb-sm"},{default:e(()=>{var n;return[p("div",ze,[a(Ce,{class:"q-pa-none"},{default:e(()=>{var r;return[a(F,{imagem:(r=t.contatos[t.dados.venda.idContato])==null?void 0:r.imagem,rotulo:t.dados.venda.descricaoContato,tamanho:"40",style:{float:"left"}},null,8,["imagem","rotulo"]),a(we,null,{default:e(()=>[p("div",He,[a(_,null,{default:e(()=>{var b;return[i(c((b=t.contatos[t.dados.venda.idContato])==null?void 0:b.apelido),1)]}),_:1}),a(_,{caption:""},{default:e(()=>{var b;return[i(c((b=t.contatos[t.dados.venda.idContato])==null?void 0:b.nome),1)]}),_:1})])]),_:1}),a(X,{rounded:"",color:"tertiary",small:""},{default:e(()=>[i(c(t.dados.venda.status),1)]),_:1}),a(X,{class:"q-ml-sm",color:"positive",escuro:"",onClick:f.copiarUid},{default:e(()=>[i(" #"+c(parseInt(t.dados.venda.numero)||(t.dados.venda.id||"").slice(-6))+" ",1),a(h,{class:"q-ml-sm",name:"shopping_cart"}),H(p("input",{type:"hidden","onUpdate:modelValue":s[0]||(s[0]=b=>t.dados.venda.id=b),ref:"uid"},null,512),[[pe,t.dados.venda.id]])]),_:1},8,["onClick"])]}),_:1})]),p("div",Se,[p("p",Oe,[t.contatos[t.dados.venda.idContatoVendedor]?(d(),u(h,{key:0,name:"mdi-account-tie"})):v("",!0),i(" "+c((n=t.contatos[t.dados.venda.idContatoVendedor])==null?void 0:n.apelido)+" ",1),a(W,null,{default:e(()=>[i(" Vendedor(a) ")]),_:1})])]),p("div",Ae,[p("p",Ne,[t.dados.venda.dataHoraEmissao?(d(),u(h,{key:0,name:"mdi-calendar-today "})):v("",!0),i(" "+c(o.$filters.data(t.dados.venda.dataHoraEmissao))+" ",1),a(W,null,{default:e(()=>[i(" Emiss\xE3o ")]),_:1})])]),p("div",Me,[p("p",Pe,[t.dados.venda.dataHoraFinalizado?(d(),u(h,{key:0,name:"mdi-calendar-check"})):v("",!0),i(" "+c(o.$filters.data(t.dados.venda.dataHoraFinalizado))+" ",1),t.dados.venda.dataHoraFinalizado?(d(),u(W,{key:1},{default:e(()=>[i(" Finalizado ")]),_:1})):v("",!0)])]),p("div",Te,[p("p",Re,c(o.$filters.numero(t.dados.venda.totalDocumento,2)),1),p("p",Qe,c(o.$filters.numero(t.dados.venda.subTotal,2)),1)])]}),_:1}),a(j,{class:"hideondesktop q-mb-sm"}),a(G,{class:"q-mx-none q-px-none items-center"},{default:e(()=>{var n;return[p("div",We,[p("p",Ge,[t.contatos[t.dados.venda.idContatoVendedor]?(d(),u(h,{key:0,name:"mdi-account-tie"})):v("",!0),i(" "+c((n=t.contatos[t.dados.venda.idContatoVendedor])==null?void 0:n.apelido)+" ",1),a(W,null,{default:e(()=>[i(" Vendedor(a) ")]),_:1})])]),p("div",Be,[a(J,{class:"no-border text-tertiary"},{default:e(()=>[(d(!0),w(V,null,M(t.dados.carrinho,r=>(d(),u(y,{key:r.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(l,{avatar:"",class:"mw80"},{default:e(()=>[a(_,null,{default:e(()=>[i(c(r.quantidade)+"x",1)]),_:2},1024)]),_:2},1024),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i(c(r.descricaoItem),1)]),_:2},1024)]),_:2},1024),a(l,{side:"",top:""},{default:e(()=>[a(_,null,{default:e(()=>[i(c(o.$filters.numero(r.total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(d(!0),w(V,null,M(t.dados.customs,r=>(d(),u(y,{key:r.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(l,{avatar:"",class:"mw80"},{default:e(()=>[a(_,null,{default:e(()=>[i(c(r.documento.numero)+"x ",1)]),_:2},1024)]),_:2},1024),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i(c(r.documento.descricao),1)]),_:2},1024)]),_:2},1024),a(l,{side:"",top:""},{default:e(()=>[a(_,null,{default:e(()=>[i(c(o.$filters.numero(r.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(d(!0),w(V,null,M(t.dados.oss,r=>(d(),u(y,{key:r.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(l,{avatar:"",class:"mw80"},{default:e(()=>[a(_,null,{default:e(()=>[i(" OS "),a(X,{color:"tertiary",small:""},{default:e(()=>[i("#"+c(r.documento.numero),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i(c(r.documento.descricao),1)]),_:2},1024)]),_:2},1024),a(l,{avatar:"",class:"mw50"},{default:e(()=>[r.documento.status!=="Or\xE7amento"?(d(),u(X,{key:0,rounded:"",color:"tertiary",small:""},{default:e(()=>[i(c(r.documento.status),1)]),_:2},1024)):v("",!0)]),_:2},1024),a(l,{right:"",top:""},{default:e(()=>[a(_,null,{default:e(()=>[i(c(o.$filters.numero(r.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(d(!0),w(V,null,M(t.dados.kits,r=>(d(),u(y,{key:r.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(l,{avatar:"",class:"mw80"},{default:e(()=>[a(_,null,{default:e(()=>[i(c(o.$filters.numero(t.documentoItemKit[r.documento.id].quantidade,4))+"x",1)]),_:2},1024)]),_:2},1024),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i(c(t.documentoItemKit[r.documento.id].descricaoItem),1)]),_:2},1024)]),_:2},1024),a(l,{side:"",top:""},{default:e(()=>[a(_,null,{default:e(()=>[i(c(o.$filters.numero(t.documentoItemKit[r.documento.id].total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),p("div",Ke,[a(j,{class:"hideondesktop q-mb-sm q-mt-xs"}),a(T,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[H((d(),u(J,{link:"",separator:""},{default:e(()=>[o.$utils.mapearStatus(t.dados.venda).permiteNota?(d(),w(V,{key:0},[H((d(),u(y,{clickable:"",onClick:s[1]||(s[1]=r=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda"))},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(l,null,{default:e(()=>[i("NFe de Sa\xEDda/Venda")]),_:1})]),_:1})),[[N]]),H((d(),u(y,{clickable:"",onClick:s[2]||(s[2]=r=>o.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o"))},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(l,null,{default:e(()=>[i("NFe de Entrada/Devolu\xE7\xE3o")]),_:1})]),_:1})),[[N]]),H((d(),u(y,{clickable:"",onClick:s[3]||(s[3]=r=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa"))},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(l,null,{default:e(()=>[i("NFe de Remessa")]),_:1})]),_:1})),[[N]])],64)):v("",!0),f.podeMigrarFatura?(d(),w(V,{key:1},[(d(!0),w(V,null,M(t.faturasAbertas.filter(r=>r.id!==t.dados.venda.idFatura),r=>H((d(),u(y,{clickable:"",key:r.id,onClick:b=>f.migrarFatura(r)},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(l,null,{default:e(()=>[i(c("Migrar para fatura #"+(r.numero||r.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128)),H((d(),u(y,{clickable:"",onClick:s[4]||(s[4]=r=>f.migrarFatura())},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(l,null,{default:e(()=>[i("Migrar para nova fatura")]),_:1})]),_:1})),[[N]])],64)):v("",!0),a(y,{clickable:"",onClick:s[5]||(s[5]=r=>o.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id}))},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"history"})]),_:1}),a(l,null,{default:e(()=>[i("Hist\xF3rico do Status")]),_:1})]),_:1}),a(y,{clickable:"",onClick:f.duplicarVenda},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-content-duplicate"})]),_:1}),a(l,null,{default:e(()=>[i("Duplicar Pedido")]),_:1})]),_:1},8,["onClick"]),(d(!0),w(V,null,M(t.configImpressosWhatsapp.filter(r=>r.valor),r=>(d(),u(y,{clickable:"",key:r.valor,onClick:b=>f.dialogEnviar(r)},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-whatsapp"})]),_:1}),a(l,null,{default:e(()=>[i(c(r.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),g.resetarEnvio&&t.dados.venda.rotaJson&&t.dados.venda.rotaJson.length>0?(d(),u(y,{key:2,clickable:"",onClick:s[6]||(s[6]=r=>g.resetarEnvio(t.dados.venda))},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"restart_alt"})]),_:1}),a(l,null,{default:e(()=>[i("Resetar Envio")]),_:1})]),_:1})):v("",!0)]),_:1})),[[N]])]),_:1})]),_:1}),t.visibilidade.botao.remover?(d(),u(T,{key:0,rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",onClick:f.remover,style:{float:"right"}},null,8,["onClick"])):v("",!0),t.visibilidade.botao.editar?(d(),u(T,{key:1,rounded:"",dense:"",flat:"",icon:"edit",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:f.editar,style:{float:"right"}},null,8,["onClick"])):v("",!0),t.visibilidade.botao.visualizar?(d(),u(T,{key:2,rounded:"",dense:"",flat:"",icon:"remove_red_eye",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:f.editar,style:{float:"right"}},null,8,["onClick"])):v("",!0),a(T,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[a(J,{link:"",separator:""},{default:e(()=>[(d(!0),w(V,null,M(t.configImpressaoOrcamento.filter(r=>r.valor),r=>(d(),u(y,{clickable:"",key:r.valor,onClick:b=>o.$imprimir(r.valor,{id:(t.dados.venda||{}).id||"0",Oculto:"0"})},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"print"})]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i(c(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a(T,{rounded:"",dense:"",flat:"",icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",class:"no-shadow q-mx-xs",color:"tertiary",style:{float:"right"},onClick:f.alternarDetalhes},null,8,["icon","onClick"])])]}),_:1}),a(j,{class:"hideondesktop q-mb-sm q-mt-xs"}),a(G,{class:"q-mx-none q-px-none hideondesktop"},{default:e(()=>[p("div",Ue,[p("p",Le,[t.dados.venda.dataHoraEmissao?(d(),u(h,{key:0,name:"mdi-calendar-today"})):v("",!0),i(" "+c(o.$filters.data(t.dados.venda.dataHoraEmissao))+" ",1),a(W,null,{default:e(()=>[i(" Emiss\xE3o ")]),_:1})]),p("p",je,[t.dados.venda.dataHoraFinalizado?(d(),u(h,{key:0,name:"mdi-calendar-check"})):v("",!0),i(" "+c(o.$filters.data(t.dados.venda.dataHoraFinalizado))+" ",1),t.dados.venda.dataHoraFinalizado?(d(),u(W,{key:1},{default:e(()=>[i(" Finalizado ")]),_:1})):v("",!0)])]),p("div",Je,[p("p",Xe,c(o.$filters.numero(t.dados.venda.subTotal,2)),1),p("p",Ye,c(o.$filters.numero(t.dados.venda.totalDocumento,2)),1)]),p("div",Ze,[a(j,{class:"hideondesktop q-mb-sm q-mt-xs"}),a(T,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[H((d(),u(J,{link:"",separator:""},{default:e(()=>[o.$utils.mapearStatus(t.dados.venda).permiteNota?(d(),w(V,{key:0},[H((d(),u(y,{clickable:"",onClick:s[7]||(s[7]=n=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda"))},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(l,null,{default:e(()=>[i("NFe de Sa\xEDda/Venda")]),_:1})]),_:1})),[[N]]),H((d(),u(y,{clickable:"",onClick:s[8]||(s[8]=n=>o.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o"))},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(l,null,{default:e(()=>[i("NFe de Entrada/Devolu\xE7\xE3o")]),_:1})]),_:1})),[[N]]),H((d(),u(y,{clickable:"",onClick:s[9]||(s[9]=n=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa"))},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(l,null,{default:e(()=>[i("NFe de Remessa")]),_:1})]),_:1})),[[N]])],64)):v("",!0),f.podeMigrarFatura?(d(),w(V,{key:1},[(d(!0),w(V,null,M(t.faturasAbertas.filter(n=>n.id!==t.dados.venda.idFatura),n=>H((d(),u(y,{key:n.id,onClick:r=>f.migrarFatura(n)},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(l,null,{default:e(()=>[i(c("Migrar para fatura #"+(n.numero||n.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128)),H((d(),u(y,{onClick:s[10]||(s[10]=n=>f.migrarFatura())},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(l,null,{default:e(()=>[i("Migrar para nova fatura")]),_:1})]),_:1})),[[N]])],64)):v("",!0),a(y,{clickable:"",onClick:s[11]||(s[11]=n=>o.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id}))},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"history"})]),_:1}),a(l,null,{default:e(()=>[i("Hist\xF3rico do Status")]),_:1})]),_:1}),(d(!0),w(V,null,M(t.configImpressosWhatsapp.filter(n=>n.valor),n=>(d(),u(y,{clickable:"",key:n.valor,onClick:r=>f.dialogEnviar(n)},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-whatsapp"})]),_:1}),a(l,null,{default:e(()=>[i(c(n.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[N]])]),_:1})]),_:1}),t.visibilidade.botao.remover?(d(),u(T,{key:0,rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",onClick:f.remover,style:{float:"right"}},null,8,["onClick"])):v("",!0),t.visibilidade.botao.editar?(d(),u(T,{key:1,rounded:"",dense:"",flat:"",icon:"edit",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:f.editar,style:{float:"right"}},null,8,["onClick"])):v("",!0),a(T,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[a(J,{link:"",separator:""},{default:e(()=>[(d(!0),w(V,null,M(t.configImpressaoOrcamento.filter(n=>n.valor),n=>(d(),u(y,{clickable:"",key:n.valor,onClick:r=>o.$imprimir(n.valor,{id:(t.dados.venda||{}).id||"0",Oculto:"0"})},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"print"})]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i(c(n.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a(T,{rounded:"",dense:"",flat:"",icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",class:"no-shadow q-mx-xs",color:"tertiary",style:{float:"right"},onClick:f.alternarDetalhes},null,8,["icon","onClick"])])]),_:1}),t.detalhesVisivel?(d(),u(j,{key:0,class:"hideondesktop q-my-sm"})):v("",!0),t.detalhesVisivel?(d(),u(G,{key:1,class:"items-start q-mx-none q-px-none q-mt-md"},{default:e(()=>[p("div",$e,[p("p",ea,[a(h,{name:"business"}),i(" "+c(t.dados.venda.descricaoEmpresa),1)]),p("div",aa,[t.fatura.id?(d(),w("div",ta,[i(" Fatura "),a(X,{color:"positive",escuro:"",onClick:f.copiarUid},{default:e(()=>[i(" #"+c(parseInt(t.fatura.numero)||(t.fatura.id||"").slice(-6))+" ",1),a(h,{class:"q-ml-sm",name:"mdi-glasses"}),H(p("input",{type:"hidden","onUpdate:modelValue":s[12]||(s[12]=n=>t.fatura.id=n),ref:"uid"},null,512),[[pe,t.fatura.id]])]),_:1},8,["onClick"]),a(X,{class:"q-ml-sm",rounded:"",color:"tertiary",small:""},{default:e(()=>[i(c(t.fatura.status),1)]),_:1})])):v("",!0),p("div",null,c(t.dados.venda.observacao),1),p("div",null,c(t.dados.venda.observacaoInterna),1),p("div",null,c(t.dados.venda.motivoCancelamento),1),p("div",null,c(t.dados.venda.observacaoCancelamento),1)]),a(oe,{idVenda:t.dados.venda.id},null,8,["idVenda"])]),p("div",oa,[da,p("div",ia,c(t.dados.venda.observacaoFaturamento),1)]),p("div",la,[sa,p("p",na,c(o.$filters.numero(t.dados.venda.totalDesconto,2)),1)])]),_:1})):v("",!0)]),_:1})):v("",!0)],64)):v("",!0),g.layout==="lista"?(d(),w(V,{key:1},[a(qe,{onResize:f.onResize},null,8,["onResize"]),(le=(ie=t.dados)==null?void 0:ie.venda)!=null&&le.id?(d(),u(y,{key:0,clickable:"","manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:e(()=>[a(l,{class:"hideonmobile col-auto q-pr-sm no-margin"},{default:e(()=>{var n,r,b,x;return[p("div",ra,[a(de,{id:(r=(n=t.dados)==null?void 0:n.venda)==null?void 0:r.id,numero:(x=(b=t.dados)==null?void 0:b.venda)==null?void 0:x.numero,cor:"positive",escuro:""},null,8,["id","numero"])])]}),_:1}),a(l,{onClick:s[13]||(s[13]=n=>f.editar()),class:"col-md col-lg col-xl no-margin"},{default:e(()=>[a(y,{class:"q-pa-none"},{default:e(()=>[a(l,{class:"col-auto items-center"},{default:e(()=>{var n,r,b,x,E;return[a(F,{imagem:(b=t.contatos[(r=(n=t.dados)==null?void 0:n.venda)==null?void 0:r.idContato]||{})==null?void 0:b.imagem,tamanho:"40",rotulo:(E=(x=t.dados)==null?void 0:x.venda)==null?void 0:E.descricaoContato,style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]}),_:1}),a(l,{class:"col"},{default:e(()=>{var n,r,b,x,E,S,R,Q,L,$;return[a(_,{lines:"2",class:"text-weight-bold"},{default:e(()=>{var D,I,O;return[p("span",null,[i(c((O=t.contatos[(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.idContato])==null?void 0:O.apelido)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[i("Nome Fantasia")]),_:1})])]}),_:1}),((b=t.contatos[(r=(n=t.dados)==null?void 0:n.venda)==null?void 0:r.idContato])==null?void 0:b.nome)!==((S=t.contatos[(E=(x=t.dados)==null?void 0:x.venda)==null?void 0:E.idContato])==null?void 0:S.apelido)?(d(),u(_,{key:0,caption:"",lines:"2"},{default:e(()=>{var D,I,O;return[p("span",null,[i(c((O=t.contatos[(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.idContato])==null?void 0:O.nome)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[i("Raz\xE3o Social")]),_:1})])]}),_:1})):v("",!0),a(_,{caption:"",class:"hideondesktop"},{default:e(()=>{var D,I,O,k,z,C,q,B,ee,ae,te,fe,ve;return[a(de,{id:(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.id,numero:(k=(O=t.dados)==null?void 0:O.venda)==null?void 0:k.numero,cor:"positive",escuro:"",class:"q-mr-sm"},null,8,["id","numero"]),(C=(z=t.dados)==null?void 0:z.venda)!=null&&C.status?(d(),u(Z,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(ee=((B=(q=t.dados)==null?void 0:q.venda)==null?void 0:B.status)||"")==null?void 0:ee.replace("Aguardando ","Ag. "),cor:(te=(ae=t.dados)==null?void 0:ae.venda)!=null&&te.status?t.status[(ve=(fe=t.dados)==null?void 0:fe.venda)==null?void 0:ve.status]:"tertiary"},null,8,["rotulo","cor"])):v("",!0)]}),_:1}),(Q=(R=t.dados)==null?void 0:R.venda)!=null&&Q.descricaoEmpresa?(d(),u(_,{key:1,caption:"",lines:"2"},{default:e(()=>{var D,I;return[p("span",null,[a(h,{name:"business"}),i(" "+c((I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.descricaoEmpresa)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[i(" Empresa ")]),_:1})])]}),_:1})):v("",!0),t.contatos[($=(L=t.dados)==null?void 0:L.venda)==null?void 0:$.idContatoVendedor]?(d(),u(_,{key:2,caption:"",lines:"2"},{default:e(()=>{var D,I,O;return[p("span",null,[a(h,{name:"mdi-account-tie"}),i(" "+c((O=t.contatos[(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.idContatoVendedor])==null?void 0:O.apelido)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[i(" Vendedor(a) ")]),_:1})])]}),_:1})):v("",!0),a(l,{class:"hideondesktop q-mt-sm"},{default:e(()=>[a(y,{class:"q-pa-none",style:{"min-height":"36px!important"}},{default:e(()=>[a(l,{top:"",class:"col-5 no-margin"},{default:e(()=>{var D,I,O,k;return[(I=(D=t.dados)==null?void 0:D.venda)!=null&&I.dataHoraEmissao?(d(),u(_,{key:0,caption:""},{default:e(()=>{var z,C;return[a(h,{name:"mdi-calendar-today",style:{position:"absolute","margin-top":"2px"}}),p("span",ua,c(o.$filters.data((C=(z=t.dados)==null?void 0:z.venda)==null?void 0:C.dataHoraEmissao)),1)]}),_:1})):v("",!0),(k=(O=t.dados)==null?void 0:O.venda)!=null&&k.dataHoraFinalizado?(d(),u(_,{key:1,caption:""},{default:e(()=>{var z,C;return[a(h,{name:"mdi-calendar",style:{position:"absolute","margin-top":"2px"}}),p("span",ca,c(o.$filters.data((C=(z=t.dados)==null?void 0:z.venda)==null?void 0:C.dataHoraFinalizado)),1)]}),_:1})):v("",!0)]}),_:1}),a(l,{top:"",class:"col-7 no-margin text-right"},{default:e(()=>{var D,I,O,k,z,C;return[(I=(D=t.dados)==null?void 0:D.venda)!=null&&I.totalDocumento?(d(),u(_,{key:0,caption:"",class:"text-weight-bold"},{default:e(()=>{var q,B;return[i(c(o.$filters.numero((B=(q=t.dados)==null?void 0:q.venda)==null?void 0:B.totalDocumento,2)),1)]}),_:1})):v("",!0),((k=(O=t.dados)==null?void 0:O.venda)==null?void 0:k.subTotal)!==((C=(z=t.dados)==null?void 0:z.venda)==null?void 0:C.totalDocumento)?(d(),u(_,{key:1,caption:""},{default:e(()=>{var q,B;return[i(c(o.$filters.numero((B=(q=t.dados)==null?void 0:q.venda)==null?void 0:B.subTotal,2)),1)]}),_:1})):v("",!0)]}),_:1})]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),a(l,{onClick:s[14]||(s[14]=n=>f.editar()),class:"hideonmobile maxw110 q-pl-sm no-margin"},{default:e(()=>{var n,r,b,x;return[(r=(n=t.dados)==null?void 0:n.venda)!=null&&r.dataHoraEmissao?(d(),u(_,{key:0,lines:"2",class:"ellipsis"},{default:e(()=>{var E,S;return[p("span",null,[a(h,{name:"mdi-calendar-today"}),i(" "+c(o.$filters.data((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.dataHoraEmissao))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var R,Q;return[i(" Emitido \xE0s "+c(o.$filters.hora((Q=(R=t.dados)==null?void 0:R.venda)==null?void 0:Q.dataHoraEmissao)),1)]}),_:1})])]}),_:1})):v("",!0),(x=(b=t.dados)==null?void 0:b.venda)!=null&&x.dataHoraFinalizado?(d(),u(_,{key:1,lines:"2",class:"ellipsis"},{default:e(()=>{var E,S;return[p("span",null,[a(h,{name:"mdi-calendar"}),i(" "+c(o.$filters.data((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.dataHoraFinalizado))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var R,Q;return[i(" Finalizado \xE1s "+c(o.$filters.hora((Q=(R=t.dados)==null?void 0:R.venda)==null?void 0:Q.dataHoraFinalizado)),1)]}),_:1})])]}),_:1})):v("",!0)]}),_:1}),a(l,{onClick:s[15]||(s[15]=n=>f.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var n,r,b,x,E,S,R,Q,L;return[(r=(n=t.dados)==null?void 0:n.venda)!=null&&r.status?(d(),u(Z,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(E=((x=(b=t.dados)==null?void 0:b.venda)==null?void 0:x.status)||"")==null?void 0:E.replace("Aguardando ","Ag. "),cor:(R=(S=t.dados)==null?void 0:S.venda)!=null&&R.status?t.status[(L=(Q=t.dados)==null?void 0:Q.venda)==null?void 0:L.status]:"tertiary"},null,8,["rotulo","cor"])):v("",!0)]}),_:1}),a(l,{onClick:s[16]||(s[16]=n=>f.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var n,r,b,x;return[(r=(n=t.dados)==null?void 0:n.venda)!=null&&r.totalDocumento?(d(),u(_,{key:0,class:"text-weight-bold text-right"},{default:e(()=>{var E,S;return[p("span",null,[i(c(o.$filters.numero((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.totalDocumento,2))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[i(" Total ")]),_:1})])]}),_:1})):v("",!0),(x=(b=t.dados)==null?void 0:b.venda)!=null&&x.subTotal?(d(),u(_,{key:1,class:"text-caption text-right"},{default:e(()=>{var E,S;return[p("span",null,[i(c(o.$filters.numero((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.subTotal,2))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[i(" Subtotal ")]),_:1})])]}),_:1})):v("",!0)]}),_:1}),a(l,{class:"col-auto q-pl-sm no-margin"},{default:e(()=>[a(y,{class:"q-pa-none"},{default:e(()=>[a(l,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a(T,{onClick:s[17]||(s[17]=n=>{var r,b;return f.alternarDetalhes((b=(r=t.dados)==null?void 0:r.venda)==null?void 0:b.id)}),icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",rounded:"",dense:"",flat:"",size:"md",color:"tertiary"},null,8,["icon"])]),_:1}),a(l,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[t.visibilidade.botao.editar?(d(),u(T,{key:0,onClick:f.editar,rounded:"",dense:"",flat:"",icon:"edit",size:"md",color:"primary"},null,8,["onClick"])):v("",!0),t.visibilidade.botao.visualizar?(d(),u(T,{key:1,onClick:f.editar,rounded:"",dense:"",flat:"",icon:"remove_red_eye",size:"md",color:"primary"},null,8,["onClick"])):v("",!0)]),_:1}),a(l,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a(T,{icon:"print",size:"md",round:"",flat:"",dense:""},{default:e(()=>[a(Y,null,{default:e(()=>[H((d(),u(J,{link:"","no-border":"",separator:""},{default:e(()=>[(d(!0),w(V,null,M(t.configImpressaoOrcamento.filter(n=>n.valor),n=>(d(),u(y,{onClick:r=>{var b,x;return o.$imprimir(n.valor,{id:((x=(b=t.dados)==null?void 0:b.venda)==null?void 0:x.id)||"0",Oculto:"0"})},key:n.valor,clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"print"})]),_:1}),a(l,null,{default:e(()=>[i(c(n.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[N]])]),_:1})]),_:1})]),_:1}),a(l,{class:"no-margin",style:{width:"32px"}},{default:e(()=>[a(T,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:e(()=>[a(Y,null,{default:e(()=>[H((d(),u(J,{link:"","no-border":"",separator:""},{default:e(()=>[t.visibilidade.botao.remover?(d(),u(y,{key:0,onClick:f.remover,clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"delete"})]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i("Remover")]),_:1}),a(_,{caption:""},{default:e(()=>[i("Venda")]),_:1})]),_:1})]),_:1},8,["onClick"])):v("",!0),t.visibilidade.botao.editar||t.visibilidade.botao.visualizar?(d(),u(y,{key:1,onClick:f.editar,clickable:"",class:"hideondesktop"},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[t.visibilidade.botao.editar?(d(),u(h,{key:0,name:"edit"})):v("",!0),t.visibilidade.botao.visualizar?(d(),u(h,{key:1,name:"remove_red_eye"})):v("",!0)]),_:1}),a(l,null,{default:e(()=>[t.visibilidade.botao.editar?(d(),u(_,{key:0},{default:e(()=>[i(" Editar ")]),_:1})):v("",!0),t.visibilidade.botao.visualizar?(d(),u(_,{key:1},{default:e(()=>[i(" Visualizar ")]),_:1})):v("",!0),a(_,{caption:""},{default:e(()=>[i("Venda")]),_:1})]),_:1})]),_:1},8,["onClick"])):v("",!0),a(y,{onClick:s[18]||(s[18]=n=>{var r,b;return f.alternarDetalhes((b=(r=t.dados)==null?void 0:r.venda)==null?void 0:b.id)}),clickable:"",class:"hideondesktop"},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i("Ver Detalhes")]),_:1}),a(_,{caption:""},{default:e(()=>[i("Venda")]),_:1})]),_:1})]),_:1}),o.$utils.mapearStatus(t.dados.venda).permiteNota?(d(),w(V,{key:2},[H((d(),u(y,{onClick:s[19]||(s[19]=n=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda")),clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i("NFe")]),_:1}),a(_,{caption:""},{default:e(()=>[i("Sa\xEDda/Venda")]),_:1})]),_:1})]),_:1})),[[N]]),H((d(),u(y,{onClick:s[20]||(s[20]=n=>o.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o")),clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i("NFe")]),_:1}),a(_,{caption:""},{default:e(()=>[i("Entrada/Devolu\xE7\xE3o")]),_:1})]),_:1})]),_:1})),[[N]]),H((d(),u(y,{onClick:s[21]||(s[21]=n=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa")),clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i("NFe")]),_:1}),a(_,{caption:""},{default:e(()=>[i("Remessa")]),_:1})]),_:1})]),_:1})),[[N]])],64)):v("",!0),f.podeMigrarFatura?(d(),w(V,{key:3},[(d(!0),w(V,null,M(t.faturasAbertas.filter(n=>{var r,b;return n.id!==((b=(r=t.dados)==null?void 0:r.venda)==null?void 0:b.idFatura)}),n=>H((d(),u(y,{key:n.id,onClick:r=>f.migrarFatura(n),clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i(c("#"+(n.numero||n.id.slice(-6))),1)]),_:2},1024),a(_,{caption:""},{default:e(()=>[i("Migrar para fatura")]),_:1})]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128)),H((d(),u(y,{onClick:s[22]||(s[22]=n=>f.migrarFatura()),clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i("Migrar")]),_:1}),a(_,{caption:""},{default:e(()=>[i("Para nova fatura")]),_:1})]),_:1})]),_:1})),[[N]])],64)):v("",!0),a(y,{onClick:s[23]||(s[23]=n=>o.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id})),clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"history"})]),_:1}),a(l,null,{default:e(()=>[a(_,null,{default:e(()=>[i("Hist\xF3rico")]),_:1}),a(_,{caption:""},{default:e(()=>[i("De Status")]),_:1})]),_:1})]),_:1}),a(y,{onClick:f.duplicarVenda,clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-content-duplicate"})]),_:1}),a(l,null,{default:e(()=>[i("Duplicar Pedido")]),_:1})]),_:1},8,["onClick"]),(d(!0),w(V,null,M(t.configImpressosWhatsapp.filter(n=>n.valor),n=>(d(),u(y,{key:n.valor,onClick:r=>f.dialogEnviar(n),clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"mdi-whatsapp"})]),_:1}),a(l,null,{default:e(()=>[i(c(n.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),g.resetarEnvio&&t.dados.venda.rotaJson&&t.dados.venda.rotaJson.length>0?(d(),u(y,{key:4,onClick:s[24]||(s[24]=n=>g.resetarEnvio(t.dados.venda)),clickable:""},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"restart_alt"})]),_:1}),a(l,null,{default:e(()=>[i("Resetar Envio")]),_:1})]),_:1})):v("",!0),(d(!0),w(V,null,M(t.configImpressaoOrcamento.filter(n=>n.valor),n=>(d(),u(y,{onClick:r=>{var b,x;return o.$imprimir(n.valor,{id:((x=(b=t.dados)==null?void 0:b.venda)==null?void 0:x.id)||"0",Oculto:"0"})},key:n.valor,clickable:"",class:"hideondesktop"},{default:e(()=>[a(l,{avatar:""},{default:e(()=>[a(h,{name:"print"})]),_:1}),a(l,null,{default:e(()=>[i(c(n.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[N]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):v("",!0),H(a(j,{class:"q-ma-sm"},null,512),[[_e,((ne=(se=t.dados)==null?void 0:se.venda)==null?void 0:ne.id)&&t.detalhesVisivel]]),H(a(U,null,{default:e(()=>[a(P,null,{default:e(()=>{var n,r,b,x,E,S,R,Q,L,$,D,I,O;return[((n=t.fatura)==null?void 0:n.id)||((b=(r=t.dados)==null?void 0:r.venda)==null?void 0:b.totalDesconto)?(d(),u(U,{key:0,gutter:"md-x"},{default:e(()=>{var k,z;return[a(P,{col:"xs12 sm"},{default:e(()=>{var C,q,B,ee,ae,te;return[(C=t.fatura)!=null&&C.id?(d(),u(A,{key:0,text:"sub2 medium",inline:"",icon:`request_quote ${t.width<=992?"15px":"xs"} tertiary`,caption:t.width<=992},{default:e(()=>[i(" Fatura ")]),_:1},8,["icon","caption"])):v("",!0),(q=t.fatura)!=null&&q.id?(d(),u(de,{key:1,id:(B=t.fatura)==null?void 0:B.id,escuro:"",numero:(ee=t.fatura)==null?void 0:ee.numero,cor:"positive",class:"q-mx-sm"},null,8,["id","numero"])):v("",!0),(ae=t.fatura)!=null&&ae.id?(d(),u(Z,{key:2,rotulo:(te=t.fatura)==null?void 0:te.status,escuro:"",dica:"Status",cor:"tertiary"},null,8,["rotulo"])):v("",!0)]}),_:1}),(z=(k=t.dados)==null?void 0:k.venda)!=null&&z.totalDesconto?(d(),u(P,{key:0,col:"xs12 sm-shrink"},{default:e(()=>[a(A,{text:"sub2 regular",class:"q-pr-sm",caption:t.width<=992},{default:e(()=>{var C,q;return[i(" Desconto: "),p("span",ma,c(o.$filters.numero((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.totalDesconto,2)),1)]}),_:1},8,["caption"])]),_:1})):v("",!0)]}),_:1})):v("",!0),a(U,{gutter:"md"},{default:e(()=>[a(P,{col:"xs12 md6",bordered:""},{default:e(()=>[a(A,{icon:`extension ${t.width<=992?"14px":"xs"} tertiary`,caption:t.width<=992,text:"sub2 medium",class:"q-mb-md"},{default:e(()=>[i(" Itens ")]),_:1},8,["icon","caption"]),(d(!0),w(V,null,M(t.dados.carrinho,k=>(d(),u(U,{key:k.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(A,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[i(c(k.quantidade)+"x ",1)]),_:2},1024),i(" "+c(k.descricaoItem),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[i(c(o.$filters.numero(k.total,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(d(!0),w(V,null,M(t.dados.customs,k=>(d(),u(U,{key:k.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(A,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[i(c(k.documento.numero)+"x ",1)]),_:2},1024),i(" "+c(k.documento.descricao),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[i(c(o.$filters.numero(k.documento.totalDocumento,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(d(!0),w(V,null,M(t.dados.oss,k=>(d(),u(U,{key:k.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(Z,{rotulo:"OS #"+k.documento.numero,dica:"O.S.",escuro:"",cor:"tertiary",class:"q-mr-xs"},null,8,["rotulo"]),k.documento.status!=="Or\xE7amento"?(d(),u(Z,{key:0,rotulo:k.documento.status,cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["rotulo"])):v("",!0),i(" "+c(k.documento.descricao),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[i(c(o.$filters.numero(k.documento.totalDocumento,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(d(!0),w(V,null,M(t.dados.kits,k=>(d(),u(U,{key:k.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(A,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[i(c(o.$filters.numero(t.documentoItemKit[k.documento.id].quantidade,4))+"x ",1)]),_:2},1024),i(" "+c(t.documentoItemKit[k.documento.id].descricaoItem),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[i(c(o.$filters.numero(t.documentoItemKit[k.documento.id].total,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128))]),_:1}),a(P,{col:"xs12 md6",bordered:""},{default:e(()=>{var k;return[a(he,{idFatura:(k=t.fatura)==null?void 0:k.id,ref:"documentosFiscais"},null,8,["idFatura"])]}),_:1})]),_:1}),((E=(x=t.dados)==null?void 0:x.venda)==null?void 0:E.observacaoFaturamento)||((R=(S=t.dados)==null?void 0:S.venda)==null?void 0:R.observacao)||((L=(Q=t.dados)==null?void 0:Q.venda)==null?void 0:L.observacaoInterna)||((D=($=t.dados)==null?void 0:$.venda)==null?void 0:D.motivoCancelamento)||((O=(I=t.dados)==null?void 0:I.venda)==null?void 0:O.observacaoCancelamento)?(d(),u(U,{key:1,gutter:"md"},{default:e(()=>[a(P,{col:"xs12 md4",bordered:""},{default:e(()=>{var k,z;return[a(A,{text:"sub2 regular",caption:t.width<=992},{default:e(()=>{var C,q;return[fa,i(" "+c((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.observacao),1)]}),_:1},8,["caption"]),(z=(k=t.dados)==null?void 0:k.venda)!=null&&z.motivoCancelamento?(d(),u(A,{key:0,caption:t.width<=992,text:"sub2 regular"},{default:e(()=>{var C,q;return[va,i(" "+c((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.motivoCancelamento),1)]}),_:1},8,["caption"])):v("",!0)]}),_:1}),a(P,{col:"xs12 md4",bordered:""},{default:e(()=>{var k,z;return[a(A,{text:"sub2 regular",caption:t.width<=992},{default:e(()=>{var C,q;return[pa,i(" "+c((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.observacaoInterna),1)]}),_:1},8,["caption"]),(z=(k=t.dados)==null?void 0:k.venda)!=null&&z.observacaoCancelamento?(d(),u(A,{key:0,caption:t.width<=992,text:"sub2 regular"},{default:e(()=>{var C,q;return[_a,i(" "+c((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.observacaoCancelamento),1)]}),_:1},8,["caption"])):v("",!0)]}),_:1}),a(P,{col:"xs12 md4",bordered:""},{default:e(()=>[a(A,{text:"sub2 regular",caption:t.width<=992},{default:e(()=>{var k,z;return[ha,i(" "+c((z=(k=t.dados)==null?void 0:k.venda)==null?void 0:z.observacaoFaturamento),1)]}),_:1},8,["caption"])]),_:1})]),_:1})):v("",!0)]}),_:1})]),_:1},512),[[_e,((ue=(re=t.dados)==null?void 0:re.venda)==null?void 0:ue.id)&&t.detalhesVisivel]]),(me=(ce=t.dados)==null?void 0:ce.venda)!=null&&me.id?(d(),u(j,{key:1})):v("",!0)],64)):v("",!0),a(be,{onExecutar:f.executar,ref:"vendaModal"},null,8,["onExecutar"]),a(ke,{ref:"modalHistoricoStatus"},null,512)])}var wa=ye(De,[["render",ba]]);export{wa as V};
