import{_ as $,r as V,o as _,n as U,f as o,w as e,Q as h,az as oo,O as N,G as p,d as G,R as q,S as f,j,k as d,M as E,F as D,s as S,B as O,T as y,t as C,m as x,l as Q,bd as b,y as eo,N as R,as as ao,q as z,P as io,C as L,L as M,E as J,h as T,i as X,aV as k,H as K,u as B,a_ as so,e as W,d1 as ro}from"./index.9b156bba.js";import{o as Y}from"./open-url.a4b7ddca.js";import{L as to}from"./Lista.e33ba20c.js";import"./QBtnDropdown.2d29d66b.js";import"./QBtnGroup.4d3a3d67.js";import"./QScrollArea.e1ed3c28.js";const lo={components:{Lista:to},data(){return{lista:[],mostrar:{header:!1,barraTopo:!1,toolbarTitulo:!0,icone:"",titulo:"",buscar:!0,filtroAvancado:!1,btnAjuda:!0,btnAtualizar:!0,btnNovo:!0,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!1,btnExportaXLS:!1,btnMenuMais:!1,toolbarAdicao:!1,bannerMsg:""},busca:"",tabSelecionada:{valor:"Todos"},tabs:[],paginacao:{atual:1,maximo:1,total:1,limite:25},grupo:[],usuarios:[],telaAdicionarUsuario:{codigoGrupo:"",codigoContato:"",nome:"",cpf:"",senha:"",mostraSenha:!0,mostrar:!1},permissao:{titulo:"",mostrar:!1,buscaPermissao:"",expandirPermissao:!0,pais:[],ret:[],u:{},tipo:"",codigoGrupo:0},empresaUsuarios:{empresa:"",usuario:[],mostrar:!1}}},computed:{permissaoUsuarioCheckboxTodos(){return this.permissao.ret.itens.reduce((s,a)=>s!==a.permissaoUsuario?null:s,this.permissao.ret.itens[0].permissaoUsuario)},permissaoGrupoCheckboxTodos(){return this.permissao.ret.itens.reduce((s,a)=>s!==a.permissaoGrupo?null:s,this.permissao.ret.itens[0].permissaoGrupo)}},methods:{async atualizar(){try{$q.loading.show(),this.clienteSistema=JSON.parse(localStorage.getItem("clienteSistema"))||{};const s=await $utils.geeksApi({grupo:{funcao:"9C93290F-BEDD-4051-A0F5-FA01D961CCF4",codigoClienteSistema:this.clienteSistema.codigoClienteSistema},usuario:{funcao:"E4E43C26-D0B7-4CFB-9F13-BBFA9F11E847",codigoClienteSistema:this.clienteSistema.codigoClienteSistema,termoBusca:this.busca}});this.grupo=s.data.grupo.sort((a,t)=>{var l,i;return((l=a.descricao)==null?void 0:l.toLowerCase())<((i=t.descricao)==null?void 0:i.toLowerCase())?-1:1}),this.usuario=s.data.usuario.sort((a,t)=>{var l,i;return((l=a.nome)==null?void 0:l.toLowerCase())<((i=t.nome)==null?void 0:i.toLowerCase())?-1:1}),this.tabs=[];for(const a of this.grupo)this.tabs.push({valor:a.codigoGrupo,rotulo:a.descricao});this.tabs.push({valor:"Todos",rotulo:"Todos"}),this.tabs.push({valor:"Grupos",rotulo:"Grupos"}),this.tabSelecionada.valor==="Todos"?this.lista=this.usuario:this.lista=this.usuario.filter(a=>a.codigoGrupo===this.tabSelecionada.valor),this.tabSelecionada.valor==="Grupos"?this.lista.total=this.grupo.length:this.lista.total||(this.lista.total=this.lista.total=this.lista.length),this.paginacao.total=this.lista.total}catch(s){$q.notifyError("Erro iniciar",s)}finally{$q.loading.hide()}},permissao_filtro_atualiza(){for(const t of this.permissao.ret.itens)t.mostrar=this.permissao.buscaPermissao.length<=2||!!t.descricao.toLowerCase().match(this.permissao.buscaPermissao.toLowerCase());const s=this.permissao.ret.itens;function a(t){const l=s.find(i=>t.codigoPai===i.codigoObjeto);if(!l){console.log("Orf\xE3o",t.codigoObjeto,t.descricao);return}l.mostrar=!0,l.codigoPai&&a(l)}for(const t of s)t.mostrar&&t.codigoPai&&a(t)},async grupo_incluir_click(){$q.dialog({title:"Qual o nome do grupo?",preventClose:!0,prompt:{model:"",isValid:s=>s.length>0,type:"text"},cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Criar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async s=>{try{$q.loading.show();const a=await $utils.geeksApi({grupo:{funcao:"240A354B-DADC-4133-B359-F578E28572F5",descricao:s,codigoClienteSistema:this.clienteSistema.codigoClienteSistema}});if(a.data.grupo.erro){$q.notifyError(a.data.grupo.erro),$q.loading.hide();return}await this.atualizar()}catch(a){$q.notifyError("Erro ao cadastrar grupo.",a)}finally{$q.loading.hide()}})},async grupo_editar_click(s){$q.dialog({title:"Novo nome do grupo:",preventClose:!0,prompt:{model:"",isValid:a=>a.length>0,type:"text"},cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Editar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async a=>{try{$q.loading.show();const t=await $utils.geeksApi({grupo:{funcao:"9A886DAF-E5D4-4DAC-9933-6168074CE916",codigoGrupo:s.codigoGrupo,descricao:a,codigoClienteSistema:this.clienteSistema.codigoClienteSistema}});if(t.data.grupo.erro){$q.notifyError(t.data.grupo.erro),$q.loading.hide();return}await this.atualizar()}catch(t){$q.notifyError("Erro ao editar nome do grupo.",t)}finally{$q.loading.hide()}})},async grupo_excluir_click(s){$q.dialog({title:"Remover grupo",message:`Deseja remover o grupo: ${s.descricao}?`,cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{const a=await $utils.geeksApi({grupo:{funcao:"D328D819-AA47-453D-B455-1620E229BFFC",codigoGrupo:s.codigoGrupo}});if(a.data.grupo.erro){$q.notifyError(a.data.grupo.erro);return}await this.atualizar()}catch{$q.notifyError("Houve um erro ao remover o grupo. Tente novamente")}})},async usuario_seleciona_click(){const s=await $g.promptContato.show({filtro:{ativo:!0},placeholder:"Selecione um usu\xE1rio"});s&&(this.telaAdicionarUsuario.nome=s.nome,this.telaAdicionarUsuario.cpf=s.numeroDocumentoNacional,this.telaAdicionarUsuario.codigoContato=s.codigoContato)},async usuario_incluir_show(s){if(!(!!$db.usuario.logado.administrador&&[1,2].includes($db.usuario.logado.grupoInterno))&&$utils.sistemaPai()==="b15"){console.log("Encaminhar para Suporte"),Y("https://api.whatsapp.com/send?phone="+"551621116161");return}const t=this.telaAdicionarUsuario;if(s===void 0){t.codigoUsuario=null,t.codigoGrupo="",t.nome="",t.cpf="",t.mostrar=!0;return}t.codigoUsuario=null,t.codigoGrupo=s.codigoGrupo,t.nome=s.nome,t.cpf=s.numeroDocumentoNacional,t.mostrar=!0},async usuario_editar_show(s){const a=this.telaAdicionarUsuario;a.codigoUsuario=s.codigoUsuario,a.codigoGrupo=s.codigoGrupo,a.nome=s.nome,a.cpf=s.numeroDocumentoNacional,a.mostrar=!0},async usuario_alterar_senha_show(s){$q.dialog({title:"Informe a nova senha:",preventClose:!0,prompt:{model:"",isValid:a=>a.length>=6,type:"password",hint:"* A senha deve conter no m\xEDnimo 6 caracteres"},cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Atualizar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async a=>{try{$q.loading.show(),await $utils.geeksApi({grupo:{funcao:"96C436BE-FCDE-4595-BFFC-AFA4D6E75802",senha:a,codigoUsuario:this.telaAdicionarUsuario.codigoUsuario}})}catch(t){$q.notifyError("Erro ao alterar senha.",t)}finally{$q.loading.hide(),this.telaAdicionarUsuario.mostrar=!1}})},async usuario_gravar_click(){try{$q.loading.show();const s=$utils.clonar(this.telaAdicionarUsuario);s.funcao="00937915-77BD-4FFD-9681-313CC6031C30",s.codigoClienteSistema=this.clienteSistema.codigoClienteSistema,s.numeroDocumentoNacional=s.cpf;const a=await $utils.geeksApi({gravarUsuario:s});if(a.data.gravarUsuario.erro!==""){$q.notifyError(a.data.gravarUsuario.erro),$q.loading.hide();return}await this.atualizar()}catch(s){$q.notifyError("Erro ao adicionar usu\xE1rio ao grupo",s)}finally{$q.loading.hide()}},async usuario_excluir_click(s){if(!(!!$db.usuario.logado.administrador&&[1,2].includes($db.usuario.logado.grupoInterno))&&$utils.sistemaPai()==="b15"){console.log("Encaminhar para Suporte"),Y("https://api.whatsapp.com/send?phone="+"551621116161");return}$q.dialog({title:"Remover usu\xE1rio",message:`Deseja remover o usu\xE1rio: ${s.nome} do grupo?`,cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show(),await $utils.geeksApi({usuarioRemover:{funcao:"ED2D686D-D3ED-4777-BBEE-2C5A9CC4EBB0",codigoUsuario:s.codigoUsuario,codigoClienteSistema:this.clienteSistema.codigoClienteSistema}}),await this.atualizar()}catch(t){$q.notifyError("Houve um erro ao remover o usu\xE1rio do grupo",t)}finally{$q.loading.hide()}})},async permissoes_atualiza({codigoClienteSistema:s,codigoUsuario:a,codigoGrupo:t}){const l=(await $utils.geeksApi({itens:{funcao:"1C308EF4-D1FC-49E5-9195-71112132823E",codigoClienteSistema:s},permissaoUsuario:{funcao:"54493700-6637-4007-84D5-21573F039170",codigoClienteSistema:s,codigoUsuario:a},permissaoGrupo:{funcao:"004DB447-F92F-4A91-852B-5895B64E93E9",codigoGrupo:t}})).data;for(const i of l.itens)i.permissaoUsuario=!!l.permissaoUsuario.find(u=>u.codigoObjeto===i.codigoObjeto),i.permissaoGrupo=!!l.permissaoGrupo.find(u=>u.codigoObjeto===i.codigoObjeto),i.permissaoUsuarioOriginal=!!l.permissaoUsuario.find(u=>u.codigoObjeto===i.codigoObjeto),i.permissaoGrupoOriginal=!!l.permissaoGrupo.find(u=>u.codigoObjeto===i.codigoObjeto),i.mostrar=!0,i.aberto=!0;l.itens=$lodash.orderBy(l.itens,["ordem","descricao"],["asc","asc"]),globalThis.itens=l.itens,this.permissao.ret=l},async grupo_permissao_show(s){s.codigoUsuario=0,this.permissao.titulo=s.descricao,this.permissao.codigoGrupo=s.codigoGrupo,await this.permissoes_atualiza(s),this.permissao.tipo="grupo",this.permissao_filtro_atualiza(),this.permissao.mostrar=!0},async grupo_permissao_gravar_click(){const s=[],a=[];for(const t of this.grupoPermissao.permissaoOriginal)this.grupoPermissao.permissao.find(l=>l===t)||a.push(this.grupoPermissao.ret.find(l=>l.descricao===t).codigoGrupoPermissao);for(const t of this.grupoPermissao.permissao)this.grupoPermissao.permissaoOriginal.find(l=>l===t)||s.push(this.grupoPermissao.ret.find(l=>l.descricao===t).codigoGrupoPermissao);console.log("ativar",s,s.join(",")),console.log("inativar",a,a.join(",")),(await $utils.geeksApi({ret:{funcao:"53385537-7D4E-460B-8113-FED2D02D7017",ativar:s,inativar:a}})).data.ret,this.grupo_permissao_show(this.grupoPermissao.g)},async usuario_permissao_show(s){this.permissao.titulo=`${s.nome} - ${this.grupo.find(a=>a.codigoGrupo===s.codigoGrupo).descricao}`,this.permissao.codigoGrupo=s.codigoGrupo,this.permissao.u=s,await this.permissoes_atualiza(s),this.permissao.tipo="usuario",this.permissao.mostrar=!0},async usuario_permissao_gravar_click(){if(this.permissao.tipo==="usuario"){const t=[],l=[];for(const i of this.permissao.ret.itens)i.permissaoUsuario!==i.permissaoUsuarioOriginal&&(i.permissaoUsuario?t.push(i.codigoObjeto):l.push(i.codigoObjeto));console.log("ativar",t,t.join(",")),console.log("inativar",l,l.join(",")),(await $utils.geeksApi({ret:{funcao:"EDB935DC-96C9-48A0-8D7B-6EA6534C9DBD",ativar:t,inativar:l,codigoUsuario:this.permissao.u.codigoUsuario,codigoClienteSistema:this.clienteSistema.codigoClienteSistema}})).data.ret}const s=[],a=[];for(const t of this.permissao.ret.itens)t.permissaoGrupo!==t.permissaoGrupoOriginal&&(t.permissaoGrupo?s.push(t.codigoObjeto):a.push(t.codigoObjeto));console.log("grupo ativa",s,s.join(",")),console.log("grupo inativar",a,a.join(",")),s.length+a.length>0&&await $utils.geeksApi({ret:{funcao:"53385537-7D4E-460B-8113-FED2D02D7017",ativar:s,inativar:a,codigoGrupo:this.permissao.codigoGrupo}}),this.permissao.mostrar=!1},usuario_permissao_pai_usuario_click(s){for(const a of this.permissao.ret.itens.filter(t=>t.codigoPai===s.codigoPai))a.permissaoUsuario=s.usuarioPermissao},usuario_permissao_pai_grupo_click(s){for(const a of this.permissao.ret.itens.filter(t=>t.codigoPai===s.codigoPai))a.permissaoGrupo=s.grupoPermissao},usuario_permissao_pai_atualizar(s){const a=this.permissao.ret.itens.filter(i=>i.codigoPai===s.codigoPai)[0];let t=a.permissaoUsuario,l=a.permissaoGrupo;for(const i of this.permissao.ret.itens.filter(u=>u.codigoPai===s.codigoPai))if(i.permissaoGrupo!==l){l=null;break}for(const i of this.permissao.ret.itens.filter(u=>u.codigoPai===s.codigoPai))if(i.permissaoUsuario!==t){t=null;break}s.grupoPermissao=l,s.usuarioPermissao=t},async usuario_permissao_empresa_show(s){const a=(await $db.empresa.leOnlinePlat({codigoClienteSistema:this.clienteSistema.codigoClienteSistema})).sort((l,i)=>{var u,w;return((u=l.nome)==null?void 0:u.toLowerCase())<((w=i.nome)==null?void 0:w.toLowerCase())?-1:1}),t=await $utils.geeksApi({permissao:{funcao:"E0982E1C-87EC-4506-8293-675407D3312C",usuarioCpf:s.numeroDocumentoNacional}});for(const l of a)l.ativo=!!t.data.permissao.find(i=>i.empresaCnpj===l.numeroDocumentoNacional),l.ativoOriginal=l.ativo;this.empresaUsuarios.empresa=a,this.empresaUsuarios.usuario=s,this.usuario_permissao_empresa_atualizar_pai(),this.empresaUsuarios.mostrar=!this.empresaUsuarios.mostrar},async usuario_permissao_empresa_gravar(){const s=[],a=[];for(const t of this.empresaUsuarios.empresa)t.ativo!==t.ativoOriginal&&(t.ativo?s.push(t.numeroDocumentoNacional):a.push(t.numeroDocumentoNacional));console.log("ativar",s,s.join(",")),console.log("inativar",a,a.join(",")),await $utils.geeksApi({ret:{funcao:"46CC046D-A712-4C46-A1FF-98ED27C403B7",ativar:s,inativar:a,usuarioCpf:this.empresaUsuarios.usuario.numeroDocumentoNacional}})},usuario_permissao_empresa_atualizar_pai(){this.empresaUsuarios.usuario.ativo=this.empresaUsuarios.empresa[0].ativo;for(const s of this.empresaUsuarios.empresa)if(this.empresaUsuarios.usuario.ativo!==s.ativo){this.empresaUsuarios.usuario.ativo=null;break}},permissao_ativar_todos_click(s,a){let t="permissaoUsuario";s==="grupo"&&(t="permissaoGrupo");const l=this.permissao.ret.itens;function i(u){const w=l.filter(P=>u.codigoObjeto===P.codigoPai);for(const P of w)P[t]=u[t],i(P)}if(a[t]===!0&&l.filter(u=>a.codigoObjeto===u.codigoPai).length>0){$q.dialog({title:"Ativar todas as permiss\xF5es",preventClose:!0,cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async()=>{i(a)});return}i(a)}},async mounted(){await this.atualizar()}},uo={id:"UsuarioLista"},no={class:"mw80 text-center"},co={class:"mw80 text-center"},mo={class:"u-container"};function po(s,a,t,l,i,u){const w=V("BadgeCopiarUid"),P=V("Avatar"),I=V("badge"),Z=V("Lista"),v=V("g-label"),m=V("g-col"),A=V("g-row"),H=V("avatar");return _(),U("div",uo,[o(Z,{ref:"usuarioLista",busca:i.busca,"onUpdate:busca":a[2]||(a[2]=r=>i.busca=r),onAtualizar:u.atualizar,lista:i.lista,tabSelecionada:i.tabSelecionada,tabs:i.tabs,paginacao:i.paginacao,mostrar:i.mostrar,style:{"margin-top":"-16px"}},{botaoNovo:e(()=>[o(h,{unelevated:"",icon:"add",label:"Novo",color:"primary","text-color":"white",class:"hideonmobile"},{default:e(()=>[o(oo,null,{default:e(()=>[o(N,{link:"","no-border":"",separator:""},{default:e(()=>[p((_(),G(q,{onClick:a[0]||(a[0]=r=>u.grupo_incluir_click()),clickable:""},{default:e(()=>[o(f,{avatar:""},{default:e(()=>[o(j,{name:"add"})]),_:1}),o(f,null,{default:e(()=>[d("Grupo")]),_:1})]),_:1})),[[E]]),p((_(),G(q,{onClick:a[1]||(a[1]=r=>u.usuario_incluir_show(i.grupo.find(n=>n.codigoGrupo===i.tabSelecionada.valor))),clickable:""},{default:e(()=>[o(f,{avatar:""},{default:e(()=>[o(j,{name:"add"})]),_:1}),o(f,null,{default:e(()=>[d("Usu\xE1rio")]),_:1})]),_:1})),[[E]])]),_:1})]),_:1})]),_:1})]),itemLista:e(()=>[o(N,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:e(()=>[(_(!0),U(D,null,S(i.lista,(r,n)=>(_(),U("div",{key:n,class:"itemHover"},[o(q,{"manual-focus":"",class:"q-py-sm q-px-xs",style:{"flex-wrap":"wrap!important"}},{default:e(()=>[o(f,{class:"hideonmobile col-auto q-pr-sm no-margin"},{default:e(()=>[O("div",no,[o(w,{id:r.codigoContato,numero:r.codigoContato,cor:"positive",dica:"C\xF3digo Contato"},null,8,["id","numero"])])]),_:2},1024),o(f,{class:"col-12 col-sm no-margin"},{default:e(()=>[o(q,{class:"q-pa-none"},{default:e(()=>[o(f,{class:"col-auto items-center"},{default:e(()=>[o(P,{imagem:null,rotulo:r.apelido,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),o(f,{class:"col"},{default:e(()=>[o(y,{lines:"2",class:"text-weight-bold ellipsis-2-lines"},{default:e(()=>[O("span",null,[d(C(r.nome)+" ",1),o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("Nome")]),_:1})])]),_:2},1024),o(y,{caption:"",lines:"1",class:"ellipsis"},{default:e(()=>[O("span",null,[d(C(r.apelido)+" ",1),o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("Apelido")]),_:1})])]),_:2},1024),o(y,{class:"hideondesktop"},{default:e(()=>[o(w,{id:r.codigoContato,numero:r.codigoContato,cor:"positive",dica:"C\xF3digo Contato"},null,8,["id","numero"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(f,{class:"col-grow col-sm-3 col-md-2 colq-pl-sm no-margin"},{default:e(()=>[o(y,{lines:"1",color:"tertiary",class:"ellipsis"},{default:e(()=>[O("span",null,[d(C(r.numeroDocumentoNacional)+" ",1),o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("CPF/CNPJ")]),_:1})])]),_:2},1024),o(y,{caption:"",lines:"1",color:"tertiary",class:"ellipsis"},{default:e(()=>{var c;return[o(I,{rotulo:(c=i.grupo.find(g=>g.codigoGrupo===r.codigoGrupo))==null?void 0:c.descricao,cor:"tertiary",escuro:"",dica:"Grupo"},null,8,["rotulo"])]}),_:2},1024)]),_:2},1024),o(f,{class:"col-shrink q-pl-sm no-margin"},{default:e(()=>[o(y,{class:"text-weight-bold text-right"},{default:e(()=>[o(h,{onClick:c=>u.usuario_editar_show(r),icon:"edit",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:e(()=>[o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("Editar usu\xE1rio")]),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:c=>u.usuario_permissao_show(r),icon:"admin_panel_settings",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:e(()=>[o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("Editar permiss\xF5es")]),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:c=>u.usuario_permissao_empresa_show(r),icon:"business",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:e(()=>[o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("Permiss\xE3o empresa")]),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:c=>u.usuario_excluir_click(r),icon:"delete",size:"md",rounded:"",flat:"",dense:"",color:"tertiary"},{default:e(()=>[o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("Excluir usu\xE1rio")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(Q)]))),128)),(_(!0),U(D,null,S(i.grupo,(r,n)=>p((_(),U("div",{key:n,class:"itemHover"},[o(q,{"manual-focus":"",class:"q-py-sm q-px-xs",style:{"flex-wrap":"wrap!important"}},{default:e(()=>[o(f,{class:"hideonmobile col-auto q-pr-sm no-margin"},{default:e(()=>[O("div",co,[o(w,{id:r.codigoGrupo,numero:r.codigoGrupo,cor:"positive",dica:"C\xF3digo Contato"},null,8,["id","numero"])])]),_:2},1024),o(f,{class:"col-12 col-sm no-margin"},{default:e(()=>[o(q,{class:"q-pa-none"},{default:e(()=>[o(f,{class:"col-auto items-center"},{default:e(()=>[o(P,{imagem:null,rotulo:r.descricao,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),o(f,{class:"col"},{default:e(()=>[o(y,{lines:"2",class:"text-weight-bold ellipsis-2-lines"},{default:e(()=>[d(C(r.descricao),1)]),_:2},1024),o(y,{class:"hideondesktop"},{default:e(()=>[o(w,{id:r.codigoGrupo,numero:r.codigoGrupo,cor:"positive",dica:"C\xF3digo Contato"},null,8,["id","numero"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(f,{class:"col-12 col-sm-shrink q-pl-sm no-margin"},{default:e(()=>[o(y,{class:"text-weight-bold text-right"},{default:e(()=>[o(h,{onClick:c=>u.grupo_editar_click(r),icon:"edit",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:e(()=>[o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("Editar grupo")]),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:c=>u.grupo_permissao_show(r),icon:"admin_panel_settings",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:e(()=>[o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("Editar permiss\xF5es")]),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:c=>u.grupo_excluir_click(r),icon:"delete",size:"md",rounded:"",flat:"",dense:"",color:"tertiary"},{default:e(()=>[o(x,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[d("Excluir grupo")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(Q)])),[[b,i.tabSelecionada.valor==="Grupos"]])),128))]),_:1})]),_:1},8,["busca","onAtualizar","lista","tabSelecionada","tabs","paginacao","mostrar"]),o(L,{modelValue:i.telaAdicionarUsuario.mostrar,"onUpdate:modelValue":a[8]||(a[8]=r=>i.telaAdicionarUsuario.mostrar=r),persistent:""},{default:e(()=>[o(eo,{style:{width:"500px","max-width":"80vw"}},{default:e(()=>[o(R,null,{default:e(()=>[p(o(v,{text:"h6"},{default:e(()=>[d("Adicionar usu\xE1rio")]),_:1},512),[[b,!i.telaAdicionarUsuario.codigoUsuario]]),p(o(v,{text:"h6"},{default:e(()=>[d("Atualizar usu\xE1rio")]),_:1},512),[[b,i.telaAdicionarUsuario.codigoUsuario]])]),_:1}),o(R,{class:"q-py-none"},{default:e(()=>[o(ao,{modelValue:i.telaAdicionarUsuario.codigoGrupo,"onUpdate:modelValue":a[3]||(a[3]=r=>i.telaAdicionarUsuario.codigoGrupo=r),options:i.grupo,"option-value":"codigoGrupo","option-label":r=>r===null?"":r.descricao,label:"Grupo","map-options":"","emit-value":"",filled:"",dense:"",hint:"",class:"q-mb-md"},null,8,["modelValue","options","option-label"]),o(z,{modelValue:i.telaAdicionarUsuario.nome,"onUpdate:modelValue":a[4]||(a[4]=r=>i.telaAdicionarUsuario.nome=r),onClick:u.usuario_seleciona_click,label:"Nome",filled:"",dense:"",readonly:"",disable:!!i.telaAdicionarUsuario.codigoUsuario,hint:i.telaAdicionarUsuario.codigoUsuario?"":"Clique para selecionar o usu\xE1rio",class:"q-mb-md"},{append:e(()=>[o(j,{onClick:u.usuario_seleciona_click,name:"search",class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onClick","disable","hint"]),o(z,{modelValue:i.telaAdicionarUsuario.cpf,"onUpdate:modelValue":a[5]||(a[5]=r=>i.telaAdicionarUsuario.cpf=r),label:"CPF",filled:"",dense:"",readonly:"",disable:!!i.telaAdicionarUsuario.codigoUsuario,hint:i.telaAdicionarUsuario.codigoUsuario?"":"* CPF obrigat\xF3rio (preenchido ao selecionar usu\xE1rio)",class:"q-mb-md"},null,8,["modelValue","disable","hint"]),p(o(z,{modelValue:i.telaAdicionarUsuario.senha,"onUpdate:modelValue":a[7]||(a[7]=r=>i.telaAdicionarUsuario.senha=r),type:i.telaAdicionarUsuario.mostraSenha?"password":"text",label:"Senha",filled:"",dense:"",hint:"* A senha deve conter no m\xEDnimo 6 caracteres",rules:[r=>r.length>=6||"A senha deve conter no m\xEDnimo 6 caracteres"]},{append:e(()=>[o(j,{onClick:a[6]||(a[6]=r=>i.telaAdicionarUsuario.mostraSenha=!i.telaAdicionarUsuario.mostraSenha),name:i.telaAdicionarUsuario.mostraSenha?"visibility_off":"visibility",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),[[b,!i.telaAdicionarUsuario.codigoUsuario]])]),_:1}),o(io,{align:"right",class:"text-primary"},{default:e(()=>[p(o(h,{label:"Cancelar",flat:"",color:"tertiary"},null,512),[[E]]),p(o(h,{onClick:u.usuario_gravar_click,label:"Adicionar",color:"primary"},null,8,["onClick"]),[[E]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(L,{modelValue:i.permissao.mostrar,"onUpdate:modelValue":a[16]||(a[16]=r=>i.permissao.mostrar=r),maximized:""},{default:e(()=>[o(M,{container:"",class:"bg-white"},{default:e(()=>[o(J,{class:"bg-white text-tertiary"},{default:e(()=>[o(T,{class:"bg-primary text-white"},{default:e(()=>[p(o(h,{icon:"arrow_back",round:"",flat:"",dense:""},null,512),[[E]]),o(X,null,{default:e(()=>[o(v,{lines:"1"},{default:e(()=>[d("Alterar permiss\xF5es de: "+C(i.permissao.titulo),1)]),_:1})]),_:1}),p(o(h,{onClick:u.usuario_permissao_gravar_click,label:"Salvar",color:"white","text-color":"primary",unelevated:""},null,8,["onClick"]),[[E]])]),_:1}),O("div",mo,[o(A,{gutter:"sm-x",justify:"center"},{default:e(()=>[o(m,{col:"12 sm10 md7",bordered:"bottom"},{default:e(()=>[o(T,{class:"no-padding"},{default:e(()=>[o(z,{modelValue:i.permissao.buscaPermissao,"onUpdate:modelValue":[a[9]||(a[9]=r=>i.permissao.buscaPermissao=r),u.permissao_filtro_atualiza],onClear:a[10]||(a[10]=r=>i.permissao.buscaPermissao=""),debounce:500,placeholder:"Filtrar","clear-icon":"close",standout:"",filled:"",clearable:"",dense:""},{prepend:e(()=>[o(j,{name:"mdi-filter",color:"grey-6"})]),after:e(()=>[o(h,{onClick:u.atualizar,icon:"refresh",size:"17.5px",round:"",flat:"",dense:"",color:"grey-6",class:"q-ml-xs"},null,8,["onClick"])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),o(A,{items:"center"},{default:e(()=>[o(m,{col:"xs"},{default:e(()=>[o(h,{onClick:a[11]||(a[11]=()=>{const r=!i.permissao.ret.itens.find(n=>n.codigoPai===0).aberto;i.permissao.ret.itens.forEach(n=>n.aberto=r)}),icon:i.permissao.ret.itens.find(r=>r.codigoPai===0).aberto?"expand_less":"expand_more",size:"17.5px",round:"",flat:"",dense:"",color:"grey-6"},null,8,["icon"])]),_:1}),p(o(m,{col:"xs-shrink",text:"center"},{default:e(()=>[o(k,{onClick:a[12]||(a[12]=()=>{s.v=!i.permissao.ret.itens[0].permissaoUsuario,i.permissao.ret.itens.forEach(r=>r.permissaoUsuario=s.v)}),modelValue:u.permissaoUsuarioCheckboxTodos,"onUpdate:modelValue":a[13]||(a[13]=r=>u.permissaoUsuarioCheckboxTodos=r)},null,8,["modelValue"]),o(v,{style:{"font-size":"11px"}},{default:e(()=>[d("Usu\xE1rio")]),_:1})]),_:1},512),[[b,i.permissao.tipo==="usuario"]]),o(m,{col:"xs-shrink",text:"center"},{default:e(()=>[o(k,{onClick:a[14]||(a[14]=()=>{s.v=!i.permissao.ret.itens[0].permissaoGrupo,i.permissao.ret.itens.forEach(r=>r.permissaoGrupo=s.v)}),modelValue:u.permissaoGrupoCheckboxTodos,"onUpdate:modelValue":a[15]||(a[15]=r=>u.permissaoGrupoCheckboxTodos=r)},null,8,["modelValue"]),o(v,{style:{"font-size":"11px"}},{default:e(()=>[d("Grupo")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),o(K,{class:"u-container"},{default:e(()=>[o(A,{gutter:"sm-x",mg:"lg-y",justify:"center"},{default:e(()=>[o(m,{col:"12 sm10 md7"},{default:e(()=>[(_(!0),U(D,null,S(i.permissao.ret.itens.filter(r=>r.codigoPai===0),r=>p((_(),G(A,{key:r.codigoObjeto,mg:"md-b"},{default:e(()=>[o(m,{col:"12"},{default:e(()=>[o(A,{bg:"bg-grey-3",items:"center"},{default:e(()=>[o(m,{col:"xs",onClick:()=>{r.aberto=!r.aberto},class:B(i.permissao.ret.itens.filter(n=>n.codigoPai===r.codigoObjeto).length>0?"cursor-pointer":"")},{default:e(()=>[o(v,{icon:i.permissao.ret.itens.filter(n=>n.codigoPai===r.codigoObjeto).length>0?r.aberto?"expand_less xs":"expand_more xs":"",class:B(i.permissao.ret.itens.filter(n=>n.codigoPai===r.codigoObjeto).length>0?"":"g-mg-left"),text:"medium"},{default:e(()=>[d(C(r.descricao),1)]),_:2},1032,["icon","class"])]),_:2},1032,["onClick","class"]),o(m,{col:"xs-shrink"},{default:e(()=>[p(o(k,{modelValue:r.permissaoUsuario,"onUpdate:modelValue":n=>r.permissaoUsuario=n,onClick:n=>u.permissao_ativar_todos_click("usuario",r)},null,8,["modelValue","onUpdate:modelValue","onClick"]),[[b,i.permissao.tipo==="usuario"]])]),_:2},1024),o(m,{col:"xs-shrink"},{default:e(()=>[o(k,{modelValue:r.permissaoGrupo,"onUpdate:modelValue":n=>r.permissaoGrupo=n,onClick:n=>u.permissao_ativar_todos_click("grupo",r)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),p(o(m,{col:"12"},{default:e(()=>[(_(!0),U(D,null,S(i.permissao.ret.itens.filter(n=>n.codigoPai===r.codigoObjeto),n=>p((_(),G(A,{key:n.codigoObjeto,items:"center",class:"g-mg-left"},{default:e(()=>[o(m,{col:"xs",onClick:()=>{n.aberto=!n.aberto},class:B(i.permissao.ret.itens.filter(c=>c.codigoPai===n.codigoObjeto).length>0?"cursor-pointer":"")},{default:e(()=>[o(v,{icon:i.permissao.ret.itens.filter(c=>c.codigoPai===n.codigoObjeto).length>0?n.aberto?"expand_less xs":"expand_more xs":"",text:"medium"},{default:e(()=>[d(C(n.descricao),1)]),_:2},1032,["icon"])]),_:2},1032,["onClick","class"]),o(m,{col:"xs-shrink"},{default:e(()=>[p(o(k,{modelValue:n.permissaoUsuario,"onUpdate:modelValue":c=>n.permissaoUsuario=c,onClick:c=>u.permissao_ativar_todos_click("usuario",n)},null,8,["modelValue","onUpdate:modelValue","onClick"]),[[b,i.permissao.tipo==="usuario"]])]),_:2},1024),o(m,{col:"xs-shrink"},{default:e(()=>[o(k,{modelValue:n.permissaoGrupo,"onUpdate:modelValue":c=>n.permissaoGrupo=c,onClick:c=>u.permissao_ativar_todos_click("grupo",n)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),p(o(m,{col:"12"},{default:e(()=>[(_(!0),U(D,null,S(i.permissao.ret.itens.filter(c=>c.codigoPai===n.codigoObjeto),c=>p((_(),G(A,{key:c.codigoObjeto,items:"center",class:"g-mg-left g-mg-bottom"},{default:e(()=>[o(m,{col:"xs",onClick:()=>{c.aberto=!c.aberto},class:B(i.permissao.ret.itens.filter(g=>g.codigoPai===c.codigoObjeto).length>0?"cursor-pointer":"")},{default:e(()=>[o(v,{icon:i.permissao.ret.itens.filter(g=>g.codigoPai===c.codigoObjeto).length>0?c.aberto?"expand_less xs":"expand_more xs":"subdirectory_arrow_right",text:i.permissao.ret.itens.filter(g=>g.codigoPai===c.codigoObjeto).length>0?"medium":""},{default:e(()=>[d(C(c.descricao),1)]),_:2},1032,["icon","text"])]),_:2},1032,["onClick","class"]),o(m,{col:"xs-shrink"},{default:e(()=>[p(o(k,{modelValue:c.permissaoUsuario,"onUpdate:modelValue":g=>c.permissaoUsuario=g,onClick:g=>u.permissao_ativar_todos_click("usuario",c)},null,8,["modelValue","onUpdate:modelValue","onClick"]),[[b,i.permissao.tipo==="usuario"]])]),_:2},1024),o(m,{col:"xs-shrink"},{default:e(()=>[o(k,{modelValue:c.permissaoGrupo,"onUpdate:modelValue":g=>c.permissaoGrupo=g,onClick:g=>u.permissao_ativar_todos_click("grupo",c)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),p(o(m,{col:"12"},{default:e(()=>[(_(!0),U(D,null,S(i.permissao.ret.itens.filter(g=>g.codigoPai===c.codigoObjeto),g=>p((_(),G(A,{key:g.codigoObjeto,items:"center",class:"g-mg-left g-mg-bottom"},{default:e(()=>[o(m,{col:"xs"},{default:e(()=>[o(v,{icon:"subdirectory_arrow_right"},{default:e(()=>[d(C(g.descricao),1)]),_:2},1024)]),_:2},1024),o(m,{col:"xs-shrink"},{default:e(()=>[p(o(k,{modelValue:g.permissaoUsuario,"onUpdate:modelValue":F=>g.permissaoUsuario=F},null,8,["modelValue","onUpdate:modelValue"]),[[b,i.permissao.tipo==="usuario"]])]),_:2},1024),o(m,{col:"xs-shrink"},{default:e(()=>[o(k,{modelValue:g.permissaoGrupo,"onUpdate:modelValue":F=>g.permissaoGrupo=F},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[b,g.mostrar]])),128))]),_:2},1536),[[b,c.aberto]])]),_:2},1024)),[[b,c.mostrar]])),128))]),_:2},1536),[[b,n.aberto]])]),_:2},1024)),[[b,n.mostrar]])),128))]),_:2},1536),[[b,r.aberto]])]),_:2},1024)),[[b,r.mostrar]])),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(L,{modelValue:i.empresaUsuarios.mostrar,"onUpdate:modelValue":a[19]||(a[19]=r=>i.empresaUsuarios.mostrar=r),maximized:""},{default:e(()=>[o(M,{container:"",class:"bg-light"},{default:e(()=>[o(J,{class:"bg-light text-tertiary"},{default:e(()=>[o(T,{class:"bg-primary text-white q-pa-sm"},{default:e(()=>[p(o(h,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[E]]),o(X,null,{default:e(()=>[d("Permiss\xE3o de usu\xE1rios")]),_:1}),o(so),p(o(h,{onClick:u.usuario_permissao_empresa_gravar,label:"Salvar","text-color":"primary",color:"white",unelevated:""},null,8,["onClick"]),[[E]])]),_:1}),o(A,{gutter:"sm",items:"center"},{default:e(()=>[o(m,{col:"xs-shrink"},{default:e(()=>[o(H,{imagem:i.empresaUsuarios.usuario.imagem,rotulo:i.empresaUsuarios.usuario.apelido,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]),_:1}),o(m,{col:"xs"},{default:e(()=>[o(v,{text:"body1 medium"},{default:e(()=>[d(C(i.empresaUsuarios.usuario.apelido),1)]),_:1}),o(v,{text:"caption"},{default:e(()=>[d(C(i.empresaUsuarios.usuario.numeroDocumentoNacional),1)]),_:1})]),_:1}),o(m,{col:"xs-shrink"},{default:e(()=>[o(k,{modelValue:i.empresaUsuarios.usuario.ativo,"onUpdate:modelValue":a[17]||(a[17]=r=>i.empresaUsuarios.usuario.ativo=r),onClick:a[18]||(a[18]=()=>{this.empresaUsuarios.empresa.forEach(r=>{r.ativo=this.empresaUsuarios.usuario.ativo})})},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(K,null,{default:e(()=>[o(N,{bordered:"",class:"bg-white q-ma-xs rounded-borders"},{default:e(()=>[(_(!0),U(D,null,S(i.empresaUsuarios.empresa,(r,n)=>(_(),U("div",{key:n,class:"itemHover"},[o(q,{clickable:"","manual-focus":"",class:"q-py-sm q-px-xs"},{default:e(()=>[o(f,{class:"col-xs no-margin"},{default:e(()=>[o(q,{class:"q-pa-none"},{default:e(()=>[o(f,{class:"col-auto items-center"},{default:e(()=>[o(H,{imagem:r.imagem,rotulo:r.nome,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]),_:2},1024),o(f,{class:"col"},{default:e(()=>[o(y,{lines:"2",class:"text-tertiary text-weight-bold ellipsis-2-lines"},{default:e(()=>[d(C(r.nome),1)]),_:2},1024),o(y,{caption:"",lines:"2",class:"text-tertiary ellipsis"},{default:e(()=>[d(C(r.apelido),1)]),_:2},1024),o(f,{class:"hideondesktop q-mt-sm"},{default:e(()=>[O("div",null,[r.numeroDocumentoNacional?(_(),G(I,{key:0,cor:"tertiary",escuro:"",class:"q-mr-xs"},{default:e(()=>[d(C(r.numeroDocumentoNacional),1)]),_:2},1024)):W("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(f,{class:"hideonmobile maxw180 q-pl-sm no-margin"},{default:e(()=>[r.numeroDocumentoNacional?(_(),G(ro,{key:0,color:"tertiary","multi-line":"",class:"col-auto q-mx-auto q-py-xs"},{default:e(()=>[d(C(r.numeroDocumentoNacional),1)]),_:2},1024)):W("",!0)]),_:2},1024),o(f,{class:"col-xs-shrink no-margin"},{default:e(()=>[o(k,{modelValue:r.ativo,"onUpdate:modelValue":c=>r.ativo=c,onClick:u.usuario_permissao_empresa_atualizar_pai},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024)]),_:2},1024),o(Q)]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ko=$(lo,[["render",po]]);export{ko as default};
