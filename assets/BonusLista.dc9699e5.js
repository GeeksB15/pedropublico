import{_ as oe,ap as T,r as h,o as V,n as w,f as a,bs as le,w as t,O as $,F as G,s as te,d as E,R as q,S as c,B as p,T as g,k as r,t as f,m as U,j as C,e as y,Q as x,ax as ie,G as se,M as ne,l as re,L as de,K as ue,D as me,E as fe,h as pe,i as ce,H as be,I as Ve,J as ge,bD as ve,C as Ce}from"./index.188ab8e6.js";import{L as xe}from"./Lista.e6905c5e.js";import{S as we}from"./SeletorEmpresa.9402f176.js";import"./QBtnDropdown.2d90fa9b.js";import"./QBtnGroup.0884e20d.js";import"./QScrollArea.10dd49ab.js";const ye=()=>{const e=new Date;e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const n=60,d=new Date(e);return d.setDate(d.getDate()+n),d.setHours(0,0,0,0),{visivel:!0,dadosEmpresa:{},id:$utils.uuid(),nomeCliente:"",cpfCliente:"",whatsappCliente:"",diasMinimoUso:1,dataInicioValidade:T.formatDate(e),diasExpiracao:n,dataVencimento:T.formatDate(d),valor:1,valorMinimoVenda:10,observacao:"",textoRegras:""}},De={components:{Lista:xe,SeletorEmpresa:we},data(){return{usuario:"",lista:[],cores:{Ativo:"positive",Utilizado:"tertiary",Vencido:"orange",Cancelado:"negative"},mostrar:{header:!0,barraTopo:!0,toolbarTitulo:!0,icone:"card_giftcard",titulo:"B\xF4nus",buscar:!0,filtroAvancado:!0,btnAjuda:!0,btnAtualizar:!0,btnNovo:!0,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!0,btnExportaXLS:!1,btnMenuMais:!1,toolbarAdicao:!1,bannerMsg:""},busca:"",contatoEmpresas:[],filtrosOriginal:{},filtros:{tokenBonus:"",nomeCliente:"",cpfCliente:"",whatsappCliente:"",idEmpresa:"",cpfUsuarioEmissor:"",idDocumentoOrigem:"",dataVencimento:{ini:"",fim:""},dataHoraCriacao:{ini:"",fim:""},dataInicioValidade:{ini:"",fim:""},dataHoraFinalizado:{ini:"",fim:""},valor:0,valorMinimoVenda:0,ordenacao:"dataHoraCriacao",direcao:"desc"},opcoesVendedores:[],ordenacaoOpcoes:[{value:"dataHoraCriacao",label:"Data Cria\xE7\xE3o"},{value:"dataInicioValidade",label:"Data Cria\xE7\xE3o"},{value:"dataHoraFinalizado",label:"Data Finalizado"},{value:"dataVencimento",label:"Data Vencimento"}],direcaoOpcoes:[{value:"asc",label:"Crescente"},{value:"desc",label:"Decrescente"}],detalhes:!1,tabSelecionada:{valor:"Ativo"},tabs:[{valor:"Ativo",rotulo:"Ativos"},{valor:"Utilizado",rotulo:"Utilizados"},{valor:"Vencido",rotulo:"Vencidos"},{valor:"Cancelado",rotulo:"Cancelados"},{valor:"Todos",rotulo:"Todos"}],paginacao:{atual:1,maximo:1,total:1,limite:25},bonus:{},dataAtual:$utils.dataAtual(),tela:{width:0,heihgt:0}}},methods:{async atualizar(s){var e,n,d,l,m,u,B,D,F,v,b,M,P,o,k,H,A,I,S,L,N,O,Q,j,X,Y,Z,R,_;try{$q.loading.show(),this.lista=[],this.tabSelecionadaAnt!==this.tabSelecionada.valor&&(this.paginacao.atual=1),this.tabSelecionadaAnt=this.tabSelecionada.valor;let{buscarDadosRecentes:K}=s!=null?s:{},i={},z={};K&&(i=await $utils.localIDB.getItem({objectStore:"dadosRecentes",id:"BonusLista_"+((e=this.usuario)==null?void 0:e.id)}),i!=null&&i._id&&(this.tabSelecionada.valor=(i==null?void 0:i.tabSelecionada)||"Ativo",this.busca=(i==null?void 0:i.busca)||"",this.filtros={tokenBonus:((n=i==null?void 0:i.filtros)==null?void 0:n.tokenBonus)||"",nomeCliente:((d=i==null?void 0:i.filtros)==null?void 0:d.nomeCliente)||"",cpfCliente:((l=i==null?void 0:i.filtros)==null?void 0:l.cpfCliente)||"",whatsappCliente:((m=i==null?void 0:i.filtros)==null?void 0:m.whatsappCliente)||"",idEmpresa:((u=i==null?void 0:i.filtros)==null?void 0:u.idEmpresa)||"",cpfUsuarioEmissor:((B=i==null?void 0:i.filtros)==null?void 0:B.cpfUsuarioEmissor)||"",idDocumentoOrigem:((D=i==null?void 0:i.filtros)==null?void 0:D.idDocumentoOrigem)||"",dataVencimento:{ini:((v=(F=i==null?void 0:i.filtros)==null?void 0:F.dataVencimento)==null?void 0:v.ini)||"",fim:((M=(b=i==null?void 0:i.filtros)==null?void 0:b.dataVencimento)==null?void 0:M.fim)||""},dataHoraCriacao:{ini:((o=(P=i==null?void 0:i.filtros)==null?void 0:P.dataHoraCriacao)==null?void 0:o.ini)||"",fim:((H=(k=i==null?void 0:i.filtros)==null?void 0:k.dataHoraCriacao)==null?void 0:H.fim)||""},dataInicioValidade:{ini:((I=(A=i==null?void 0:i.filtros)==null?void 0:A.dataInicioValidade)==null?void 0:I.ini)||"",fim:((L=(S=i==null?void 0:i.filtros)==null?void 0:S.dataInicioValidade)==null?void 0:L.fim)||""},dataHoraFinalizado:{ini:((O=(N=i==null?void 0:i.filtros)==null?void 0:N.dataHoraFinalizado)==null?void 0:O.ini)||"",fim:((j=(Q=i==null?void 0:i.filtros)==null?void 0:Q.dataHoraFinalizado)==null?void 0:j.fim)||""},valor:((X=i==null?void 0:i.filtros)==null?void 0:X.valor)||0,valorMinimoVenda:((Y=i==null?void 0:i.filtros)==null?void 0:Y.valorMinimoVenda)||0,ordenacao:((Z=i==null?void 0:i.filtros)==null?void 0:Z.ordenacao)||"dataHoraCriacao",direcao:((R=i==null?void 0:i.filtros)==null?void 0:R.direcao)||"desc"},this.compareObject(this.filtrosOriginal,this.filtros,["ordenacao","direcao"])&&(this.$refs.bonusLista.filtros=!0))),z=$utils.eliminarVazios(this.filtros),delete z.status,this.tabSelecionada.valor!=="Todos"&&(z.status=this.tabSelecionada.valor),this.busca&&(this.paginacao.atual=1,/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(this.busca)?(this.tabSelecionada.valor="Todos",z={id:this.busca}):z.termoBusca=this.busca);const ee=[this.filtros.ordenacao],ae=[this.filtros.direcao],W=await $db.bonus.leListaCompleta({filtros:z,limit:this.paginacao.limite,page:this.paginacao.atual,sort:ee,dir:ae});for(const J of W.data)J.detalhes=!1;this.$refs.bonusLista.detalhes=!1,this.lista=W.data,this.paginacao.total=W.total,this.paginacao.maximo=W.totalPages,i={_id:"BonusLista_"+((_=this.usuario)==null?void 0:_.id),tabSelecionada:this.tabSelecionada.valor,busca:this.busca,filtros:$utils.clonar(this.filtros)},await $utils.localIDB.setItem({objectStore:"dadosRecentes",data:i})}catch(K){$q.notifyError("Erro iniciar",K)}finally{$q.loading.hide()}},async contatoEmpresasCarregar(){this.contatoEmpresas=await $db.contatoEmpresa.listaCache()},async criarClick(){this.bonus=ye(),this.bonus.dadosEmpresa=this.contatoEmpresas[0]},validacao(s,e){if(s==="diasMinimoUso"){const n=Number(e.diasMinimoUso),d=new Date(this.dataAtual);(!n||n<0)&&(e.diasMinimoUso=1),d.setDate(d.getDate()+n),d.setHours(0,0,0,0),e.dataInicioValidade=T.formatDate(d);return}if(s==="dataInicioValidade"){const n=new Date(e.dataInicioValidade),d=new Date(e.dataVencimento),l=new Date(this.dataAtual),m=Number(e.diasExpiracao);if(!n||isNaN(n))return"Defina a data de in\xEDcio.";n.setHours(0,0,0,0)<l&&(e.dataInicioValidade=l);const u=n-new Date(l);e.diasMinimoUso=Math.ceil(u/1e3/60/60/24),n.setDate(n.getDate()+m),n.setHours(0,0,0,0),e.dataVencimento=T.formatDate(n),d.setHours(0,0,0,0)<=l.setHours(0,0,0,0)&&(e.dataVencimento=n.setHours(0,0,0,0)>=l.setHours(0,0,0,0)?n:l),d.setHours(0,0,0,0)<=n.setHours(0,0,0,0)&&(e.dataVencimento=n.setHours(0,0,0,0)>=l.setHours(0,0,0,0)?n:l);return}if(s==="diasExpiracao"){const n=Number(e.diasExpiracao),d=new Date(e.dataInicioValidade);(!n||n<0)&&(e.diasExpiracao=1),d.setDate(d.getDate()+n),d.setHours(0,0,0,0),e.dataVencimento=T.formatDate(d);return}if(s==="dataVencimento"){const n=new Date(e.dataInicioValidade),d=new Date(e.dataVencimento),l=new Date(this.dataAtual);if(Number(e.diasExpiracao),!d||isNaN(d))return"Defina a data de vencimento.";const m=d-new Date(n);return e.diasExpiracao=Math.ceil(m/1e3/60/60/24),d.setHours(0,0,0,0)<=l.setHours(0,0,0,0)?(e.dataVencimento=n.setHours(0,0,0,0)>=l.setHours(0,0,0,0)?n:l,"A vig\xEAncia deve ser maior ou igual \xE0 data atual"):d.setHours(0,0,0,0)<n.setHours(0,0,0,0)?(e.dataVencimento=n>=l?n:l,"A vig\xEAncia at\xE9 deve ser maior ou igual \xE0 vig\xEAncia de"):void 0}if(s==="valor")return!e.valor||e.valor<0?(this.bonus.valor=0,"Valor deve ser maior que R$ 0,00"):void 0;if(s==="valorMinimoVenda")return e.valorMinimoVenda<0?(this.bonus.valorMinimoVenda=1,"Valor n\xE3o pode ser negativo."):void 0},fecharBonus(){this.bonus={}},async salvarBonus(){await $tryLoading("Salvando...",async()=>{var s,e;await $utils.geeksApi({geraBonusManual:{funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",valor:this.bonus.valor,funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",dataInicioValidade:this.bonus.dataInicioValidade,dataVencimento:this.bonus.dataVencimento,cnpjEmissor:(s=this.bonus.dadosEmpresa)==null?void 0:s.numeroDocumentoNacional,nomeEmissor:(e=this.bonus.dadosEmpresa)==null?void 0:e.apelido,cpfCliente:this.bonus.cpfCliente,nomeCliente:this.bonus.nomeCliente,whatsappCliente:this.bonus.whatsappCliente,valor:this.bonus.valor,valorMinimoVenda:this.bonus.valorMinimoVenda,observacao:this.bonus.observacao,textoRegras:this.bonus.textoRegras}}),this.bonus={},await this.atualizar(),$q.notifyPositive("B\xF4nus criado com sucesso")})},async cancelarBonus(s){!await $q.dialogSimNao({title:"Cancelar B\xF4nus",message:`Deseja cancelar o B\xF4nus de R$ ${$filters.numero(s.valor,2)} para ${s.nomeCliente}?`})||await $tryLoading("Cancelando...",async()=>{var n,d;const e=await $utils.geeksApi({cancelaBonus:{funcao:"459C0A26-6F81-4B5D-B427-B915142C6283",id:s.id}});$q.notifyPositive(((d=(n=e.data)==null?void 0:n.cancelaBonus)==null?void 0:d.mensagem)||"B\xF4nus cancelado com sucesso"),await this.atualizar()})},detalhesClick(){this.detalhes=!this.detalhes,this.lista.forEach(s=>{s.detalhes=this.detalhes})},abrirFecharDetalhes(s){s.detalhes=!s.detalhes},async limparFiltrosClick(){this.filtros=$utils.clonar(this.filtrosOriginal),await this.atualizar()},async abrirModalCliente(){var e,n;const s=await $g.promptContato.show({filtro:{ativo:!0}});!(s!=null&&s.id)||(this.bonus.cpfCliente=s.numeroDocumentoNacional,this.bonus.nomeCliente=s.nome,this.bonus.whatsappCliente=(n=(e=await $db.hibrido.lista({table:"contatoTelefone",where:{idContato:s==null?void 0:s.id},whereFilter:{tipoTelefone:"WhatsApp"}}))==null?void 0:e[0])==null?void 0:n.telefone)},async abrirModalContatoFiltro(){const s=await $g.promptContato.show({filtro:{ativo:!0}});!(s!=null&&s.id)||(this.filtros.nomeCliente=s.nome)},compareObject(s,e,n=[]){const d=Object.keys(s);for(const l of d)if(!n.includes(l)){if(typeof s[l]=="object"&&s[l]!==null){if(!this.compareObject(s[l],e[l],n))continue;return!0}else if(s[l]!==e[l])return!0}return!1},async configurarVendedores(){const s=(await $db.contato.ler({filtros:{ativo:!0,vendedores:!0}})).data;s==null||s.sort((e,n)=>{var d;return(d=e==null?void 0:e.nome)==null?void 0:d.localeCompare(n==null?void 0:n.nome)}),s.forEach(e=>{this.opcoesVendedores.push({label:e.nome,value:e.numeroDocumentoNacional})})},resize(){const s=document.getElementById("BonusLista");s&&(this.tela={width:s.offsetWidth,height:s.offsetHeight})},limparCliente(){this.bonus.cpfCliente="",this.bonus.nomeCliente="",this.bonus.whatsappCliente=""}},async mounted(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.filtrosOriginal=$utils.clonar(this.filtros),this.contatoEmpresasCarregar(),await this.configurarVendedores(),await this.atualizar({buscarDadosRecentes:!0})}},ke={id:"BonusLista"},he={class:"mw80 text-center"},Ee={key:0},qe={key:1},Ue={key:0},ze={class:"text-weight-medium q-pl-xs"},Be={key:1},Fe={class:"text-weight-medium q-px-sm"},Me={class:"text-center"};function He(s,e,n,d,l,m){const u=h("campo"),B=h("SeletorEmpresa"),D=h("BadgeCopiarUid"),F=h("avatar"),v=h("g-label"),b=h("g-col"),M=h("g-row"),P=h("Lista");return V(),w("div",ke,[a(le,{onResize:e[0]||(e[0]=o=>m.resize())}),a(P,{ref:"bonusLista",busca:l.busca,"onUpdate:busca":e[20]||(e[20]=o=>l.busca=o),onAtualizar:m.atualizar,onCriarClick:m.criarClick,onDetalhesClick:m.detalhesClick,onLimparFiltrosClick:m.limparFiltrosClick,lista:l.lista,tabSelecionada:l.tabSelecionada,tabs:l.tabs,paginacao:l.paginacao,mostrar:l.mostrar},{filtroCampos:t(()=>[a(u,{modelValue:l.filtros.tokenBonus,"onUpdate:modelValue":e[1]||(e[1]=o=>l.filtros.tokenBonus=o),clearable:"",dense:"",tipo:"texto",rotulo:"Token do B\xF4nus",class:"q-mt-sm q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.nomeCliente,"onUpdate:modelValue":e[2]||(e[2]=o=>l.filtros.nomeCliente=o),debounce:500,dense:"",before:[{icon:"search",handler:m.abrirModalContatoFiltro}],rotulo:"Cliente",class:"col-12 q-mt-md"},null,8,["modelValue","before"]),a(u,{modelValue:l.filtros.whatsappCliente,"onUpdate:modelValue":e[3]||(e[3]=o=>l.filtros.whatsappCliente=o),clearable:"",dense:"",tipo:"numero",rotulo:"WhatsApp",class:"q-mt-lg"},null,8,["modelValue"]),a(B,{modelValue:l.filtros.dadosEmpresa,"onUpdate:modelValue":e[4]||(e[4]=o=>l.filtros.dadosEmpresa=o),rotulo:"Por empresa",chaves:["id","nome","apelido","numeroDocumentoNacional"],class:"q-mt-md"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.cpfUsuarioEmissor,"onUpdate:modelValue":e[5]||(e[5]=o=>l.filtros.cpfUsuarioEmissor=o),options:l.opcoesVendedores,clearable:"",dense:"",tipo:"seletor",rotulo:"Vendedor"},null,8,["modelValue","options"]),a(u,{modelValue:l.filtros.idDocumentoOrigem,"onUpdate:modelValue":e[6]||(e[6]=o=>l.filtros.idDocumentoOrigem=o),clearable:"",dense:"",tipo:"texto",rotulo:"ID Doc. Origem",class:"q-mt-md"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.dataVencimento.ini,"onUpdate:modelValue":e[7]||(e[7]=o=>l.filtros.dataVencimento.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Vencimento de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.dataVencimento.fim,"onUpdate:modelValue":e[8]||(e[8]=o=>l.filtros.dataVencimento.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.dataHoraCriacao.ini,"onUpdate:modelValue":e[9]||(e[9]=o=>l.filtros.dataHoraCriacao.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Emiss\xE3o de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.dataHoraCriacao.fim,"onUpdate:modelValue":e[10]||(e[10]=o=>l.filtros.dataHoraCriacao.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.dataInicioValidade.ini,"onUpdate:modelValue":e[11]||(e[11]=o=>l.filtros.dataInicioValidade.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Inicio validade de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.dataInicioValidade.fim,"onUpdate:modelValue":e[12]||(e[12]=o=>l.filtros.dataInicioValidade.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.dataHoraFinalizado.ini,"onUpdate:modelValue":e[13]||(e[13]=o=>l.filtros.dataHoraFinalizado.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Finalizado de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.dataHoraFinalizado.fim,"onUpdate:modelValue":e[14]||(e[14]=o=>l.filtros.dataHoraFinalizado.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.valor,"onUpdate:modelValue":e[15]||(e[15]=o=>l.filtros.valor=o),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor b\xF4nus",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.valorMinimoVenda,"onUpdate:modelValue":e[16]||(e[16]=o=>l.filtros.valorMinimoVenda=o),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor m\xEDnimo da compra",class:"col-12 q-mt-sm"},null,8,["modelValue"]),a(u,{modelValue:l.filtros.ordenacao,"onUpdate:modelValue":e[17]||(e[17]=o=>l.filtros.ordenacao=o),options:l.ordenacaoOpcoes,dense:"",rotuloFixo:"Ordenar por",tipo:"seletor",class:"q-mt-xl"},null,8,["modelValue","options"]),a(u,{modelValue:l.filtros.direcao,"onUpdate:modelValue":e[18]||(e[18]=o=>l.filtros.direcao=o),options:l.direcaoOpcoes,dense:"",rotuloFixo:"Dire\xE7\xE3o",tipo:"seletor",class:"q-mt-sm"},null,8,["modelValue","options"]),a(u,{modelValue:l.paginacao.limite,"onUpdate:modelValue":e[19]||(e[19]=o=>l.paginacao.limite=o),tipo:"quantidade",min:"1",dense:"",rotulo:"Quantidade por p\xE1gina",class:"q-mt-xl q-mb-md"},null,8,["modelValue"])]),itemLista:t(()=>[a($,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:t(()=>[(V(!0),w(G,null,te(l.lista,o=>(V(),w("div",{key:o.id,class:"itemHover"},[o.id?(V(),E(q,{key:0,"manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:t(()=>[a(c,{class:"hideonmobile col-auto no-margin"},{default:t(()=>[a(q,{class:"q-pa-none"},{default:t(()=>[a(c,{side:"",class:"col-auto q-pa-none"},{default:t(()=>[p("div",he,[a(D,{id:o.id,escuro:"",cor:l.cores[o.status],dica:"ID B\xF4nus"},null,8,["id","cor"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(c,{class:"col-xs col-sm no-margin"},{default:t(()=>[a(q,{class:"q-pa-none"},{default:t(()=>[a(c,{class:"hideonmobile col-auto items-center cursor-pointer"},{default:t(()=>[a(F,{rotulo:o.nomeCliente,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),a(c,{top:"",class:"hideondesktop col-auto items-center cursor-pointer"},{default:t(()=>[a(F,{rotulo:o.nomeCliente,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),a(c,{class:"col"},{default:t(()=>[a(g,{lines:"3",class:"text-weight-bold cursor-pointer"},{default:t(()=>[o.cpfCliente?(V(),w("span",Ee,[r(f(o.nomeCliente||o.cpfCliente)+" ",1),a(U,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[45]||(e[45]=[r("Cliente")])),_:1})])):(V(),w("span",qe,f(o.nomeCliente?o.nomeCliente+" - ":"")+" Utiliza\xE7\xE3o para qualquer cliente ",1))]),_:2},1024),a(g,{caption:"",lines:"3",class:"cursor-pointer"},{default:t(()=>[o.cnpjEmissor?(V(),w("span",Ue,[a(C,{name:"business",class:"q-mr-xs"}),r(" "+f(o.nomeEmissor)+" ",1),p("span",ze,"("+f(o.cnpjEmissor)+")",1),a(U,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[46]||(e[46]=[r("Emissor")])),_:1})])):(V(),w("span",Be,[a(C,{name:"business",class:"q-mr-xs"}),e[47]||(e[47]=r(" Todas as empresas "))]))]),_:2},1024),a(g,{caption:"",lines:"3"},{default:t(()=>[p("span",null,[a(C,{name:"person"}),p("span",Fe,f(o.nomeUsuarioEmissor),1),a(U,{anchor:"bottom start",self:"center start"},{default:t(()=>e[48]||(e[48]=[r("Usuario")])),_:1})])]),_:2},1024),a(c,{class:"hideondesktop"},{default:t(()=>[a(g,{caption:"",class:"q-my-sm"},{default:t(()=>[a(D,{id:o.id,cor:l.cores[o.status],escuro:"",dica:"ID B\xF4nus",class:"col-auto q-mr-sm"},null,8,["id","cor"]),a(D,{id:o.tokenBonus,escuro:"",cor:"tertiary",dica:"Token do B\xF4nus",class:"col-auto q-mr-auto"},null,8,["id"])]),_:2},1024),a(q,{class:"no-padding no-margin",style:{"min-height":"15px"}},{default:t(()=>[a(c,{class:"col no-margin text-weight-medium"},{default:t(()=>[a(g,{caption:""},{default:t(()=>[a(C,{name:"mdi-calendar-today"}),r(" "+f(s.$filters.data(o.dataInicioValidade)),1)]),_:2},1024),a(g,{caption:""},{default:t(()=>[a(C,{name:"mdi-calendar-today"}),r(" "+f(s.$filters.data(o.dataVencimento)),1)]),_:2},1024)]),_:2},1024),a(c,{top:"",class:"col no-margin text-weight-medium"},{default:t(()=>[o.dataHoraFinalizado?(V(),E(g,{key:0,caption:""},{default:t(()=>[a(C,{name:"mdi-calendar"}),r(" "+f(s.$filters.data(o.dataHoraFinalizado)),1)]),_:2},1024)):y("",!0)]),_:2},1024)]),_:2},1024),a(q,{class:"no-padding no-margin",style:{"min-height":"32px"}},{default:t(()=>[a(c,{class:"col no-margin"},{default:t(()=>[o.valor?(V(),w(G,{key:0},[a(g,{caption:""},{default:t(()=>e[49]||(e[49]=[r(" Valor B\xF4nus ")])),_:1}),a(g,{caption:"",class:"text-weight-bold"},{default:t(()=>[r(f(s.$filters.numero(o.valor,2)),1)]),_:2},1024)],64)):y("",!0)]),_:2},1024),a(c,{class:"col no-margin"},{default:t(()=>[o.valorMinimoVenda?(V(),w(G,{key:0},[a(g,{caption:""},{default:t(()=>e[50]||(e[50]=[r(" Valor m\xEDnimo da compra ")])),_:1}),a(g,{caption:"",class:"text-weight-medium"},{default:t(()=>[r(f(s.$filters.numero(o.valorMinimoVenda,2)),1)]),_:2},1024)],64)):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(c,{class:"hideonmobile maxw80 no-margin cursor-pointer"},{default:t(()=>[p("div",Me,[a(D,{id:o.tokenBonus,escuro:"",dica:"Token do B\xF4nus",cor:"tertiary"},null,8,["id"])])]),_:2},1024),a(c,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:t(()=>[a(g,{caption:"",class:"text-center text-weight-medium"},{default:t(()=>[p("span",null,[a(C,{name:"mdi-calendar-today"}),r(" "+f(s.$filters.data(o.dataInicioValidade))+" ",1),a(U,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[51]||(e[51]=[r(" V\xE1lido de ")])),_:1})])]),_:2},1024),a(g,{caption:"",class:"text-center text-weight-medium"},{default:t(()=>[p("span",null,[a(C,{name:"mdi-calendar"}),r(" "+f(s.$filters.data(o.dataVencimento))+" ",1),a(U,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[52]||(e[52]=[r(" V\xE1lido at\xE9 ")])),_:1})])]),_:2},1024)]),_:2},1024),a(c,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:t(()=>[o.dataHoraFinalizado?(V(),E(g,{key:0,caption:"",class:"text-center text-weight-medium"},{default:t(()=>[p("span",null,[a(C,{name:"mdi-calendar"}),r(" "+f(s.$filters.data(o.dataHoraFinalizado))+" ",1),a(U,{anchor:"bottom middle",self:"center middle"},{default:t(()=>[r(f(o.status)+" \xE0s "+f(s.$filters.hora(o.dataHoraFinalizado)),1)]),_:2},1024)])]),_:2},1024)):y("",!0)]),_:2},1024),a(c,{class:"hideonmobile maxw100 q-pl-sm no-margin cursor-pointer"},{default:t(()=>[o.valor?(V(),E(g,{key:0,class:"text-weight-bold text-right"},{default:t(()=>[p("span",null,[r(f(s.$filters.numero(o.valor,2))+" ",1),a(U,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[53]||(e[53]=[r(" Valor B\xF4nus ")])),_:1})])]),_:2},1024)):y("",!0),o.valorMinimoVenda?(V(),E(g,{key:1,caption:"",class:"text-weight-medium text-right"},{default:t(()=>[p("span",null,[r(f(s.$filters.numero(o.valorMinimoVenda,2))+" ",1),a(U,{anchor:"bottom middle",self:"center middle"},{default:t(()=>e[54]||(e[54]=[r(" Valor m\xEDnimo da compra ")])),_:1})])]),_:2},1024)):y("",!0)]),_:2},1024),a(c,{class:"col-auto no-margin"},{default:t(()=>[a(q,{class:"q-pa-none"},{default:t(()=>[a(c,{class:"hideonmobile no-margin",style:{"max-width":"32px"}},{default:t(()=>[a(x,{onClick:k=>m.abrirFecharDetalhes(o),size:"md",color:"tertiary",round:"",flat:"",dense:"",icon:o.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),a(c,{class:"no-margin"},{default:t(()=>[a(x,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:t(()=>[a(ie,null,{default:t(()=>[se((V(),E($,{link:"","no-border":"",separator:""},{default:t(()=>[a(q,{onClick:k=>m.cancelarBonus(o),clickable:""},{default:t(()=>[a(c,{avatar:""},{default:t(()=>[a(C,{name:"delete"})]),_:1}),a(c,null,{default:t(()=>[a(g,null,{default:t(()=>e[55]||(e[55]=[r(" Cancelar ")])),_:1})]),_:1})]),_:2},1032,["onClick"]),a(q,{onClick:k=>m.abrirFecharDetalhes(o),clickable:"",class:"hideondesktop"},{default:t(()=>[a(c,{avatar:""},{default:t(()=>[a(C,{name:o.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:2},1024),a(c,null,{default:t(()=>e[56]||(e[56]=[r("Mais Detalhes")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)),[[ne]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0),o.detalhes?(V(),E(M,{key:1,gutter:"md-x lg-y"},{default:t(()=>[a(b,{col:"12 sm5 md3",bordered:""},{default:t(()=>[a(v,{icon:"description xs tertiary left",text:"medium"},{default:t(()=>e[57]||(e[57]=[r("CPF")])),_:1}),a(v,{class:"q-pl-lg"},{default:t(()=>[r(f(o.cpfCliente),1)]),_:2},1024),a(v,{icon:"mdi-whatsapp xs tertiary left",text:"medium"},{default:t(()=>e[58]||(e[58]=[r("WhatsApp")])),_:1}),a(v,{class:"q-pl-lg"},{default:t(()=>[r(f(o.whatsappCliente),1)]),_:2},1024)]),_:2},1024),a(b,{col:"12 sm7 md9",bordered:""},{default:t(()=>[a(v,{icon:"description xs tertiary left",text:"medium"},{default:t(()=>e[59]||(e[59]=[r("Regras")])),_:1}),a(v,{class:"q-pl-lg"},{default:t(()=>[r(f(o.textoRegras),1)]),_:2},1024),a(v,{icon:"description xs tertiary left",text:"medium"},{default:t(()=>e[60]||(e[60]=[r("Observa\xE7\xE3o")])),_:1}),a(v,{class:"q-pl-lg"},{default:t(()=>[r(f(o.observacao),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0),o.id?(V(),E(re,{key:2})):y("",!0)]))),128))]),_:1})]),_:1},8,["busca","onAtualizar","onCriarClick","onDetalhesClick","onLimparFiltrosClick","lista","tabSelecionada","tabs","paginacao","mostrar"]),a(Ce,{modelValue:l.bonus.visivel,"onUpdate:modelValue":e[43]||(e[43]=o=>l.bonus.visivel=o),onKeyup:e[44]||(e[44]=ve(o=>m.fecharBonus(),["esc"])),maximized:l.tela.width<=992},{default:t(()=>[a(de,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:ue(l.tela.width<=992?"":"max-width:600px;height:100%;max-height:600px;")},{default:t(()=>[a(me,{onSubmit:m.salvarBonus,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",novalidate:""},{default:t(()=>[a(fe,null,{default:t(()=>[a(pe,null,{default:t(()=>[a(C,{name:"edit_note",size:"md"}),a(ce,null,{default:t(()=>e[61]||(e[61]=[r("Novo B\xF4nus")])),_:1}),a(D,{id:l.bonus.id,cor:"positive",class:"float-right"},null,8,["id"])]),_:1})]),_:1}),a(be,null,{default:t(()=>[a(Ve,null,{default:t(()=>[a(M,{gutter:"md",items:"center",justify:"center"},{default:t(()=>[a(b,{col:"12"},{default:t(()=>[p("div",{onClick:e[23]||(e[23]=(...o)=>m.abrirModalCliente&&m.abrirModalCliente(...o)),class:"q-mb-md"},[a(u,{modelValue:l.bonus.nomeCliente,"onUpdate:modelValue":[e[21]||(e[21]=o=>l.bonus.nomeCliente=o),e[22]||(e[22]=o=>o===null?m.limparCliente():"")],debounce:500,dense:"",filled:"",somenteLeitura:!l.bonus.nomeCliente,clearable:!!l.bonus.nomeCliente,before:[{icon:"person",handler:m.abrirModalCliente}],after:[{icon:"search",handler:m.abrirModalCliente}],rotulo:"Cliente","input-class":"cursor-pointer"},null,8,["modelValue","somenteLeitura","clearable","before","after"])])]),_:1}),a(b,{col:"12 sm6"},{default:t(()=>[a(u,{modelValue:l.bonus.cpfCliente,"onUpdate:modelValue":e[24]||(e[24]=o=>l.bonus.cpfCliente=o),dense:"",filled:"",rotulo:"CPF",mask:"###.###.###-##",somenteLeitura:"",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),a(b,{col:"12 sm6"},{default:t(()=>[a(u,{modelValue:l.bonus.whatsappCliente,"onUpdate:modelValue":e[25]||(e[25]=o=>l.bonus.whatsappCliente=o),dense:"",filled:"",rotulo:"WhatsApp",mask:"(##) #####-####",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),a(b,{col:"12"},{default:t(()=>[a(B,{modelValue:l.bonus.dadosEmpresa,"onUpdate:modelValue":e[26]||(e[26]=o=>l.bonus.dadosEmpresa=o),filled:"",dense:"",chaves:["id","nome","apelido","numeroDocumentoNacional"],permiteNull:!1},null,8,["modelValue"])]),_:1}),a(b,{col:"6"},{default:t(()=>[a(u,{modelValue:l.bonus.diasMinimoUso,"onUpdate:modelValue":e[27]||(e[27]=o=>l.bonus.diasMinimoUso=o),filled:"",dense:"",rotulo:"Dias m\xEDnimos para uso",rules:[o=>m.validacao("diasMinimoUso",l.bonus)],tipo:"quantidade"},null,8,["modelValue","rules"])]),_:1}),a(b,{col:"6"},{default:t(()=>[a(u,{modelValue:l.bonus.dataInicioValidade,"onUpdate:modelValue":e[28]||(e[28]=o=>l.bonus.dataInicioValidade=o),rotulo:"Data de in\xEDcio da Validade",filled:"",dense:"",tipo:"data",rules:[o=>m.validacao("dataInicioValidade",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),a(b,{col:"6"},{default:t(()=>[a(u,{modelValue:l.bonus.diasExpiracao,"onUpdate:modelValue":e[29]||(e[29]=o=>l.bonus.diasExpiracao=o),rotulo:"Expira em (dias)",tipo:"quantidade",filled:"",dense:"",rules:[o=>m.validacao("diasExpiracao",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),a(b,{col:"6"},{default:t(()=>[a(u,{modelValue:l.bonus.dataVencimento,"onUpdate:modelValue":e[30]||(e[30]=o=>l.bonus.dataVencimento=o),tipo:"data",rotulo:"Data de Vencimento",filled:"",dense:"",rules:[o=>m.validacao("dataVencimento",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),a(b,{col:"12 sm"},{default:t(()=>[a(u,{modelValue:l.bonus.valor,"onUpdate:modelValue":e[31]||(e[31]=o=>l.bonus.valor=o),prefix:"R$",rotulo:"Valor",tipo:"decimal",decimals:"2",filled:"",dense:"",rules:[o=>m.validacao("valor",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),a(b,{col:"12 sm"},{default:t(()=>[a(u,{modelValue:l.bonus.valorMinimoVenda,"onUpdate:modelValue":e[32]||(e[32]=o=>l.bonus.valorMinimoVenda=o),prefix:"R$",tipo:"decimal",rotulo:"Valor m\xEDnimo da compra",decimals:"2",filled:"",dense:"",rules:[o=>m.validacao("valorMinimoVenda",l.bonus)]},null,8,["modelValue","rules"])]),_:1}),a(b,{col:"12"},{default:t(()=>[a(v,{caption:"",bordered:"",class:"q-pa-sm q-mb-md"},{default:t(()=>{var o,k,H,A,I,S,L,N,O,Q;return[a(v,{text:"body2",class:"q-mb-md"},{default:t(()=>e[62]||(e[62]=[r("Esse texto ser\xE1 enviado junto as informa\xE7\xF5es do b\xF4nus para o cliente.")])),_:1}),p("strong",null,f(((k=(o=l.bonus)==null?void 0:o.dadosEmpresa)==null?void 0:k.apelido)||((A=(H=l.bonus)==null?void 0:H.dadosEmpresa)==null?void 0:A.nome)||"Sua \xD3tica"),1),e[64]||(e[64]=r(" tem um presente para voc\xEA, ")),p("strong",null,f(((I=l.bonus)==null?void 0:I.nomeCliente)||"Ricardo"),1),e[65]||(e[65]=r(". ")),e[66]||(e[66]=p("br",null,null,-1)),e[67]||(e[67]=r(" Um super b\xF4nus no valor de ")),p("strong",null,"R$ "+f(s.$filters.numero((S=l.bonus)==null?void 0:S.valor,2)),1),e[68]||(e[68]=r(" para voc\xEA usar na sua pr\xF3xima compra acima de ")),e[69]||(e[69]=p("br",null,null,-1)),p("strong",null,"R$ "+f(s.$filters.numero((L=l.bonus)==null?void 0:L.valorMinimoVenda,2)),1),e[70]||(e[70]=r(", mas, fique atento ao prazo: v\xE1lido de ")),p("strong",null,f(s.$filters.data((N=l.bonus)==null?void 0:N.dataInicioValidade)),1),e[71]||(e[71]=r(" at\xE9 ")),p("strong",null,f(s.$filters.data((O=l.bonus)==null?void 0:O.dataVencimento)),1),e[72]||(e[72]=r("! ")),e[73]||(e[73]=p("br",null,null,-1)),e[74]||(e[74]=r(" Seu token \xE9 ")),p("strong",null,f((Q=l.bonus.id||"")==null?void 0:Q.slice(-8).replace(/(.{4})(.{4})/g,"$1-$2")),1),e[75]||(e[75]=r(". ")),e[76]||(e[76]=p("br",null,null,-1)),a(v,{text:"center",class:"q-my-sm"},{default:t(()=>[a(C,{name:"add",color:"primary",size:"xs"})]),_:1}),a(u,{modelValue:l.bonus.textoRegras,"onUpdate:modelValue":e[33]||(e[33]=j=>l.bonus.textoRegras=j),filled:"",dense:"",tipo:"textoArea",rotulo:"Regras para uso:"},null,8,["modelValue"]),a(v,{text:"regular"},{default:t(()=>[e[63]||(e[63]=r(" Texto din\xE2mico: ")),a(x,{onClick:e[34]||(e[34]=()=>{l.bonus.textoRegras+=" [NomeCliente]"}),dense:"",flat:"","no-caps":"",label:"[NomeCliente]",style:{"font-size":"0.75rem"}}),a(x,{onClick:e[35]||(e[35]=()=>{l.bonus.textoRegras+=" [NomeEmpresa]"}),dense:"",flat:"","no-caps":"",label:"[NomeEmpresa]",style:{"font-size":"0.75rem"}}),a(x,{onClick:e[36]||(e[36]=()=>{l.bonus.textoRegras+=" [DataVencimento]"}),dense:"",flat:"","no-caps":"",label:"[DataVencimento]",style:{"font-size":"0.75rem"}}),a(x,{onClick:e[37]||(e[37]=()=>{l.bonus.textoRegras+=" [CPF]"}),class:"captalize",dense:"",flat:"","no-caps":"",label:"[CPF]",style:{"font-size":"0.75rem"}}),a(x,{onClick:e[38]||(e[38]=()=>{l.bonus.textoRegras+=" [WhatsApp]"}),dense:"",flat:"","no-caps":"",label:"[WhatsApp]",style:{"font-size":"0.75rem"}}),a(x,{onClick:e[39]||(e[39]=()=>{l.bonus.textoRegras+=" [Valor]"}),dense:"",flat:"","no-caps":"",label:"[Valor]",style:{"font-size":"0.75rem"}}),a(x,{onClick:e[40]||(e[40]=()=>{l.bonus.textoRegras+=" [ValorMinimoCompra]"}),dense:"",flat:"","no-caps":"",label:"[ValorMinimoCompra]",style:{"font-size":"0.75rem"}})]),_:1})]}),_:1})]),_:1}),a(b,{col:"12"},{default:t(()=>[a(v,{bordered:"","roudned-borders":"",text:"regular caption",class:"q-pa-sm q-mb-md"},{default:t(()=>[a(u,{modelValue:l.bonus.observacao,"onUpdate:modelValue":e[41]||(e[41]=o=>l.bonus.observacao=o),filled:"",dense:"",tipo:"textoArea",rotulo:"Observa\xE7\xE3o:"},null,8,["modelValue"]),e[77]||(e[77]=p("strong",null,"*",-1)),e[78]||(e[78]=r(" Esta observa\xE7\xE3o s\xF3 estar\xE1 disponivel aqui nas configura\xE7\xF5es. "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(ge,{class:"bg-light border-top q-px-md q-py-sm text-right"},{default:t(()=>[a(x,{onClick:e[42]||(e[42]=o=>m.fecharBonus()),flat:"",label:"Cancelar",color:"tertiary"}),a(x,{type:"submit",unelevated:"",dark:"",color:"primary",label:"Salvar",class:"q-ml-sm"})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"])])}var Qe=oe(De,[["render",He]]);export{Qe as default};
